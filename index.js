"use strict";
(() => {
  // game/engine/math/fixedPoint.ts
  var FRACTIONAL_BITS = 10;
  var SCALE = 1 << FRACTIONAL_BITS;
  var MAX_RAW_VALUE = (1 << 25) - 1;
  var MIN_RAW_VALUE = -(1 << 25);
  function ClampRaw(rawValue) {
    return Math.max(MIN_RAW_VALUE, Math.min(MAX_RAW_VALUE, rawValue));
  }
  function NumberToRaw(value) {
    return ClampRaw(Math.trunc(value * SCALE));
  }
  function RawToNumber(raw) {
    return raw / SCALE;
  }
  function MultiplyRaw(aRaw, bRaw) {
    return Math.trunc(aRaw * bRaw / SCALE);
  }
  function DivideRaw(aRaw, bRaw) {
    if (bRaw === 0) {
      throw new Error("FixedPoint division by zero.");
    }
    return Math.trunc(aRaw * SCALE / bRaw);
  }
  function SqrtRaw(aRaw) {
    if (aRaw < 0) {
      throw new Error("FixedPoint square root of negative number.");
    }
    return Math.trunc(Math.sqrt(aRaw * SCALE));
  }
  function DotProductRaw(x1Raw, y1Raw, x2Raw, y2Raw) {
    return MultiplyRaw(x1Raw, x2Raw) + MultiplyRaw(y1Raw, y2Raw);
  }
  function DotProductVectorRaw(vec1, vec2) {
    return DotProductRaw(vec1.X.Raw, vec1.Y.Raw, vec2.X.Raw, vec2.Y.Raw);
  }
  function DistanceRaw(x1Raw, y1Raw, x2Raw, y2Raw) {
    const dx = x1Raw - x2Raw;
    const dy = y1Raw - y2Raw;
    const dx2 = MultiplyRaw(dx, dx);
    const dy2 = MultiplyRaw(dy, dy);
    return SqrtRaw(dx2 + dy2);
  }
  var FixedPoint = class {
    constructor(value = 0) {
      this._rawValue = NumberToRaw(value);
    }
    // --- Value Conversion ---
    SetFromNumber(value) {
      this._rawValue = NumberToRaw(value);
      return this;
    }
    SetFromFp(other) {
      this._rawValue = other._rawValue;
      return this;
    }
    get AsNumber() {
      return RawToNumber(this._rawValue);
    }
    get Raw() {
      return this._rawValue;
    }
    SetFromRaw(raw) {
      if (!Number.isInteger(raw)) {
        throw new Error(`Illegal assigntment to FixedPoint. Raw:${raw}`);
      }
      this._rawValue = raw;
      return this;
    }
    // --- Mutative Arithmetic ---
    Add(other) {
      this._rawValue += other._rawValue;
      return this;
    }
    AddRaw(otherRaw) {
      this._rawValue += otherRaw;
      return this;
    }
    Subtract(other) {
      this._rawValue -= other._rawValue;
      return this;
    }
    SubtractRaw(otherRaw) {
      this._rawValue -= otherRaw;
      return this;
    }
    Multiply(other) {
      this._rawValue = MultiplyRaw(this._rawValue, other._rawValue);
      return this;
    }
    Negate() {
      if (this._rawValue !== 0) {
        this._rawValue = -this._rawValue;
      }
      return this;
    }
    Divide(other) {
      this._rawValue = DivideRaw(this._rawValue, other._rawValue);
      return this;
    }
    Sqrt() {
      this._rawValue = SqrtRaw(this._rawValue);
      return this;
    }
    // --- Set-based Arithmetic ---
    SetAdd(a, b) {
      this._rawValue = a._rawValue + b._rawValue;
      return this;
    }
    SetSubtract(a, b) {
      this._rawValue = a._rawValue - b._rawValue;
      return this;
    }
    SetMultiply(a, b) {
      this._rawValue = MultiplyRaw(a._rawValue, b._rawValue);
      return this;
    }
    SetDivide(a, b) {
      this._rawValue = DivideRaw(a._rawValue, b._rawValue);
      return this;
    }
    // --- Comparison ---
    Equals(other) {
      return this._rawValue === other._rawValue;
    }
    GreaterThan(other) {
      return this._rawValue > other._rawValue;
    }
    GreaterThanOrEqualTo(other) {
      return this._rawValue >= other._rawValue;
    }
    LessThan(other) {
      return this._rawValue < other._rawValue;
    }
    LessThanOrEqualTo(other) {
      return this._rawValue <= other._rawValue;
    }
    // --- Pool methods ---
    Zero() {
      this._rawValue = 0;
    }
  };

  // game/engine/entity/components/shield.ts
  var ONE = NumberToRaw(1);
  var TWO = NumberToRaw(2);
  var ShieldComponent = class {
    constructor(radius, yOffset) {
      this.currentRadius = new FixedPoint(0);
      this.step = new FixedPoint(0);
      this.framesToFulll = new FixedPoint(300);
      this.damageMult = new FixedPoint(1.5);
      this.maxShieldOffSetRadius = new FixedPoint(0);
      this.InitialRadius = new FixedPoint(0);
      this.YOffsetConstant = new FixedPoint(0);
      this.ShieldTiltX = new FixedPoint(0);
      this.ShieldTiltY = new FixedPoint(0);
      this.Active = false;
      this.currentRadius.SetFromNumber(radius);
      this.InitialRadius.SetFromNumber(radius);
      this.maxShieldOffSetRadius.SetFromNumber(DivideRaw(radius, TWO));
      this.YOffsetConstant.SetFromNumber(yOffset);
      this.step.SetDivide(this.currentRadius, this.framesToFulll);
    }
    SnapShot() {
      return {
        CurrentRadius: this.currentRadius.AsNumber,
        Active: this.Active,
        ShieldTiltX: this.ShieldTiltX.AsNumber,
        ShieldTiltY: this.ShieldTiltY.AsNumber
      };
    }
    SetFromSnapShot(snapShot) {
      this.Active = snapShot.Active;
      this.currentRadius.SetFromNumber(snapShot.CurrentRadius);
      this.ShieldTiltX.SetFromNumber(snapShot.ShieldTiltX);
      this.ShieldTiltY.SetFromNumber(snapShot.ShieldTiltY);
    }
    Grow() {
      if (this.currentRadius.LessThan(this.InitialRadius)) {
        this.currentRadius.Add(this.step);
      }
      if (this.currentRadius.GreaterThan(this.InitialRadius)) {
        this.currentRadius.SetFromFp(this.InitialRadius);
      }
    }
    ShrinkRaw(intensityRaw) {
      if (this.currentRadius.Raw > 0) {
        this.currentRadius.SetFromRaw(
          this.currentRadius.Raw - MultiplyRaw(this.step.Raw, intensityRaw)
        );
      }
      if (this.currentRadius.Raw < 0) {
        this.currentRadius.SetFromRaw(0);
      }
    }
    Damage(d) {
      const damageMod = MultiplyRaw(d.Raw, this.damageMult.Raw);
      const curRadius = this.currentRadius;
      this.currentRadius.SetFromRaw(curRadius.Raw - damageMod);
      if (curRadius.Raw < 0) {
        this.currentRadius.SetFromRaw(0);
      }
    }
    CalculateCurrentRadiusRaw(triggerValueRaw) {
      const curRadRaw = this.currentRadius.Raw;
      return CalculateRadiusFromTriggerRaw(triggerValueRaw, curRadRaw);
    }
    get IsBroken() {
      return this.currentRadius.Raw <= 0;
    }
    get PreModeCurrentRadius() {
      return this.currentRadius;
    }
    Reset() {
      this.currentRadius.SetFromFp(this.InitialRadius);
      this.ShieldTiltX.Zero();
      this.ShieldTiltY.Zero();
      this.Active = false;
    }
  };
  function CalculateRadiusFromTriggerRaw(triggerValueRaw, raddiusRaw) {
    return raddiusRaw + MultiplyRaw(raddiusRaw, DivideRaw(ONE - triggerValueRaw, TWO));
  }

  // game/engine/pools/ActiveAttackBubbles.ts
  var ActiveHitBubblesDTO = class {
    constructor() {
      this.bubbles = [];
    }
    AddBubble(bub) {
      this.bubbles.push(bub);
      return this;
    }
    AtIndex(index) {
      return this.bubbles[index];
    }
    get Bubbles() {
      return this.bubbles;
    }
    get Length() {
      return this.bubbles.length;
    }
    Zero() {
      this.bubbles.length = 0;
    }
  };

  // game/engine/math/LUTS.ts
  var SIN_LUT = new Int32Array([
    0,
    12,
    25,
    37,
    50,
    62,
    75,
    87,
    100,
    112,
    125,
    137,
    150,
    162,
    175,
    187,
    199,
    212,
    224,
    236,
    248,
    260,
    273,
    285,
    297,
    309,
    321,
    333,
    344,
    356,
    368,
    380,
    391,
    403,
    414,
    426,
    437,
    449,
    460,
    471,
    482,
    493,
    504,
    515,
    526,
    537,
    547,
    558,
    568,
    579,
    589,
    599,
    609,
    620,
    629,
    639,
    649,
    659,
    668,
    678,
    687,
    696,
    706,
    715,
    724,
    732,
    741,
    750,
    758,
    767,
    775,
    783,
    791,
    799,
    807,
    814,
    822,
    829,
    837,
    844,
    851,
    858,
    865,
    871,
    878,
    884,
    890,
    897,
    903,
    908,
    914,
    920,
    925,
    930,
    936,
    941,
    946,
    950,
    955,
    959,
    964,
    968,
    972,
    976,
    979,
    983,
    986,
    990,
    993,
    996,
    999,
    1001,
    1004,
    1006,
    1008,
    1010,
    1012,
    1014,
    1016,
    1017,
    1019,
    1020,
    1021,
    1022,
    1022,
    1023,
    1023,
    1023,
    1024,
    1023,
    1023,
    1023,
    1022,
    1022,
    1021,
    1020,
    1019,
    1017,
    1016,
    1014,
    1012,
    1010,
    1008,
    1006,
    1004,
    1001,
    999,
    996,
    993,
    990,
    986,
    983,
    979,
    976,
    972,
    968,
    964,
    959,
    955,
    950,
    946,
    941,
    936,
    930,
    925,
    920,
    914,
    908,
    903,
    897,
    890,
    884,
    878,
    871,
    865,
    858,
    851,
    844,
    837,
    829,
    822,
    814,
    807,
    799,
    791,
    783,
    775,
    767,
    758,
    750,
    741,
    732,
    724,
    715,
    706,
    696,
    687,
    678,
    668,
    659,
    649,
    639,
    629,
    620,
    609,
    599,
    589,
    579,
    568,
    558,
    547,
    537,
    526,
    515,
    504,
    493,
    482,
    471,
    460,
    449,
    437,
    426,
    414,
    403,
    391,
    380,
    368,
    356,
    344,
    333,
    321,
    309,
    297,
    285,
    273,
    260,
    248,
    236,
    224,
    212,
    199,
    187,
    175,
    162,
    150,
    137,
    125,
    112,
    100,
    87,
    75,
    62,
    50,
    37,
    25,
    12,
    0,
    -13,
    -26,
    -38,
    -51,
    -63,
    -76,
    -88,
    -101,
    -113,
    -126,
    -138,
    -151,
    -163,
    -176,
    -188,
    -200,
    -213,
    -225,
    -237,
    -249,
    -261,
    -274,
    -286,
    -298,
    -310,
    -322,
    -334,
    -345,
    -357,
    -369,
    -381,
    -392,
    -404,
    -415,
    -427,
    -438,
    -450,
    -461,
    -472,
    -483,
    -494,
    -505,
    -516,
    -527,
    -538,
    -548,
    -559,
    -569,
    -580,
    -590,
    -600,
    -610,
    -621,
    -630,
    -640,
    -650,
    -660,
    -669,
    -679,
    -688,
    -697,
    -707,
    -716,
    -725,
    -733,
    -742,
    -751,
    -759,
    -768,
    -776,
    -784,
    -792,
    -800,
    -808,
    -815,
    -823,
    -830,
    -838,
    -845,
    -852,
    -859,
    -866,
    -872,
    -879,
    -885,
    -891,
    -898,
    -904,
    -909,
    -915,
    -921,
    -926,
    -931,
    -937,
    -942,
    -947,
    -951,
    -956,
    -960,
    -965,
    -969,
    -973,
    -977,
    -980,
    -984,
    -987,
    -991,
    -994,
    -997,
    -1e3,
    -1002,
    -1005,
    -1007,
    -1009,
    -1011,
    -1013,
    -1015,
    -1017,
    -1018,
    -1020,
    -1021,
    -1022,
    -1023,
    -1023,
    -1024,
    -1024,
    -1024,
    -1024,
    -1024,
    -1024,
    -1024,
    -1023,
    -1023,
    -1022,
    -1021,
    -1020,
    -1018,
    -1017,
    -1015,
    -1013,
    -1011,
    -1009,
    -1007,
    -1005,
    -1002,
    -1e3,
    -997,
    -994,
    -991,
    -987,
    -984,
    -980,
    -977,
    -973,
    -969,
    -965,
    -960,
    -956,
    -951,
    -947,
    -942,
    -937,
    -931,
    -926,
    -921,
    -915,
    -909,
    -904,
    -898,
    -891,
    -885,
    -879,
    -872,
    -866,
    -859,
    -852,
    -845,
    -838,
    -830,
    -823,
    -815,
    -808,
    -800,
    -792,
    -784,
    -776,
    -768,
    -759,
    -751,
    -742,
    -733,
    -725,
    -716,
    -707,
    -697,
    -688,
    -679,
    -669,
    -660,
    -650,
    -640,
    -630,
    -621,
    -610,
    -600,
    -590,
    -580,
    -569,
    -559,
    -548,
    -538,
    -527,
    -516,
    -505,
    -494,
    -483,
    -472,
    -461,
    -450,
    -438,
    -427,
    -415,
    -404,
    -392,
    -381,
    -369,
    -357,
    -345,
    -334,
    -322,
    -310,
    -298,
    -286,
    -274,
    -261,
    -249,
    -237,
    -225,
    -213,
    -200,
    -188,
    -176,
    -163,
    -151,
    -138,
    -126,
    -113,
    -101,
    -88,
    -76,
    -63,
    -51,
    -38,
    -26,
    -13
  ]);
  var COS_LUT = new Int32Array([
    1024,
    1023,
    1023,
    1023,
    1022,
    1022,
    1021,
    1020,
    1019,
    1017,
    1016,
    1014,
    1012,
    1010,
    1008,
    1006,
    1004,
    1001,
    999,
    996,
    993,
    990,
    986,
    983,
    979,
    976,
    972,
    968,
    964,
    959,
    955,
    950,
    946,
    941,
    936,
    930,
    925,
    920,
    914,
    908,
    903,
    897,
    890,
    884,
    878,
    871,
    865,
    858,
    851,
    844,
    837,
    829,
    822,
    814,
    807,
    799,
    791,
    783,
    775,
    767,
    758,
    750,
    741,
    732,
    724,
    715,
    706,
    696,
    687,
    678,
    668,
    659,
    649,
    639,
    629,
    620,
    609,
    599,
    589,
    579,
    568,
    558,
    547,
    537,
    526,
    515,
    504,
    493,
    482,
    471,
    460,
    449,
    437,
    426,
    414,
    403,
    391,
    380,
    368,
    356,
    344,
    333,
    321,
    309,
    297,
    285,
    273,
    260,
    248,
    236,
    224,
    212,
    199,
    187,
    175,
    162,
    150,
    137,
    125,
    112,
    100,
    87,
    75,
    62,
    50,
    37,
    25,
    12,
    0,
    -13,
    -26,
    -38,
    -51,
    -63,
    -76,
    -88,
    -101,
    -113,
    -126,
    -138,
    -151,
    -163,
    -176,
    -188,
    -200,
    -213,
    -225,
    -237,
    -249,
    -261,
    -274,
    -286,
    -298,
    -310,
    -322,
    -334,
    -345,
    -357,
    -369,
    -381,
    -392,
    -404,
    -415,
    -427,
    -438,
    -450,
    -461,
    -472,
    -483,
    -494,
    -505,
    -516,
    -527,
    -538,
    -548,
    -559,
    -569,
    -580,
    -590,
    -600,
    -610,
    -621,
    -630,
    -640,
    -650,
    -660,
    -669,
    -679,
    -688,
    -697,
    -707,
    -716,
    -725,
    -733,
    -742,
    -751,
    -759,
    -768,
    -776,
    -784,
    -792,
    -800,
    -808,
    -815,
    -823,
    -830,
    -838,
    -845,
    -852,
    -859,
    -866,
    -872,
    -879,
    -885,
    -891,
    -898,
    -904,
    -909,
    -915,
    -921,
    -926,
    -931,
    -937,
    -942,
    -947,
    -951,
    -956,
    -960,
    -965,
    -969,
    -973,
    -977,
    -980,
    -984,
    -987,
    -991,
    -994,
    -997,
    -1e3,
    -1002,
    -1005,
    -1007,
    -1009,
    -1011,
    -1013,
    -1015,
    -1017,
    -1018,
    -1020,
    -1021,
    -1022,
    -1023,
    -1023,
    -1024,
    -1024,
    -1024,
    -1024,
    -1024,
    -1024,
    -1024,
    -1023,
    -1023,
    -1022,
    -1021,
    -1020,
    -1018,
    -1017,
    -1015,
    -1013,
    -1011,
    -1009,
    -1007,
    -1005,
    -1002,
    -1e3,
    -997,
    -994,
    -991,
    -987,
    -984,
    -980,
    -977,
    -973,
    -969,
    -965,
    -960,
    -956,
    -951,
    -947,
    -942,
    -937,
    -931,
    -926,
    -921,
    -915,
    -909,
    -904,
    -898,
    -891,
    -885,
    -879,
    -872,
    -866,
    -859,
    -852,
    -845,
    -838,
    -830,
    -823,
    -815,
    -808,
    -800,
    -792,
    -784,
    -776,
    -768,
    -759,
    -751,
    -742,
    -733,
    -725,
    -716,
    -707,
    -697,
    -688,
    -679,
    -669,
    -660,
    -650,
    -640,
    -630,
    -621,
    -610,
    -600,
    -590,
    -580,
    -569,
    -559,
    -548,
    -538,
    -527,
    -516,
    -505,
    -494,
    -483,
    -472,
    -461,
    -450,
    -438,
    -427,
    -415,
    -404,
    -392,
    -381,
    -369,
    -357,
    -345,
    -334,
    -322,
    -310,
    -298,
    -286,
    -274,
    -261,
    -249,
    -237,
    -225,
    -213,
    -200,
    -188,
    -176,
    -163,
    -151,
    -138,
    -126,
    -113,
    -101,
    -88,
    -76,
    -63,
    -51,
    -38,
    -26,
    -13,
    -1,
    12,
    25,
    37,
    50,
    62,
    75,
    87,
    100,
    112,
    125,
    137,
    150,
    162,
    175,
    187,
    199,
    212,
    224,
    236,
    248,
    260,
    273,
    285,
    297,
    309,
    321,
    333,
    344,
    356,
    368,
    380,
    391,
    403,
    414,
    426,
    437,
    449,
    460,
    471,
    482,
    493,
    504,
    515,
    526,
    537,
    547,
    558,
    568,
    579,
    589,
    599,
    609,
    620,
    629,
    639,
    649,
    659,
    668,
    678,
    687,
    696,
    706,
    715,
    724,
    732,
    741,
    750,
    758,
    767,
    775,
    783,
    791,
    799,
    807,
    814,
    822,
    829,
    837,
    844,
    851,
    858,
    865,
    871,
    878,
    884,
    890,
    897,
    903,
    908,
    914,
    920,
    925,
    930,
    936,
    941,
    946,
    950,
    955,
    959,
    964,
    968,
    972,
    976,
    979,
    983,
    986,
    990,
    993,
    996,
    999,
    1001,
    1004,
    1006,
    1008,
    1010,
    1012,
    1014,
    1016,
    1017,
    1019,
    1020,
    1021,
    1022,
    1022,
    1023,
    1023,
    1023
  ]);
  var ATAN2_LUT = new Int32Array([
    64,
    64,
    65,
    65,
    66,
    67,
    68,
    68,
    69,
    70,
    70,
    71,
    72,
    73,
    73,
    74,
    75,
    76,
    77,
    78,
    78,
    79,
    80,
    81,
    82,
    83,
    84,
    85,
    86,
    87,
    88,
    89,
    90,
    91,
    92,
    93,
    94,
    95,
    96,
    97,
    98,
    99,
    101,
    102,
    103,
    104,
    105,
    106,
    108,
    109,
    110,
    111,
    112,
    114,
    115,
    116,
    117,
    119,
    120,
    121,
    122,
    124,
    125,
    126,
    128,
    129,
    130,
    131,
    133,
    134,
    135,
    136,
    138,
    139,
    140,
    141,
    143,
    144,
    145,
    146,
    147,
    149,
    150,
    151,
    152,
    153,
    154,
    156,
    157,
    158,
    159,
    160,
    161,
    162,
    163,
    164,
    165,
    166,
    167,
    168,
    169,
    170,
    171,
    172,
    173,
    174,
    175,
    176,
    177,
    177,
    178,
    179,
    180,
    181,
    182,
    182,
    183,
    184,
    185,
    185,
    186,
    187,
    187,
    188,
    189,
    190,
    190,
    191,
    63,
    64,
    64,
    65,
    65,
    66,
    67,
    68,
    68,
    69,
    70,
    71,
    71,
    72,
    73,
    74,
    74,
    75,
    76,
    77,
    78,
    79,
    80,
    80,
    81,
    82,
    83,
    84,
    85,
    86,
    87,
    88,
    89,
    90,
    91,
    92,
    93,
    95,
    96,
    97,
    98,
    99,
    100,
    101,
    102,
    104,
    105,
    106,
    107,
    108,
    110,
    111,
    112,
    113,
    115,
    116,
    117,
    118,
    120,
    121,
    122,
    124,
    125,
    126,
    128,
    129,
    130,
    131,
    133,
    134,
    135,
    137,
    138,
    139,
    140,
    142,
    143,
    144,
    145,
    147,
    148,
    149,
    150,
    151,
    153,
    154,
    155,
    156,
    157,
    158,
    159,
    160,
    162,
    163,
    164,
    165,
    166,
    167,
    168,
    169,
    170,
    171,
    172,
    173,
    174,
    175,
    175,
    176,
    177,
    178,
    179,
    180,
    181,
    181,
    182,
    183,
    184,
    184,
    185,
    186,
    187,
    187,
    188,
    189,
    190,
    190,
    191,
    192,
    62,
    63,
    64,
    64,
    65,
    66,
    66,
    67,
    68,
    68,
    69,
    70,
    71,
    71,
    72,
    73,
    74,
    75,
    75,
    76,
    77,
    78,
    79,
    80,
    81,
    82,
    83,
    84,
    85,
    86,
    87,
    88,
    89,
    90,
    91,
    92,
    93,
    94,
    95,
    96,
    97,
    99,
    100,
    101,
    102,
    103,
    104,
    106,
    107,
    108,
    109,
    111,
    112,
    113,
    114,
    116,
    117,
    118,
    120,
    121,
    122,
    124,
    125,
    126,
    128,
    129,
    130,
    131,
    133,
    134,
    135,
    137,
    138,
    139,
    141,
    142,
    143,
    144,
    146,
    147,
    148,
    149,
    151,
    152,
    153,
    154,
    155,
    156,
    158,
    159,
    160,
    161,
    162,
    163,
    164,
    165,
    166,
    167,
    168,
    169,
    170,
    171,
    172,
    173,
    174,
    175,
    176,
    177,
    178,
    179,
    180,
    180,
    181,
    182,
    183,
    184,
    184,
    185,
    186,
    187,
    187,
    188,
    189,
    189,
    190,
    191,
    192,
    192,
    62,
    62,
    63,
    64,
    64,
    65,
    66,
    66,
    67,
    68,
    68,
    69,
    70,
    71,
    72,
    72,
    73,
    74,
    75,
    76,
    77,
    77,
    78,
    79,
    80,
    81,
    82,
    83,
    84,
    85,
    86,
    87,
    88,
    89,
    90,
    91,
    92,
    94,
    95,
    96,
    97,
    98,
    99,
    100,
    102,
    103,
    104,
    105,
    107,
    108,
    109,
    110,
    112,
    113,
    114,
    116,
    117,
    118,
    120,
    121,
    122,
    123,
    125,
    126,
    128,
    129,
    130,
    132,
    133,
    134,
    135,
    137,
    138,
    139,
    141,
    142,
    143,
    145,
    146,
    147,
    148,
    150,
    151,
    152,
    153,
    155,
    156,
    157,
    158,
    159,
    160,
    161,
    163,
    164,
    165,
    166,
    167,
    168,
    169,
    170,
    171,
    172,
    173,
    174,
    175,
    176,
    177,
    178,
    178,
    179,
    180,
    181,
    182,
    183,
    183,
    184,
    185,
    186,
    187,
    187,
    188,
    189,
    189,
    190,
    191,
    192,
    192,
    193,
    61,
    62,
    62,
    63,
    64,
    64,
    65,
    66,
    66,
    67,
    68,
    69,
    69,
    70,
    71,
    72,
    73,
    73,
    74,
    75,
    76,
    77,
    78,
    79,
    80,
    81,
    81,
    82,
    83,
    84,
    85,
    87,
    88,
    89,
    90,
    91,
    92,
    93,
    94,
    95,
    96,
    98,
    99,
    100,
    101,
    103,
    104,
    105,
    106,
    108,
    109,
    110,
    111,
    113,
    114,
    115,
    117,
    118,
    119,
    121,
    122,
    123,
    125,
    126,
    128,
    129,
    130,
    132,
    133,
    134,
    136,
    137,
    138,
    140,
    141,
    142,
    144,
    145,
    146,
    147,
    149,
    150,
    151,
    152,
    154,
    155,
    156,
    157,
    159,
    160,
    161,
    162,
    163,
    164,
    165,
    166,
    167,
    168,
    170,
    171,
    172,
    173,
    174,
    174,
    175,
    176,
    177,
    178,
    179,
    180,
    181,
    182,
    182,
    183,
    184,
    185,
    186,
    186,
    187,
    188,
    189,
    189,
    190,
    191,
    192,
    192,
    193,
    193,
    60,
    61,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    66,
    67,
    68,
    69,
    69,
    70,
    71,
    72,
    73,
    74,
    74,
    75,
    76,
    77,
    78,
    79,
    80,
    81,
    82,
    83,
    84,
    85,
    86,
    87,
    88,
    89,
    90,
    91,
    93,
    94,
    95,
    96,
    97,
    98,
    100,
    101,
    102,
    103,
    105,
    106,
    107,
    109,
    110,
    111,
    112,
    114,
    115,
    117,
    118,
    119,
    121,
    122,
    123,
    125,
    126,
    128,
    129,
    130,
    132,
    133,
    134,
    136,
    137,
    138,
    140,
    141,
    143,
    144,
    145,
    146,
    148,
    149,
    150,
    152,
    153,
    154,
    155,
    157,
    158,
    159,
    160,
    161,
    162,
    164,
    165,
    166,
    167,
    168,
    169,
    170,
    171,
    172,
    173,
    174,
    175,
    176,
    177,
    178,
    179,
    180,
    181,
    181,
    182,
    183,
    184,
    185,
    186,
    186,
    187,
    188,
    189,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    194,
    59,
    60,
    61,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    66,
    67,
    68,
    69,
    70,
    70,
    71,
    72,
    73,
    74,
    75,
    76,
    76,
    77,
    78,
    79,
    80,
    81,
    82,
    83,
    84,
    85,
    86,
    88,
    89,
    90,
    91,
    92,
    93,
    94,
    96,
    97,
    98,
    99,
    100,
    102,
    103,
    104,
    106,
    107,
    108,
    110,
    111,
    112,
    114,
    115,
    116,
    118,
    119,
    120,
    122,
    123,
    125,
    126,
    128,
    129,
    130,
    132,
    133,
    135,
    136,
    137,
    139,
    140,
    141,
    143,
    144,
    145,
    147,
    148,
    149,
    151,
    152,
    153,
    155,
    156,
    157,
    158,
    159,
    161,
    162,
    163,
    164,
    165,
    166,
    167,
    169,
    170,
    171,
    172,
    173,
    174,
    175,
    176,
    177,
    178,
    179,
    179,
    180,
    181,
    182,
    183,
    184,
    185,
    185,
    186,
    187,
    188,
    189,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    194,
    195,
    59,
    59,
    60,
    61,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    66,
    67,
    68,
    69,
    70,
    70,
    71,
    72,
    73,
    74,
    75,
    76,
    77,
    78,
    79,
    80,
    81,
    82,
    83,
    84,
    85,
    86,
    87,
    88,
    89,
    90,
    91,
    93,
    94,
    95,
    96,
    97,
    99,
    100,
    101,
    103,
    104,
    105,
    107,
    108,
    109,
    111,
    112,
    113,
    115,
    116,
    118,
    119,
    120,
    122,
    123,
    125,
    126,
    128,
    129,
    130,
    132,
    133,
    135,
    136,
    137,
    139,
    140,
    142,
    143,
    144,
    146,
    147,
    148,
    150,
    151,
    152,
    154,
    155,
    156,
    158,
    159,
    160,
    161,
    162,
    164,
    165,
    166,
    167,
    168,
    169,
    170,
    171,
    172,
    173,
    174,
    175,
    176,
    177,
    178,
    179,
    180,
    181,
    182,
    183,
    184,
    185,
    185,
    186,
    187,
    188,
    189,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    194,
    195,
    196,
    58,
    59,
    59,
    60,
    61,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    67,
    67,
    68,
    69,
    70,
    71,
    71,
    72,
    73,
    74,
    75,
    76,
    77,
    78,
    79,
    80,
    81,
    82,
    83,
    84,
    85,
    86,
    87,
    89,
    90,
    91,
    92,
    93,
    95,
    96,
    97,
    98,
    100,
    101,
    102,
    103,
    105,
    106,
    108,
    109,
    110,
    112,
    113,
    115,
    116,
    117,
    119,
    120,
    122,
    123,
    125,
    126,
    128,
    129,
    130,
    132,
    133,
    135,
    136,
    138,
    139,
    140,
    142,
    143,
    145,
    146,
    147,
    149,
    150,
    152,
    153,
    154,
    155,
    157,
    158,
    159,
    160,
    162,
    163,
    164,
    165,
    166,
    168,
    169,
    170,
    171,
    172,
    173,
    174,
    175,
    176,
    177,
    178,
    179,
    180,
    181,
    182,
    183,
    184,
    184,
    185,
    186,
    187,
    188,
    188,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    194,
    195,
    196,
    196,
    57,
    58,
    59,
    59,
    60,
    61,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    67,
    67,
    68,
    69,
    70,
    71,
    72,
    73,
    73,
    74,
    75,
    76,
    77,
    78,
    79,
    80,
    81,
    82,
    83,
    85,
    86,
    87,
    88,
    89,
    90,
    92,
    93,
    94,
    95,
    96,
    98,
    99,
    100,
    102,
    103,
    104,
    106,
    107,
    109,
    110,
    111,
    113,
    114,
    116,
    117,
    119,
    120,
    122,
    123,
    125,
    126,
    128,
    129,
    130,
    132,
    133,
    135,
    136,
    138,
    139,
    141,
    142,
    144,
    145,
    146,
    148,
    149,
    151,
    152,
    153,
    155,
    156,
    157,
    159,
    160,
    161,
    162,
    163,
    165,
    166,
    167,
    168,
    169,
    170,
    172,
    173,
    174,
    175,
    176,
    177,
    178,
    179,
    180,
    181,
    182,
    182,
    183,
    184,
    185,
    186,
    187,
    188,
    188,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    194,
    195,
    196,
    196,
    197,
    57,
    57,
    58,
    59,
    59,
    60,
    61,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    67,
    67,
    68,
    69,
    70,
    71,
    72,
    73,
    74,
    75,
    76,
    77,
    78,
    79,
    80,
    81,
    82,
    83,
    84,
    85,
    86,
    87,
    89,
    90,
    91,
    92,
    93,
    95,
    96,
    97,
    99,
    100,
    101,
    103,
    104,
    105,
    107,
    108,
    110,
    111,
    113,
    114,
    116,
    117,
    118,
    120,
    121,
    123,
    124,
    126,
    128,
    129,
    131,
    132,
    134,
    135,
    137,
    138,
    139,
    141,
    142,
    144,
    145,
    147,
    148,
    150,
    151,
    152,
    154,
    155,
    156,
    158,
    159,
    160,
    162,
    163,
    164,
    165,
    166,
    168,
    169,
    170,
    171,
    172,
    173,
    174,
    175,
    176,
    177,
    178,
    179,
    180,
    181,
    182,
    183,
    184,
    185,
    186,
    187,
    188,
    188,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    194,
    195,
    196,
    196,
    197,
    198,
    56,
    56,
    57,
    58,
    58,
    59,
    60,
    61,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    67,
    68,
    68,
    69,
    70,
    71,
    72,
    73,
    74,
    75,
    76,
    77,
    78,
    79,
    80,
    81,
    82,
    83,
    84,
    86,
    87,
    88,
    89,
    90,
    92,
    93,
    94,
    95,
    97,
    98,
    99,
    101,
    102,
    104,
    105,
    106,
    108,
    109,
    111,
    112,
    114,
    115,
    117,
    118,
    120,
    121,
    123,
    124,
    126,
    128,
    129,
    131,
    132,
    134,
    135,
    137,
    138,
    140,
    141,
    143,
    144,
    146,
    147,
    149,
    150,
    151,
    153,
    154,
    156,
    157,
    158,
    160,
    161,
    162,
    163,
    165,
    166,
    167,
    168,
    169,
    171,
    172,
    173,
    174,
    175,
    176,
    177,
    178,
    179,
    180,
    181,
    182,
    183,
    184,
    185,
    186,
    187,
    187,
    188,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    194,
    195,
    196,
    197,
    197,
    198,
    199,
    55,
    56,
    56,
    57,
    58,
    58,
    59,
    60,
    60,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    67,
    68,
    68,
    69,
    70,
    71,
    72,
    73,
    74,
    75,
    76,
    77,
    78,
    79,
    80,
    81,
    83,
    84,
    85,
    86,
    87,
    88,
    90,
    91,
    92,
    94,
    95,
    96,
    98,
    99,
    100,
    102,
    103,
    105,
    106,
    108,
    109,
    111,
    112,
    114,
    115,
    117,
    118,
    120,
    121,
    123,
    124,
    126,
    128,
    129,
    131,
    132,
    134,
    135,
    137,
    138,
    140,
    141,
    143,
    144,
    146,
    147,
    149,
    150,
    152,
    153,
    155,
    156,
    157,
    159,
    160,
    161,
    163,
    164,
    165,
    167,
    168,
    169,
    170,
    171,
    172,
    174,
    175,
    176,
    177,
    178,
    179,
    180,
    181,
    182,
    183,
    184,
    185,
    186,
    187,
    187,
    188,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    195,
    195,
    196,
    197,
    197,
    198,
    199,
    199,
    54,
    55,
    56,
    56,
    57,
    58,
    58,
    59,
    60,
    60,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    67,
    68,
    69,
    69,
    70,
    71,
    72,
    73,
    74,
    75,
    76,
    77,
    78,
    80,
    81,
    82,
    83,
    84,
    85,
    87,
    88,
    89,
    90,
    92,
    93,
    94,
    96,
    97,
    98,
    100,
    101,
    103,
    104,
    106,
    107,
    109,
    110,
    112,
    113,
    115,
    116,
    118,
    120,
    121,
    123,
    124,
    126,
    128,
    129,
    131,
    132,
    134,
    135,
    137,
    139,
    140,
    142,
    143,
    145,
    146,
    148,
    149,
    151,
    152,
    154,
    155,
    157,
    158,
    159,
    161,
    162,
    163,
    165,
    166,
    167,
    168,
    170,
    171,
    172,
    173,
    174,
    175,
    177,
    178,
    179,
    180,
    181,
    182,
    183,
    184,
    185,
    186,
    186,
    187,
    188,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    195,
    195,
    196,
    197,
    197,
    198,
    199,
    199,
    200,
    54,
    54,
    55,
    55,
    56,
    57,
    57,
    58,
    59,
    60,
    60,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    67,
    68,
    69,
    70,
    71,
    72,
    73,
    74,
    75,
    76,
    77,
    78,
    79,
    80,
    81,
    82,
    83,
    85,
    86,
    87,
    88,
    90,
    91,
    92,
    94,
    95,
    96,
    98,
    99,
    101,
    102,
    104,
    105,
    107,
    108,
    110,
    111,
    113,
    115,
    116,
    118,
    119,
    121,
    123,
    124,
    126,
    128,
    129,
    131,
    132,
    134,
    136,
    137,
    139,
    140,
    142,
    144,
    145,
    147,
    148,
    150,
    151,
    153,
    154,
    156,
    157,
    159,
    160,
    161,
    163,
    164,
    165,
    167,
    168,
    169,
    170,
    172,
    173,
    174,
    175,
    176,
    177,
    178,
    179,
    180,
    181,
    182,
    183,
    184,
    185,
    186,
    187,
    188,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    195,
    195,
    196,
    197,
    198,
    198,
    199,
    200,
    200,
    201,
    53,
    53,
    54,
    55,
    55,
    56,
    57,
    57,
    58,
    59,
    60,
    60,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    67,
    68,
    69,
    70,
    71,
    72,
    73,
    74,
    75,
    76,
    77,
    78,
    79,
    80,
    82,
    83,
    84,
    85,
    86,
    88,
    89,
    90,
    92,
    93,
    95,
    96,
    97,
    99,
    100,
    102,
    103,
    105,
    106,
    108,
    110,
    111,
    113,
    114,
    116,
    118,
    119,
    121,
    123,
    124,
    126,
    128,
    129,
    131,
    132,
    134,
    136,
    137,
    139,
    141,
    142,
    144,
    145,
    147,
    149,
    150,
    152,
    153,
    155,
    156,
    158,
    159,
    160,
    162,
    163,
    165,
    166,
    167,
    169,
    170,
    171,
    172,
    173,
    175,
    176,
    177,
    178,
    179,
    180,
    181,
    182,
    183,
    184,
    185,
    186,
    187,
    188,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    195,
    195,
    196,
    197,
    198,
    198,
    199,
    200,
    200,
    201,
    202,
    52,
    53,
    53,
    54,
    54,
    55,
    56,
    57,
    57,
    58,
    59,
    59,
    60,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    67,
    68,
    69,
    70,
    71,
    72,
    73,
    74,
    75,
    76,
    77,
    78,
    80,
    81,
    82,
    83,
    84,
    86,
    87,
    88,
    90,
    91,
    92,
    94,
    95,
    97,
    98,
    100,
    101,
    103,
    104,
    106,
    108,
    109,
    111,
    112,
    114,
    116,
    117,
    119,
    121,
    122,
    124,
    126,
    128,
    129,
    131,
    133,
    134,
    136,
    138,
    139,
    141,
    143,
    144,
    146,
    147,
    149,
    151,
    152,
    154,
    155,
    157,
    158,
    160,
    161,
    163,
    164,
    165,
    167,
    168,
    169,
    171,
    172,
    173,
    174,
    175,
    177,
    178,
    179,
    180,
    181,
    182,
    183,
    184,
    185,
    186,
    187,
    188,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    195,
    196,
    196,
    197,
    198,
    198,
    199,
    200,
    201,
    201,
    202,
    202,
    51,
    52,
    52,
    53,
    54,
    54,
    55,
    56,
    56,
    57,
    58,
    59,
    59,
    60,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    67,
    68,
    69,
    70,
    71,
    72,
    73,
    74,
    75,
    76,
    78,
    79,
    80,
    81,
    82,
    84,
    85,
    86,
    88,
    89,
    90,
    92,
    93,
    95,
    96,
    98,
    99,
    101,
    102,
    104,
    106,
    107,
    109,
    110,
    112,
    114,
    115,
    117,
    119,
    121,
    122,
    124,
    126,
    128,
    129,
    131,
    133,
    134,
    136,
    138,
    140,
    141,
    143,
    145,
    146,
    148,
    149,
    151,
    153,
    154,
    156,
    157,
    159,
    160,
    162,
    163,
    165,
    166,
    167,
    169,
    170,
    171,
    173,
    174,
    175,
    176,
    177,
    179,
    180,
    181,
    182,
    183,
    184,
    185,
    186,
    187,
    188,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    195,
    196,
    196,
    197,
    198,
    199,
    199,
    200,
    201,
    201,
    202,
    203,
    203,
    50,
    51,
    52,
    52,
    53,
    53,
    54,
    55,
    56,
    56,
    57,
    58,
    59,
    59,
    60,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    67,
    68,
    69,
    70,
    71,
    72,
    73,
    74,
    76,
    77,
    78,
    79,
    80,
    82,
    83,
    84,
    86,
    87,
    88,
    90,
    91,
    93,
    94,
    96,
    97,
    99,
    100,
    102,
    103,
    105,
    107,
    108,
    110,
    112,
    113,
    115,
    117,
    119,
    120,
    122,
    124,
    126,
    128,
    129,
    131,
    133,
    135,
    136,
    138,
    140,
    142,
    143,
    145,
    147,
    148,
    150,
    152,
    153,
    155,
    156,
    158,
    159,
    161,
    162,
    164,
    165,
    167,
    168,
    169,
    171,
    172,
    173,
    175,
    176,
    177,
    178,
    179,
    181,
    182,
    183,
    184,
    185,
    186,
    187,
    188,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    195,
    196,
    196,
    197,
    198,
    199,
    199,
    200,
    201,
    202,
    202,
    203,
    203,
    204,
    49,
    50,
    51,
    51,
    52,
    53,
    53,
    54,
    55,
    55,
    56,
    57,
    58,
    58,
    59,
    60,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    67,
    68,
    69,
    70,
    71,
    73,
    74,
    75,
    76,
    77,
    78,
    80,
    81,
    82,
    83,
    85,
    86,
    88,
    89,
    90,
    92,
    93,
    95,
    96,
    98,
    100,
    101,
    103,
    105,
    106,
    108,
    110,
    111,
    113,
    115,
    117,
    118,
    120,
    122,
    124,
    126,
    128,
    129,
    131,
    133,
    135,
    137,
    138,
    140,
    142,
    144,
    145,
    147,
    149,
    150,
    152,
    154,
    155,
    157,
    159,
    160,
    162,
    163,
    165,
    166,
    167,
    169,
    170,
    172,
    173,
    174,
    175,
    177,
    178,
    179,
    180,
    181,
    182,
    184,
    185,
    186,
    187,
    188,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    195,
    196,
    197,
    197,
    198,
    199,
    200,
    200,
    201,
    202,
    202,
    203,
    204,
    204,
    205,
    49,
    49,
    50,
    50,
    51,
    52,
    52,
    53,
    54,
    54,
    55,
    56,
    57,
    58,
    58,
    59,
    60,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    67,
    68,
    69,
    71,
    72,
    73,
    74,
    75,
    76,
    77,
    79,
    80,
    81,
    83,
    84,
    85,
    87,
    88,
    90,
    91,
    93,
    94,
    96,
    97,
    99,
    101,
    102,
    104,
    106,
    108,
    109,
    111,
    113,
    115,
    116,
    118,
    120,
    122,
    124,
    126,
    128,
    129,
    131,
    133,
    135,
    137,
    139,
    140,
    142,
    144,
    146,
    147,
    149,
    151,
    153,
    154,
    156,
    158,
    159,
    161,
    162,
    164,
    165,
    167,
    168,
    170,
    171,
    172,
    174,
    175,
    176,
    178,
    179,
    180,
    181,
    182,
    183,
    184,
    186,
    187,
    188,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    195,
    196,
    197,
    197,
    198,
    199,
    200,
    201,
    201,
    202,
    203,
    203,
    204,
    205,
    205,
    206,
    48,
    48,
    49,
    50,
    50,
    51,
    51,
    52,
    53,
    54,
    54,
    55,
    56,
    57,
    57,
    58,
    59,
    60,
    61,
    62,
    63,
    64,
    64,
    65,
    66,
    67,
    69,
    70,
    71,
    72,
    73,
    74,
    75,
    77,
    78,
    79,
    80,
    82,
    83,
    85,
    86,
    87,
    89,
    90,
    92,
    94,
    95,
    97,
    98,
    100,
    102,
    104,
    105,
    107,
    109,
    111,
    113,
    114,
    116,
    118,
    120,
    122,
    124,
    126,
    128,
    129,
    131,
    133,
    135,
    137,
    139,
    141,
    142,
    144,
    146,
    148,
    150,
    151,
    153,
    155,
    157,
    158,
    160,
    161,
    163,
    165,
    166,
    168,
    169,
    170,
    172,
    173,
    175,
    176,
    177,
    178,
    180,
    181,
    182,
    183,
    184,
    185,
    186,
    188,
    189,
    190,
    191,
    192,
    192,
    193,
    194,
    195,
    196,
    197,
    198,
    198,
    199,
    200,
    201,
    201,
    202,
    203,
    204,
    204,
    205,
    205,
    206,
    207,
    47,
    47,
    48,
    49,
    49,
    50,
    51,
    51,
    52,
    53,
    53,
    54,
    55,
    56,
    56,
    57,
    58,
    59,
    60,
    61,
    62,
    63,
    64,
    64,
    65,
    67,
    68,
    69,
    70,
    71,
    72,
    73,
    74,
    76,
    77,
    78,
    80,
    81,
    82,
    84,
    85,
    87,
    88,
    90,
    91,
    93,
    95,
    96,
    98,
    100,
    101,
    103,
    105,
    107,
    108,
    110,
    112,
    114,
    116,
    118,
    120,
    122,
    124,
    126,
    128,
    129,
    131,
    133,
    135,
    137,
    139,
    141,
    143,
    145,
    147,
    148,
    150,
    152,
    154,
    155,
    157,
    159,
    160,
    162,
    164,
    165,
    167,
    168,
    170,
    171,
    173,
    174,
    175,
    177,
    178,
    179,
    181,
    182,
    183,
    184,
    185,
    186,
    187,
    188,
    190,
    191,
    192,
    192,
    193,
    194,
    195,
    196,
    197,
    198,
    199,
    199,
    200,
    201,
    202,
    202,
    203,
    204,
    204,
    205,
    206,
    206,
    207,
    208,
    46,
    47,
    47,
    48,
    48,
    49,
    50,
    50,
    51,
    52,
    52,
    53,
    54,
    55,
    55,
    56,
    57,
    58,
    59,
    60,
    61,
    62,
    63,
    64,
    65,
    66,
    67,
    68,
    69,
    70,
    71,
    72,
    73,
    75,
    76,
    77,
    79,
    80,
    81,
    83,
    84,
    86,
    87,
    89,
    91,
    92,
    94,
    95,
    97,
    99,
    101,
    102,
    104,
    106,
    108,
    110,
    112,
    114,
    116,
    118,
    120,
    122,
    124,
    126,
    128,
    129,
    131,
    133,
    135,
    137,
    139,
    141,
    143,
    145,
    147,
    149,
    151,
    153,
    154,
    156,
    158,
    160,
    161,
    163,
    164,
    166,
    168,
    169,
    171,
    172,
    174,
    175,
    176,
    178,
    179,
    180,
    182,
    183,
    184,
    185,
    186,
    187,
    188,
    189,
    190,
    192,
    192,
    193,
    194,
    195,
    196,
    197,
    198,
    199,
    200,
    200,
    201,
    202,
    203,
    203,
    204,
    205,
    205,
    206,
    207,
    207,
    208,
    208,
    45,
    46,
    46,
    47,
    47,
    48,
    49,
    49,
    50,
    51,
    51,
    52,
    53,
    54,
    54,
    55,
    56,
    57,
    58,
    59,
    60,
    61,
    62,
    62,
    64,
    65,
    66,
    67,
    68,
    69,
    70,
    71,
    73,
    74,
    75,
    76,
    78,
    79,
    81,
    82,
    83,
    85,
    87,
    88,
    90,
    91,
    93,
    95,
    96,
    98,
    100,
    102,
    104,
    106,
    108,
    109,
    111,
    113,
    115,
    117,
    119,
    121,
    123,
    125,
    128,
    130,
    132,
    134,
    136,
    138,
    140,
    142,
    144,
    146,
    147,
    149,
    151,
    153,
    155,
    157,
    159,
    160,
    162,
    164,
    165,
    167,
    168,
    170,
    172,
    173,
    174,
    176,
    177,
    179,
    180,
    181,
    182,
    184,
    185,
    186,
    187,
    188,
    189,
    190,
    192,
    193,
    193,
    194,
    195,
    196,
    197,
    198,
    199,
    200,
    201,
    201,
    202,
    203,
    204,
    204,
    205,
    206,
    206,
    207,
    208,
    208,
    209,
    209,
    44,
    45,
    45,
    46,
    46,
    47,
    48,
    48,
    49,
    50,
    50,
    51,
    52,
    53,
    53,
    54,
    55,
    56,
    57,
    58,
    59,
    60,
    60,
    61,
    62,
    64,
    65,
    66,
    67,
    68,
    69,
    70,
    72,
    73,
    74,
    75,
    77,
    78,
    80,
    81,
    83,
    84,
    86,
    87,
    89,
    91,
    92,
    94,
    96,
    98,
    99,
    101,
    103,
    105,
    107,
    109,
    111,
    113,
    115,
    117,
    119,
    121,
    123,
    125,
    128,
    130,
    132,
    134,
    136,
    138,
    140,
    142,
    144,
    146,
    148,
    150,
    152,
    154,
    156,
    157,
    159,
    161,
    163,
    164,
    166,
    168,
    169,
    171,
    172,
    174,
    175,
    177,
    178,
    180,
    181,
    182,
    183,
    185,
    186,
    187,
    188,
    189,
    190,
    192,
    193,
    194,
    195,
    195,
    196,
    197,
    198,
    199,
    200,
    201,
    202,
    202,
    203,
    204,
    205,
    205,
    206,
    207,
    207,
    208,
    209,
    209,
    210,
    210,
    43,
    44,
    44,
    45,
    46,
    46,
    47,
    47,
    48,
    49,
    49,
    50,
    51,
    52,
    52,
    53,
    54,
    55,
    56,
    57,
    58,
    58,
    59,
    60,
    61,
    62,
    64,
    65,
    66,
    67,
    68,
    69,
    70,
    72,
    73,
    74,
    76,
    77,
    79,
    80,
    82,
    83,
    85,
    86,
    88,
    90,
    91,
    93,
    95,
    97,
    99,
    101,
    103,
    105,
    107,
    109,
    111,
    113,
    115,
    117,
    119,
    121,
    123,
    125,
    128,
    130,
    132,
    134,
    136,
    138,
    140,
    142,
    144,
    146,
    148,
    150,
    152,
    154,
    156,
    158,
    160,
    162,
    164,
    165,
    167,
    169,
    170,
    172,
    173,
    175,
    176,
    178,
    179,
    181,
    182,
    183,
    185,
    186,
    187,
    188,
    189,
    190,
    192,
    193,
    194,
    195,
    196,
    197,
    197,
    198,
    199,
    200,
    201,
    202,
    203,
    203,
    204,
    205,
    206,
    206,
    207,
    208,
    208,
    209,
    209,
    210,
    211,
    211,
    42,
    43,
    43,
    44,
    45,
    45,
    46,
    46,
    47,
    48,
    48,
    49,
    50,
    51,
    51,
    52,
    53,
    54,
    55,
    56,
    56,
    57,
    58,
    59,
    60,
    61,
    62,
    64,
    65,
    66,
    67,
    68,
    69,
    71,
    72,
    73,
    75,
    76,
    78,
    79,
    81,
    82,
    84,
    85,
    87,
    89,
    91,
    92,
    94,
    96,
    98,
    100,
    102,
    104,
    106,
    108,
    110,
    112,
    114,
    117,
    119,
    121,
    123,
    125,
    128,
    130,
    132,
    134,
    136,
    138,
    141,
    143,
    145,
    147,
    149,
    151,
    153,
    155,
    157,
    159,
    161,
    163,
    164,
    166,
    168,
    170,
    171,
    173,
    174,
    176,
    177,
    179,
    180,
    182,
    183,
    184,
    186,
    187,
    188,
    189,
    190,
    192,
    193,
    194,
    195,
    196,
    197,
    198,
    199,
    199,
    200,
    201,
    202,
    203,
    204,
    204,
    205,
    206,
    207,
    207,
    208,
    209,
    209,
    210,
    210,
    211,
    212,
    212,
    41,
    42,
    42,
    43,
    44,
    44,
    45,
    45,
    46,
    47,
    47,
    48,
    49,
    50,
    50,
    51,
    52,
    53,
    54,
    54,
    55,
    56,
    57,
    58,
    59,
    60,
    61,
    62,
    64,
    65,
    66,
    67,
    68,
    70,
    71,
    72,
    74,
    75,
    77,
    78,
    80,
    81,
    83,
    84,
    86,
    88,
    90,
    92,
    93,
    95,
    97,
    99,
    101,
    103,
    105,
    108,
    110,
    112,
    114,
    116,
    118,
    121,
    123,
    125,
    128,
    130,
    132,
    134,
    137,
    139,
    141,
    143,
    145,
    147,
    150,
    152,
    154,
    156,
    158,
    160,
    162,
    163,
    165,
    167,
    169,
    171,
    172,
    174,
    175,
    177,
    178,
    180,
    181,
    183,
    184,
    185,
    187,
    188,
    189,
    190,
    192,
    193,
    194,
    195,
    196,
    197,
    198,
    199,
    200,
    201,
    201,
    202,
    203,
    204,
    205,
    205,
    206,
    207,
    208,
    208,
    209,
    210,
    210,
    211,
    211,
    212,
    213,
    213,
    40,
    41,
    41,
    42,
    43,
    43,
    44,
    44,
    45,
    46,
    46,
    47,
    48,
    49,
    49,
    50,
    51,
    52,
    53,
    53,
    54,
    55,
    56,
    57,
    58,
    59,
    60,
    61,
    62,
    64,
    65,
    66,
    67,
    68,
    70,
    71,
    73,
    74,
    75,
    77,
    79,
    80,
    82,
    83,
    85,
    87,
    89,
    91,
    93,
    95,
    96,
    99,
    101,
    103,
    105,
    107,
    109,
    111,
    114,
    116,
    118,
    121,
    123,
    125,
    128,
    130,
    132,
    134,
    137,
    139,
    141,
    144,
    146,
    148,
    150,
    152,
    154,
    156,
    159,
    160,
    162,
    164,
    166,
    168,
    170,
    172,
    173,
    175,
    176,
    178,
    180,
    181,
    182,
    184,
    185,
    187,
    188,
    189,
    190,
    192,
    193,
    194,
    195,
    196,
    197,
    198,
    199,
    200,
    201,
    202,
    202,
    203,
    204,
    205,
    206,
    206,
    207,
    208,
    209,
    209,
    210,
    211,
    211,
    212,
    212,
    213,
    214,
    214,
    39,
    40,
    40,
    41,
    42,
    42,
    43,
    43,
    44,
    45,
    45,
    46,
    47,
    47,
    48,
    49,
    50,
    51,
    51,
    52,
    53,
    54,
    55,
    56,
    57,
    58,
    59,
    60,
    61,
    62,
    64,
    65,
    66,
    67,
    69,
    70,
    71,
    73,
    74,
    76,
    77,
    79,
    81,
    82,
    84,
    86,
    88,
    90,
    92,
    94,
    96,
    98,
    100,
    102,
    104,
    106,
    109,
    111,
    113,
    116,
    118,
    120,
    123,
    125,
    128,
    130,
    132,
    135,
    137,
    139,
    142,
    144,
    146,
    149,
    151,
    153,
    155,
    157,
    159,
    161,
    163,
    165,
    167,
    169,
    171,
    173,
    174,
    176,
    178,
    179,
    181,
    182,
    184,
    185,
    186,
    188,
    189,
    190,
    192,
    193,
    194,
    195,
    196,
    197,
    198,
    199,
    200,
    201,
    202,
    203,
    204,
    204,
    205,
    206,
    207,
    208,
    208,
    209,
    210,
    210,
    211,
    212,
    212,
    213,
    213,
    214,
    215,
    215,
    38,
    39,
    39,
    40,
    40,
    41,
    42,
    42,
    43,
    44,
    44,
    45,
    46,
    46,
    47,
    48,
    49,
    49,
    50,
    51,
    52,
    53,
    54,
    55,
    56,
    57,
    58,
    59,
    60,
    61,
    62,
    64,
    65,
    66,
    67,
    69,
    70,
    72,
    73,
    75,
    76,
    78,
    80,
    81,
    83,
    85,
    87,
    89,
    91,
    93,
    95,
    97,
    99,
    101,
    104,
    106,
    108,
    110,
    113,
    115,
    118,
    120,
    123,
    125,
    128,
    130,
    132,
    135,
    137,
    140,
    142,
    145,
    147,
    149,
    151,
    154,
    156,
    158,
    160,
    162,
    164,
    166,
    168,
    170,
    172,
    174,
    175,
    177,
    179,
    180,
    182,
    183,
    185,
    186,
    188,
    189,
    190,
    192,
    193,
    194,
    195,
    196,
    197,
    198,
    199,
    200,
    201,
    202,
    203,
    204,
    205,
    206,
    206,
    207,
    208,
    209,
    209,
    210,
    211,
    211,
    212,
    213,
    213,
    214,
    215,
    215,
    216,
    216,
    37,
    38,
    38,
    39,
    39,
    40,
    41,
    41,
    42,
    42,
    43,
    44,
    44,
    45,
    46,
    47,
    47,
    48,
    49,
    50,
    51,
    52,
    53,
    54,
    54,
    55,
    57,
    58,
    59,
    60,
    61,
    62,
    64,
    65,
    66,
    68,
    69,
    70,
    72,
    73,
    75,
    77,
    78,
    80,
    82,
    84,
    86,
    88,
    90,
    92,
    94,
    96,
    98,
    101,
    103,
    105,
    108,
    110,
    112,
    115,
    117,
    120,
    122,
    125,
    128,
    130,
    133,
    135,
    138,
    140,
    143,
    145,
    147,
    150,
    152,
    154,
    157,
    159,
    161,
    163,
    165,
    167,
    169,
    171,
    173,
    175,
    177,
    178,
    180,
    182,
    183,
    185,
    186,
    187,
    189,
    190,
    192,
    193,
    194,
    195,
    196,
    197,
    198,
    200,
    201,
    201,
    202,
    203,
    204,
    205,
    206,
    207,
    208,
    208,
    209,
    210,
    211,
    211,
    212,
    213,
    213,
    214,
    214,
    215,
    216,
    216,
    217,
    217,
    36,
    37,
    37,
    38,
    38,
    39,
    39,
    40,
    41,
    41,
    42,
    43,
    43,
    44,
    45,
    45,
    46,
    47,
    48,
    49,
    50,
    50,
    51,
    52,
    53,
    54,
    55,
    56,
    57,
    59,
    60,
    61,
    62,
    64,
    65,
    66,
    68,
    69,
    71,
    72,
    74,
    75,
    77,
    79,
    81,
    83,
    85,
    87,
    89,
    91,
    93,
    95,
    97,
    100,
    102,
    104,
    107,
    109,
    112,
    114,
    117,
    120,
    122,
    125,
    128,
    130,
    133,
    135,
    138,
    141,
    143,
    146,
    148,
    151,
    153,
    155,
    158,
    160,
    162,
    164,
    166,
    168,
    170,
    172,
    174,
    176,
    178,
    180,
    181,
    183,
    184,
    186,
    187,
    189,
    190,
    192,
    193,
    194,
    195,
    196,
    198,
    199,
    200,
    201,
    202,
    203,
    204,
    205,
    205,
    206,
    207,
    208,
    209,
    210,
    210,
    211,
    212,
    212,
    213,
    214,
    214,
    215,
    216,
    216,
    217,
    217,
    218,
    218,
    35,
    36,
    36,
    37,
    37,
    38,
    38,
    39,
    40,
    40,
    41,
    41,
    42,
    43,
    44,
    44,
    45,
    46,
    47,
    47,
    48,
    49,
    50,
    51,
    52,
    53,
    54,
    55,
    56,
    57,
    58,
    60,
    61,
    62,
    64,
    65,
    66,
    68,
    69,
    71,
    73,
    74,
    76,
    78,
    80,
    81,
    83,
    85,
    88,
    90,
    92,
    94,
    96,
    99,
    101,
    104,
    106,
    109,
    111,
    114,
    117,
    119,
    122,
    125,
    128,
    130,
    133,
    136,
    138,
    141,
    144,
    146,
    149,
    151,
    154,
    156,
    159,
    161,
    163,
    165,
    167,
    170,
    172,
    174,
    175,
    177,
    179,
    181,
    182,
    184,
    186,
    187,
    189,
    190,
    192,
    193,
    194,
    195,
    197,
    198,
    199,
    200,
    201,
    202,
    203,
    204,
    205,
    206,
    207,
    208,
    208,
    209,
    210,
    211,
    211,
    212,
    213,
    214,
    214,
    215,
    215,
    216,
    217,
    217,
    218,
    218,
    219,
    219,
    34,
    35,
    35,
    36,
    36,
    37,
    37,
    38,
    38,
    39,
    40,
    40,
    41,
    42,
    42,
    43,
    44,
    45,
    45,
    46,
    47,
    48,
    49,
    50,
    51,
    52,
    53,
    54,
    55,
    56,
    57,
    58,
    59,
    61,
    62,
    64,
    65,
    66,
    68,
    70,
    71,
    73,
    75,
    76,
    78,
    80,
    82,
    84,
    86,
    89,
    91,
    93,
    96,
    98,
    100,
    103,
    106,
    108,
    111,
    114,
    116,
    119,
    122,
    125,
    128,
    130,
    133,
    136,
    139,
    141,
    144,
    147,
    149,
    152,
    155,
    157,
    159,
    162,
    164,
    166,
    169,
    171,
    173,
    175,
    177,
    179,
    180,
    182,
    184,
    185,
    187,
    189,
    190,
    192,
    193,
    194,
    196,
    197,
    198,
    199,
    200,
    201,
    202,
    203,
    204,
    205,
    206,
    207,
    208,
    209,
    210,
    210,
    211,
    212,
    213,
    213,
    214,
    215,
    215,
    216,
    217,
    217,
    218,
    218,
    219,
    219,
    220,
    220,
    33,
    34,
    34,
    35,
    35,
    36,
    36,
    37,
    37,
    38,
    38,
    39,
    40,
    40,
    41,
    42,
    43,
    43,
    44,
    45,
    46,
    47,
    47,
    48,
    49,
    50,
    51,
    52,
    53,
    54,
    56,
    57,
    58,
    59,
    61,
    62,
    64,
    65,
    67,
    68,
    70,
    71,
    73,
    75,
    77,
    79,
    81,
    83,
    85,
    87,
    90,
    92,
    95,
    97,
    100,
    102,
    105,
    108,
    110,
    113,
    116,
    119,
    122,
    125,
    128,
    130,
    133,
    136,
    139,
    142,
    145,
    147,
    150,
    153,
    155,
    158,
    160,
    163,
    165,
    168,
    170,
    172,
    174,
    176,
    178,
    180,
    182,
    184,
    185,
    187,
    188,
    190,
    192,
    193,
    194,
    196,
    197,
    198,
    199,
    201,
    202,
    203,
    204,
    205,
    206,
    207,
    208,
    208,
    209,
    210,
    211,
    212,
    212,
    213,
    214,
    215,
    215,
    216,
    217,
    217,
    218,
    218,
    219,
    219,
    220,
    220,
    221,
    221,
    32,
    32,
    33,
    33,
    34,
    34,
    35,
    36,
    36,
    37,
    37,
    38,
    39,
    39,
    40,
    41,
    41,
    42,
    43,
    44,
    44,
    45,
    46,
    47,
    48,
    49,
    50,
    51,
    52,
    53,
    54,
    55,
    57,
    58,
    59,
    61,
    62,
    64,
    65,
    67,
    68,
    70,
    72,
    74,
    76,
    78,
    80,
    82,
    84,
    86,
    89,
    91,
    93,
    96,
    99,
    101,
    104,
    107,
    110,
    113,
    116,
    118,
    121,
    124,
    128,
    131,
    134,
    137,
    139,
    142,
    145,
    148,
    151,
    154,
    156,
    159,
    162,
    164,
    166,
    169,
    171,
    173,
    175,
    177,
    179,
    181,
    183,
    185,
    187,
    188,
    190,
    192,
    193,
    194,
    196,
    197,
    198,
    200,
    201,
    202,
    203,
    204,
    205,
    206,
    207,
    208,
    209,
    210,
    211,
    211,
    212,
    213,
    214,
    214,
    215,
    216,
    216,
    217,
    218,
    218,
    219,
    219,
    220,
    221,
    221,
    222,
    222,
    223,
    31,
    31,
    32,
    32,
    33,
    33,
    34,
    34,
    35,
    35,
    36,
    37,
    37,
    38,
    39,
    39,
    40,
    41,
    41,
    42,
    43,
    44,
    45,
    46,
    46,
    47,
    48,
    49,
    50,
    52,
    53,
    54,
    55,
    56,
    58,
    59,
    60,
    62,
    64,
    65,
    67,
    68,
    70,
    72,
    74,
    76,
    78,
    80,
    83,
    85,
    87,
    90,
    92,
    95,
    98,
    100,
    103,
    106,
    109,
    112,
    115,
    118,
    121,
    124,
    128,
    131,
    134,
    137,
    140,
    143,
    146,
    149,
    152,
    155,
    157,
    160,
    163,
    165,
    168,
    170,
    172,
    175,
    177,
    179,
    181,
    183,
    185,
    187,
    188,
    190,
    192,
    193,
    195,
    196,
    197,
    199,
    200,
    201,
    202,
    203,
    205,
    206,
    207,
    208,
    209,
    209,
    210,
    211,
    212,
    213,
    214,
    214,
    215,
    216,
    216,
    217,
    218,
    218,
    219,
    220,
    220,
    221,
    221,
    222,
    222,
    223,
    223,
    224,
    30,
    30,
    31,
    31,
    32,
    32,
    33,
    33,
    34,
    34,
    35,
    35,
    36,
    37,
    37,
    38,
    39,
    39,
    40,
    41,
    42,
    42,
    43,
    44,
    45,
    46,
    47,
    48,
    49,
    50,
    51,
    52,
    54,
    55,
    56,
    57,
    59,
    60,
    62,
    64,
    65,
    67,
    69,
    71,
    73,
    75,
    77,
    79,
    81,
    83,
    86,
    88,
    91,
    94,
    96,
    99,
    102,
    105,
    108,
    111,
    115,
    118,
    121,
    124,
    128,
    131,
    134,
    137,
    140,
    144,
    147,
    150,
    153,
    156,
    159,
    161,
    164,
    167,
    169,
    172,
    174,
    176,
    178,
    180,
    182,
    184,
    186,
    188,
    190,
    192,
    193,
    195,
    196,
    198,
    199,
    200,
    201,
    203,
    204,
    205,
    206,
    207,
    208,
    209,
    210,
    211,
    212,
    213,
    213,
    214,
    215,
    216,
    216,
    217,
    218,
    218,
    219,
    220,
    220,
    221,
    221,
    222,
    222,
    223,
    223,
    224,
    224,
    225,
    29,
    29,
    30,
    30,
    31,
    31,
    31,
    32,
    32,
    33,
    34,
    34,
    35,
    35,
    36,
    37,
    37,
    38,
    39,
    39,
    40,
    41,
    42,
    43,
    44,
    44,
    45,
    46,
    47,
    48,
    50,
    51,
    52,
    53,
    54,
    56,
    57,
    59,
    60,
    62,
    64,
    65,
    67,
    69,
    71,
    73,
    75,
    77,
    80,
    82,
    84,
    87,
    90,
    92,
    95,
    98,
    101,
    104,
    108,
    111,
    114,
    117,
    121,
    124,
    128,
    131,
    134,
    138,
    141,
    144,
    147,
    151,
    154,
    157,
    160,
    163,
    165,
    168,
    171,
    173,
    175,
    178,
    180,
    182,
    184,
    186,
    188,
    190,
    192,
    193,
    195,
    196,
    198,
    199,
    201,
    202,
    203,
    204,
    205,
    207,
    208,
    209,
    210,
    211,
    211,
    212,
    213,
    214,
    215,
    216,
    216,
    217,
    218,
    218,
    219,
    220,
    220,
    221,
    221,
    222,
    223,
    223,
    224,
    224,
    224,
    225,
    225,
    226,
    28,
    28,
    28,
    29,
    29,
    30,
    30,
    31,
    31,
    32,
    32,
    33,
    33,
    34,
    35,
    35,
    36,
    37,
    37,
    38,
    39,
    40,
    40,
    41,
    42,
    43,
    44,
    45,
    46,
    47,
    48,
    49,
    50,
    52,
    53,
    54,
    56,
    57,
    59,
    60,
    62,
    64,
    65,
    67,
    69,
    71,
    73,
    76,
    78,
    80,
    83,
    86,
    88,
    91,
    94,
    97,
    100,
    103,
    107,
    110,
    113,
    117,
    120,
    124,
    128,
    131,
    135,
    138,
    142,
    145,
    148,
    152,
    155,
    158,
    161,
    164,
    167,
    169,
    172,
    175,
    177,
    179,
    182,
    184,
    186,
    188,
    190,
    192,
    193,
    195,
    196,
    198,
    199,
    201,
    202,
    203,
    205,
    206,
    207,
    208,
    209,
    210,
    211,
    212,
    213,
    214,
    215,
    215,
    216,
    217,
    218,
    218,
    219,
    220,
    220,
    221,
    222,
    222,
    223,
    223,
    224,
    224,
    225,
    225,
    226,
    226,
    227,
    227,
    26,
    27,
    27,
    28,
    28,
    29,
    29,
    30,
    30,
    31,
    31,
    32,
    32,
    33,
    33,
    34,
    35,
    35,
    36,
    37,
    37,
    38,
    39,
    40,
    40,
    41,
    42,
    43,
    44,
    45,
    46,
    47,
    49,
    50,
    51,
    52,
    54,
    55,
    57,
    58,
    60,
    62,
    64,
    65,
    67,
    69,
    72,
    74,
    76,
    79,
    81,
    84,
    87,
    90,
    93,
    96,
    99,
    102,
    106,
    109,
    113,
    116,
    120,
    124,
    128,
    131,
    135,
    139,
    142,
    146,
    149,
    153,
    156,
    159,
    162,
    165,
    168,
    171,
    174,
    176,
    179,
    181,
    183,
    186,
    188,
    190,
    192,
    193,
    195,
    197,
    198,
    200,
    201,
    203,
    204,
    205,
    206,
    208,
    209,
    210,
    211,
    212,
    213,
    214,
    215,
    215,
    216,
    217,
    218,
    218,
    219,
    220,
    220,
    221,
    222,
    222,
    223,
    223,
    224,
    224,
    225,
    225,
    226,
    226,
    227,
    227,
    228,
    228,
    25,
    26,
    26,
    27,
    27,
    27,
    28,
    28,
    29,
    29,
    30,
    30,
    31,
    31,
    32,
    32,
    33,
    34,
    34,
    35,
    36,
    37,
    37,
    38,
    39,
    40,
    41,
    42,
    43,
    44,
    45,
    46,
    47,
    48,
    49,
    51,
    52,
    53,
    55,
    56,
    58,
    60,
    62,
    64,
    65,
    68,
    70,
    72,
    74,
    77,
    80,
    82,
    85,
    88,
    91,
    95,
    98,
    101,
    105,
    108,
    112,
    116,
    120,
    124,
    128,
    131,
    135,
    139,
    143,
    147,
    150,
    154,
    157,
    160,
    164,
    167,
    170,
    173,
    175,
    178,
    181,
    183,
    185,
    187,
    190,
    192,
    193,
    195,
    197,
    199,
    200,
    202,
    203,
    204,
    206,
    207,
    208,
    209,
    210,
    211,
    212,
    213,
    214,
    215,
    216,
    217,
    218,
    218,
    219,
    220,
    221,
    221,
    222,
    223,
    223,
    224,
    224,
    225,
    225,
    226,
    226,
    227,
    227,
    228,
    228,
    228,
    229,
    229,
    24,
    25,
    25,
    25,
    26,
    26,
    27,
    27,
    27,
    28,
    28,
    29,
    29,
    30,
    31,
    31,
    32,
    32,
    33,
    34,
    34,
    35,
    36,
    36,
    37,
    38,
    39,
    40,
    41,
    42,
    43,
    44,
    45,
    46,
    47,
    49,
    50,
    51,
    53,
    54,
    56,
    58,
    60,
    62,
    64,
    66,
    68,
    70,
    73,
    75,
    78,
    81,
    83,
    87,
    90,
    93,
    96,
    100,
    104,
    108,
    111,
    115,
    119,
    123,
    128,
    132,
    136,
    140,
    144,
    147,
    151,
    155,
    159,
    162,
    165,
    168,
    172,
    174,
    177,
    180,
    182,
    185,
    187,
    189,
    192,
    193,
    195,
    197,
    199,
    201,
    202,
    204,
    205,
    206,
    208,
    209,
    210,
    211,
    212,
    213,
    214,
    215,
    216,
    217,
    218,
    219,
    219,
    220,
    221,
    221,
    222,
    223,
    223,
    224,
    224,
    225,
    226,
    226,
    227,
    227,
    228,
    228,
    228,
    229,
    229,
    230,
    230,
    230,
    23,
    23,
    24,
    24,
    24,
    25,
    25,
    26,
    26,
    27,
    27,
    28,
    28,
    29,
    29,
    30,
    30,
    31,
    31,
    32,
    33,
    33,
    34,
    35,
    36,
    36,
    37,
    38,
    39,
    40,
    41,
    42,
    43,
    44,
    46,
    47,
    48,
    49,
    51,
    52,
    54,
    56,
    58,
    59,
    61,
    64,
    66,
    68,
    70,
    73,
    76,
    79,
    82,
    85,
    88,
    91,
    95,
    99,
    103,
    107,
    111,
    115,
    119,
    123,
    128,
    132,
    136,
    140,
    144,
    148,
    152,
    156,
    160,
    164,
    167,
    170,
    173,
    176,
    179,
    182,
    185,
    187,
    189,
    192,
    194,
    196,
    197,
    199,
    201,
    203,
    204,
    206,
    207,
    208,
    209,
    211,
    212,
    213,
    214,
    215,
    216,
    217,
    218,
    219,
    219,
    220,
    221,
    222,
    222,
    223,
    224,
    224,
    225,
    225,
    226,
    226,
    227,
    227,
    228,
    228,
    229,
    229,
    230,
    230,
    231,
    231,
    231,
    232,
    22,
    22,
    23,
    23,
    23,
    24,
    24,
    24,
    25,
    25,
    26,
    26,
    27,
    27,
    28,
    28,
    29,
    29,
    30,
    31,
    31,
    32,
    32,
    33,
    34,
    35,
    36,
    36,
    37,
    38,
    39,
    40,
    41,
    42,
    44,
    45,
    46,
    47,
    49,
    50,
    52,
    54,
    55,
    57,
    59,
    61,
    64,
    66,
    68,
    71,
    74,
    77,
    80,
    83,
    86,
    90,
    93,
    97,
    101,
    105,
    110,
    114,
    118,
    123,
    128,
    132,
    137,
    141,
    145,
    150,
    154,
    158,
    162,
    165,
    169,
    172,
    175,
    178,
    181,
    184,
    187,
    189,
    192,
    194,
    196,
    198,
    200,
    201,
    203,
    205,
    206,
    208,
    209,
    210,
    211,
    213,
    214,
    215,
    216,
    217,
    218,
    219,
    219,
    220,
    221,
    222,
    223,
    223,
    224,
    224,
    225,
    226,
    226,
    227,
    227,
    228,
    228,
    229,
    229,
    230,
    230,
    231,
    231,
    231,
    232,
    232,
    232,
    233,
    21,
    21,
    21,
    22,
    22,
    22,
    23,
    23,
    24,
    24,
    24,
    25,
    25,
    26,
    26,
    27,
    27,
    28,
    28,
    29,
    30,
    30,
    31,
    32,
    32,
    33,
    34,
    35,
    35,
    36,
    37,
    38,
    39,
    40,
    42,
    43,
    44,
    45,
    47,
    48,
    50,
    51,
    53,
    55,
    57,
    59,
    61,
    64,
    66,
    69,
    71,
    74,
    77,
    81,
    84,
    88,
    92,
    96,
    100,
    104,
    109,
    113,
    118,
    123,
    128,
    132,
    137,
    142,
    146,
    151,
    155,
    159,
    163,
    167,
    171,
    174,
    178,
    181,
    184,
    186,
    189,
    192,
    194,
    196,
    198,
    200,
    202,
    204,
    205,
    207,
    208,
    210,
    211,
    212,
    213,
    215,
    216,
    217,
    218,
    219,
    220,
    220,
    221,
    222,
    223,
    223,
    224,
    225,
    225,
    226,
    227,
    227,
    228,
    228,
    229,
    229,
    230,
    230,
    231,
    231,
    231,
    232,
    232,
    233,
    233,
    233,
    234,
    234,
    19,
    20,
    20,
    20,
    21,
    21,
    21,
    22,
    22,
    23,
    23,
    23,
    24,
    24,
    25,
    25,
    26,
    26,
    27,
    27,
    28,
    29,
    29,
    30,
    31,
    31,
    32,
    33,
    34,
    34,
    35,
    36,
    37,
    38,
    39,
    41,
    42,
    43,
    44,
    46,
    47,
    49,
    51,
    53,
    54,
    57,
    59,
    61,
    64,
    66,
    69,
    72,
    75,
    78,
    82,
    86,
    90,
    94,
    98,
    103,
    108,
    112,
    117,
    122,
    128,
    133,
    138,
    143,
    147,
    152,
    157,
    161,
    165,
    169,
    173,
    177,
    180,
    183,
    186,
    189,
    192,
    194,
    196,
    198,
    201,
    202,
    204,
    206,
    208,
    209,
    211,
    212,
    213,
    214,
    216,
    217,
    218,
    219,
    220,
    221,
    221,
    222,
    223,
    224,
    224,
    225,
    226,
    226,
    227,
    228,
    228,
    229,
    229,
    230,
    230,
    231,
    231,
    232,
    232,
    232,
    233,
    233,
    234,
    234,
    234,
    235,
    235,
    235,
    18,
    19,
    19,
    19,
    19,
    20,
    20,
    20,
    21,
    21,
    22,
    22,
    22,
    23,
    23,
    24,
    24,
    25,
    25,
    26,
    26,
    27,
    27,
    28,
    29,
    29,
    30,
    31,
    32,
    32,
    33,
    34,
    35,
    36,
    37,
    38,
    40,
    41,
    42,
    44,
    45,
    47,
    48,
    50,
    52,
    54,
    56,
    58,
    61,
    64,
    66,
    69,
    73,
    76,
    80,
    83,
    88,
    92,
    96,
    101,
    106,
    111,
    117,
    122,
    128,
    133,
    138,
    144,
    149,
    154,
    159,
    163,
    167,
    172,
    175,
    179,
    182,
    186,
    189,
    192,
    194,
    197,
    199,
    201,
    203,
    205,
    207,
    208,
    210,
    211,
    213,
    214,
    215,
    217,
    218,
    219,
    220,
    221,
    222,
    223,
    223,
    224,
    225,
    226,
    226,
    227,
    228,
    228,
    229,
    229,
    230,
    230,
    231,
    231,
    232,
    232,
    233,
    233,
    233,
    234,
    234,
    235,
    235,
    235,
    236,
    236,
    236,
    236,
    17,
    17,
    18,
    18,
    18,
    18,
    19,
    19,
    19,
    20,
    20,
    21,
    21,
    21,
    22,
    22,
    23,
    23,
    24,
    24,
    25,
    25,
    26,
    26,
    27,
    28,
    28,
    29,
    30,
    31,
    31,
    32,
    33,
    34,
    35,
    36,
    37,
    38,
    40,
    41,
    43,
    44,
    46,
    47,
    49,
    51,
    53,
    56,
    58,
    61,
    64,
    67,
    70,
    73,
    77,
    81,
    85,
    90,
    95,
    100,
    105,
    110,
    116,
    122,
    128,
    133,
    139,
    145,
    150,
    155,
    160,
    165,
    170,
    174,
    178,
    182,
    185,
    188,
    192,
    194,
    197,
    199,
    202,
    204,
    206,
    208,
    209,
    211,
    212,
    214,
    215,
    217,
    218,
    219,
    220,
    221,
    222,
    223,
    224,
    224,
    225,
    226,
    227,
    227,
    228,
    229,
    229,
    230,
    230,
    231,
    231,
    232,
    232,
    233,
    233,
    234,
    234,
    234,
    235,
    235,
    236,
    236,
    236,
    237,
    237,
    237,
    237,
    238,
    16,
    16,
    16,
    17,
    17,
    17,
    17,
    18,
    18,
    18,
    19,
    19,
    19,
    20,
    20,
    21,
    21,
    21,
    22,
    22,
    23,
    23,
    24,
    25,
    25,
    26,
    26,
    27,
    28,
    28,
    29,
    30,
    31,
    32,
    33,
    34,
    35,
    36,
    37,
    39,
    40,
    41,
    43,
    45,
    46,
    48,
    50,
    53,
    55,
    58,
    60,
    64,
    67,
    70,
    74,
    78,
    83,
    87,
    92,
    98,
    103,
    109,
    115,
    121,
    128,
    134,
    140,
    146,
    152,
    157,
    163,
    168,
    172,
    177,
    181,
    185,
    188,
    192,
    195,
    197,
    200,
    202,
    205,
    207,
    209,
    210,
    212,
    214,
    215,
    216,
    218,
    219,
    220,
    221,
    222,
    223,
    224,
    225,
    226,
    227,
    227,
    228,
    229,
    229,
    230,
    230,
    231,
    232,
    232,
    233,
    233,
    234,
    234,
    234,
    235,
    235,
    236,
    236,
    236,
    237,
    237,
    237,
    238,
    238,
    238,
    238,
    239,
    239,
    15,
    15,
    15,
    15,
    16,
    16,
    16,
    16,
    17,
    17,
    17,
    18,
    18,
    18,
    19,
    19,
    19,
    20,
    20,
    21,
    21,
    22,
    22,
    23,
    23,
    24,
    24,
    25,
    26,
    26,
    27,
    28,
    29,
    30,
    31,
    31,
    32,
    34,
    35,
    36,
    37,
    39,
    40,
    42,
    44,
    45,
    47,
    50,
    52,
    54,
    57,
    60,
    64,
    67,
    71,
    75,
    80,
    84,
    90,
    95,
    101,
    108,
    114,
    121,
    128,
    134,
    141,
    147,
    154,
    160,
    165,
    171,
    175,
    180,
    184,
    188,
    192,
    195,
    198,
    201,
    203,
    205,
    208,
    210,
    211,
    213,
    215,
    216,
    218,
    219,
    220,
    221,
    223,
    224,
    224,
    225,
    226,
    227,
    228,
    229,
    229,
    230,
    231,
    231,
    232,
    232,
    233,
    233,
    234,
    234,
    235,
    235,
    236,
    236,
    236,
    237,
    237,
    237,
    238,
    238,
    238,
    239,
    239,
    239,
    239,
    240,
    240,
    240,
    13,
    14,
    14,
    14,
    14,
    15,
    15,
    15,
    15,
    16,
    16,
    16,
    16,
    17,
    17,
    17,
    18,
    18,
    19,
    19,
    19,
    20,
    20,
    21,
    21,
    22,
    22,
    23,
    24,
    24,
    25,
    26,
    26,
    27,
    28,
    29,
    30,
    31,
    32,
    33,
    35,
    36,
    37,
    39,
    40,
    42,
    44,
    46,
    49,
    51,
    54,
    57,
    60,
    64,
    67,
    72,
    76,
    81,
    87,
    93,
    99,
    106,
    113,
    120,
    128,
    135,
    142,
    149,
    156,
    162,
    168,
    174,
    179,
    183,
    188,
    192,
    195,
    198,
    201,
    204,
    206,
    209,
    211,
    213,
    215,
    216,
    218,
    219,
    220,
    222,
    223,
    224,
    225,
    226,
    227,
    228,
    229,
    229,
    230,
    231,
    231,
    232,
    233,
    233,
    234,
    234,
    235,
    235,
    236,
    236,
    236,
    237,
    237,
    238,
    238,
    238,
    239,
    239,
    239,
    239,
    240,
    240,
    240,
    240,
    241,
    241,
    241,
    241,
    12,
    12,
    13,
    13,
    13,
    13,
    13,
    14,
    14,
    14,
    14,
    15,
    15,
    15,
    16,
    16,
    16,
    17,
    17,
    17,
    18,
    18,
    19,
    19,
    19,
    20,
    20,
    21,
    22,
    22,
    23,
    23,
    24,
    25,
    26,
    27,
    27,
    28,
    29,
    31,
    32,
    33,
    34,
    36,
    37,
    39,
    41,
    43,
    45,
    47,
    50,
    53,
    56,
    60,
    64,
    68,
    73,
    78,
    83,
    90,
    96,
    104,
    111,
    119,
    128,
    136,
    144,
    151,
    159,
    165,
    172,
    177,
    182,
    187,
    192,
    195,
    199,
    202,
    205,
    208,
    210,
    212,
    214,
    216,
    218,
    219,
    221,
    222,
    223,
    224,
    226,
    227,
    228,
    228,
    229,
    230,
    231,
    232,
    232,
    233,
    233,
    234,
    235,
    235,
    236,
    236,
    236,
    237,
    237,
    238,
    238,
    238,
    239,
    239,
    239,
    240,
    240,
    240,
    241,
    241,
    241,
    241,
    242,
    242,
    242,
    242,
    242,
    243,
    11,
    11,
    11,
    11,
    12,
    12,
    12,
    12,
    12,
    13,
    13,
    13,
    13,
    14,
    14,
    14,
    15,
    15,
    15,
    16,
    16,
    16,
    17,
    17,
    18,
    18,
    18,
    19,
    19,
    20,
    21,
    21,
    22,
    23,
    23,
    24,
    25,
    26,
    27,
    28,
    29,
    30,
    31,
    32,
    34,
    36,
    37,
    39,
    41,
    44,
    46,
    49,
    52,
    55,
    59,
    64,
    68,
    74,
    80,
    86,
    93,
    101,
    110,
    118,
    128,
    137,
    145,
    154,
    162,
    169,
    175,
    181,
    187,
    192,
    196,
    200,
    203,
    206,
    209,
    211,
    214,
    216,
    218,
    219,
    221,
    223,
    224,
    225,
    226,
    227,
    228,
    229,
    230,
    231,
    232,
    232,
    233,
    234,
    234,
    235,
    236,
    236,
    237,
    237,
    237,
    238,
    238,
    239,
    239,
    239,
    240,
    240,
    240,
    241,
    241,
    241,
    242,
    242,
    242,
    242,
    243,
    243,
    243,
    243,
    243,
    244,
    244,
    244,
    10,
    10,
    10,
    10,
    10,
    10,
    11,
    11,
    11,
    11,
    11,
    12,
    12,
    12,
    12,
    13,
    13,
    13,
    14,
    14,
    14,
    14,
    15,
    15,
    16,
    16,
    16,
    17,
    17,
    18,
    18,
    19,
    19,
    20,
    21,
    21,
    22,
    23,
    24,
    25,
    26,
    27,
    28,
    29,
    31,
    32,
    34,
    35,
    37,
    39,
    42,
    44,
    47,
    51,
    54,
    59,
    64,
    69,
    75,
    82,
    90,
    98,
    108,
    117,
    128,
    138,
    147,
    157,
    165,
    173,
    180,
    186,
    192,
    196,
    201,
    204,
    208,
    211,
    213,
    216,
    218,
    220,
    221,
    223,
    224,
    226,
    227,
    228,
    229,
    230,
    231,
    232,
    233,
    234,
    234,
    235,
    236,
    236,
    237,
    237,
    238,
    238,
    239,
    239,
    239,
    240,
    240,
    241,
    241,
    241,
    241,
    242,
    242,
    242,
    243,
    243,
    243,
    243,
    244,
    244,
    244,
    244,
    244,
    245,
    245,
    245,
    245,
    245,
    8,
    9,
    9,
    9,
    9,
    9,
    9,
    9,
    10,
    10,
    10,
    10,
    10,
    11,
    11,
    11,
    11,
    12,
    12,
    12,
    12,
    13,
    13,
    13,
    14,
    14,
    14,
    15,
    15,
    16,
    16,
    17,
    17,
    18,
    18,
    19,
    19,
    20,
    21,
    22,
    23,
    24,
    25,
    26,
    27,
    28,
    30,
    31,
    33,
    35,
    37,
    40,
    43,
    46,
    49,
    53,
    58,
    64,
    70,
    77,
    85,
    95,
    105,
    116,
    128,
    139,
    150,
    160,
    170,
    178,
    185,
    192,
    197,
    202,
    206,
    209,
    212,
    215,
    218,
    220,
    222,
    224,
    225,
    227,
    228,
    229,
    230,
    231,
    232,
    233,
    234,
    235,
    236,
    236,
    237,
    237,
    238,
    238,
    239,
    239,
    240,
    240,
    241,
    241,
    241,
    242,
    242,
    242,
    243,
    243,
    243,
    243,
    244,
    244,
    244,
    244,
    245,
    245,
    245,
    245,
    245,
    246,
    246,
    246,
    246,
    246,
    246,
    246,
    7,
    7,
    7,
    7,
    8,
    8,
    8,
    8,
    8,
    8,
    9,
    9,
    9,
    9,
    9,
    9,
    10,
    10,
    10,
    10,
    11,
    11,
    11,
    11,
    12,
    12,
    12,
    13,
    13,
    13,
    14,
    14,
    15,
    15,
    16,
    16,
    17,
    17,
    18,
    19,
    19,
    20,
    21,
    22,
    23,
    24,
    26,
    27,
    29,
    31,
    32,
    35,
    37,
    40,
    44,
    47,
    52,
    57,
    64,
    71,
    80,
    90,
    101,
    114,
    128,
    141,
    154,
    165,
    175,
    184,
    192,
    198,
    203,
    208,
    211,
    215,
    218,
    220,
    223,
    224,
    226,
    228,
    229,
    231,
    232,
    233,
    234,
    235,
    236,
    236,
    237,
    238,
    238,
    239,
    239,
    240,
    240,
    241,
    241,
    242,
    242,
    242,
    243,
    243,
    243,
    244,
    244,
    244,
    244,
    245,
    245,
    245,
    245,
    246,
    246,
    246,
    246,
    246,
    246,
    247,
    247,
    247,
    247,
    247,
    247,
    248,
    248,
    248,
    6,
    6,
    6,
    6,
    6,
    6,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    7,
    8,
    8,
    8,
    8,
    8,
    9,
    9,
    9,
    9,
    9,
    10,
    10,
    10,
    10,
    11,
    11,
    11,
    12,
    12,
    13,
    13,
    13,
    14,
    14,
    15,
    16,
    16,
    17,
    18,
    19,
    19,
    20,
    22,
    23,
    24,
    26,
    27,
    29,
    32,
    34,
    37,
    41,
    45,
    50,
    56,
    64,
    73,
    83,
    96,
    111,
    128,
    144,
    159,
    172,
    182,
    192,
    199,
    205,
    210,
    214,
    218,
    221,
    223,
    226,
    228,
    229,
    231,
    232,
    233,
    235,
    236,
    236,
    237,
    238,
    239,
    239,
    240,
    241,
    241,
    242,
    242,
    242,
    243,
    243,
    244,
    244,
    244,
    245,
    245,
    245,
    245,
    246,
    246,
    246,
    246,
    246,
    247,
    247,
    247,
    247,
    247,
    248,
    248,
    248,
    248,
    248,
    248,
    248,
    248,
    249,
    249,
    249,
    249,
    249,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    6,
    6,
    6,
    6,
    6,
    6,
    6,
    6,
    7,
    7,
    7,
    7,
    7,
    7,
    8,
    8,
    8,
    8,
    9,
    9,
    9,
    9,
    10,
    10,
    10,
    11,
    11,
    11,
    12,
    12,
    13,
    14,
    14,
    15,
    16,
    16,
    17,
    18,
    19,
    21,
    22,
    24,
    26,
    28,
    31,
    34,
    37,
    42,
    47,
    54,
    64,
    75,
    90,
    108,
    128,
    147,
    165,
    180,
    192,
    201,
    208,
    213,
    218,
    221,
    224,
    227,
    229,
    231,
    233,
    234,
    236,
    237,
    238,
    239,
    239,
    240,
    241,
    241,
    242,
    243,
    243,
    244,
    244,
    244,
    245,
    245,
    245,
    246,
    246,
    246,
    246,
    247,
    247,
    247,
    247,
    248,
    248,
    248,
    248,
    248,
    248,
    249,
    249,
    249,
    249,
    249,
    249,
    249,
    249,
    250,
    250,
    250,
    250,
    250,
    250,
    250,
    250,
    250,
    3,
    3,
    3,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    5,
    6,
    6,
    6,
    6,
    6,
    6,
    7,
    7,
    7,
    7,
    8,
    8,
    8,
    9,
    9,
    9,
    10,
    10,
    11,
    11,
    12,
    12,
    13,
    14,
    15,
    16,
    17,
    18,
    19,
    21,
    23,
    26,
    29,
    32,
    37,
    44,
    52,
    64,
    80,
    101,
    128,
    154,
    175,
    192,
    203,
    211,
    218,
    223,
    226,
    229,
    232,
    234,
    236,
    237,
    238,
    239,
    240,
    241,
    242,
    243,
    243,
    244,
    244,
    245,
    245,
    246,
    246,
    246,
    247,
    247,
    247,
    248,
    248,
    248,
    248,
    249,
    249,
    249,
    249,
    249,
    249,
    250,
    250,
    250,
    250,
    250,
    250,
    250,
    250,
    251,
    251,
    251,
    251,
    251,
    251,
    251,
    251,
    251,
    251,
    251,
    251,
    251,
    252,
    252,
    2,
    2,
    2,
    2,
    2,
    2,
    2,
    2,
    2,
    2,
    3,
    3,
    3,
    3,
    3,
    3,
    3,
    3,
    3,
    3,
    3,
    3,
    3,
    3,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    4,
    5,
    5,
    5,
    5,
    5,
    6,
    6,
    6,
    6,
    7,
    7,
    7,
    8,
    8,
    9,
    9,
    10,
    10,
    11,
    12,
    13,
    14,
    16,
    17,
    19,
    22,
    26,
    31,
    37,
    47,
    64,
    90,
    128,
    165,
    192,
    208,
    218,
    224,
    229,
    233,
    236,
    238,
    239,
    241,
    242,
    243,
    244,
    245,
    245,
    246,
    246,
    247,
    247,
    248,
    248,
    248,
    249,
    249,
    249,
    249,
    250,
    250,
    250,
    250,
    250,
    251,
    251,
    251,
    251,
    251,
    251,
    251,
    251,
    252,
    252,
    252,
    252,
    252,
    252,
    252,
    252,
    252,
    252,
    252,
    252,
    252,
    252,
    253,
    253,
    253,
    253,
    253,
    253,
    253,
    253,
    253,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    1,
    2,
    2,
    2,
    2,
    2,
    2,
    2,
    2,
    2,
    2,
    2,
    2,
    2,
    3,
    3,
    3,
    3,
    3,
    3,
    3,
    4,
    4,
    4,
    4,
    5,
    5,
    5,
    6,
    6,
    7,
    8,
    9,
    10,
    11,
    13,
    16,
    19,
    26,
    37,
    64,
    128,
    192,
    218,
    229,
    236,
    239,
    242,
    244,
    245,
    246,
    247,
    248,
    249,
    249,
    250,
    250,
    250,
    251,
    251,
    251,
    251,
    252,
    252,
    252,
    252,
    252,
    252,
    252,
    253,
    253,
    253,
    253,
    253,
    253,
    253,
    253,
    253,
    253,
    253,
    253,
    253,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    254,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    512,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    256,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    510,
    509,
    509,
    509,
    509,
    509,
    509,
    509,
    509,
    509,
    509,
    509,
    509,
    509,
    508,
    508,
    508,
    508,
    508,
    508,
    508,
    507,
    507,
    507,
    507,
    506,
    506,
    506,
    505,
    505,
    504,
    503,
    502,
    501,
    500,
    498,
    495,
    492,
    485,
    474,
    448,
    384,
    320,
    293,
    282,
    275,
    272,
    269,
    267,
    266,
    265,
    264,
    263,
    262,
    262,
    261,
    261,
    261,
    260,
    260,
    260,
    260,
    259,
    259,
    259,
    259,
    259,
    259,
    259,
    258,
    258,
    258,
    258,
    258,
    258,
    258,
    258,
    258,
    258,
    258,
    258,
    258,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    257,
    509,
    509,
    509,
    509,
    509,
    509,
    509,
    509,
    509,
    509,
    508,
    508,
    508,
    508,
    508,
    508,
    508,
    508,
    508,
    508,
    508,
    508,
    508,
    508,
    507,
    507,
    507,
    507,
    507,
    507,
    507,
    507,
    506,
    506,
    506,
    506,
    506,
    505,
    505,
    505,
    505,
    504,
    504,
    504,
    503,
    503,
    502,
    502,
    501,
    501,
    500,
    499,
    498,
    497,
    495,
    494,
    492,
    489,
    485,
    480,
    474,
    464,
    448,
    421,
    384,
    346,
    320,
    303,
    293,
    287,
    282,
    278,
    275,
    273,
    272,
    270,
    269,
    268,
    267,
    266,
    266,
    265,
    265,
    264,
    264,
    263,
    263,
    263,
    262,
    262,
    262,
    262,
    261,
    261,
    261,
    261,
    261,
    260,
    260,
    260,
    260,
    260,
    260,
    260,
    260,
    259,
    259,
    259,
    259,
    259,
    259,
    259,
    259,
    259,
    259,
    259,
    259,
    259,
    259,
    258,
    258,
    258,
    258,
    258,
    258,
    258,
    258,
    258,
    508,
    508,
    508,
    507,
    507,
    507,
    507,
    507,
    507,
    507,
    507,
    507,
    507,
    507,
    507,
    507,
    506,
    506,
    506,
    506,
    506,
    506,
    506,
    506,
    505,
    505,
    505,
    505,
    505,
    505,
    504,
    504,
    504,
    504,
    503,
    503,
    503,
    502,
    502,
    502,
    501,
    501,
    500,
    500,
    499,
    499,
    498,
    497,
    496,
    495,
    494,
    493,
    492,
    490,
    488,
    485,
    482,
    479,
    474,
    467,
    459,
    448,
    431,
    410,
    384,
    357,
    336,
    320,
    308,
    300,
    293,
    288,
    285,
    282,
    279,
    277,
    275,
    274,
    273,
    272,
    271,
    270,
    269,
    268,
    268,
    267,
    267,
    266,
    266,
    265,
    265,
    265,
    264,
    264,
    264,
    263,
    263,
    263,
    263,
    262,
    262,
    262,
    262,
    262,
    262,
    261,
    261,
    261,
    261,
    261,
    261,
    261,
    261,
    260,
    260,
    260,
    260,
    260,
    260,
    260,
    260,
    260,
    260,
    260,
    260,
    260,
    259,
    259,
    506,
    506,
    506,
    506,
    506,
    506,
    506,
    506,
    506,
    506,
    505,
    505,
    505,
    505,
    505,
    505,
    505,
    505,
    504,
    504,
    504,
    504,
    504,
    504,
    503,
    503,
    503,
    503,
    502,
    502,
    502,
    502,
    501,
    501,
    501,
    500,
    500,
    500,
    499,
    499,
    498,
    497,
    497,
    496,
    495,
    495,
    494,
    493,
    492,
    490,
    489,
    487,
    485,
    483,
    480,
    477,
    474,
    469,
    464,
    457,
    448,
    436,
    421,
    403,
    384,
    364,
    346,
    331,
    320,
    310,
    303,
    298,
    293,
    290,
    287,
    284,
    282,
    280,
    278,
    277,
    275,
    274,
    273,
    272,
    272,
    271,
    270,
    270,
    269,
    268,
    268,
    267,
    267,
    267,
    266,
    266,
    266,
    265,
    265,
    265,
    265,
    264,
    264,
    264,
    264,
    263,
    263,
    263,
    263,
    263,
    263,
    262,
    262,
    262,
    262,
    262,
    262,
    262,
    262,
    261,
    261,
    261,
    261,
    261,
    261,
    261,
    261,
    261,
    505,
    505,
    505,
    505,
    505,
    505,
    504,
    504,
    504,
    504,
    504,
    504,
    504,
    504,
    503,
    503,
    503,
    503,
    503,
    502,
    502,
    502,
    502,
    502,
    501,
    501,
    501,
    501,
    500,
    500,
    500,
    499,
    499,
    498,
    498,
    498,
    497,
    497,
    496,
    495,
    495,
    494,
    493,
    492,
    492,
    491,
    489,
    488,
    487,
    485,
    484,
    482,
    479,
    477,
    474,
    470,
    466,
    461,
    455,
    448,
    438,
    428,
    415,
    400,
    384,
    367,
    352,
    339,
    329,
    320,
    312,
    306,
    301,
    297,
    293,
    290,
    288,
    285,
    283,
    282,
    280,
    279,
    278,
    276,
    275,
    275,
    274,
    273,
    272,
    272,
    271,
    270,
    270,
    269,
    269,
    269,
    268,
    268,
    267,
    267,
    267,
    266,
    266,
    266,
    266,
    265,
    265,
    265,
    265,
    265,
    264,
    264,
    264,
    264,
    264,
    263,
    263,
    263,
    263,
    263,
    263,
    263,
    263,
    262,
    262,
    262,
    262,
    262,
    504,
    504,
    504,
    504,
    503,
    503,
    503,
    503,
    503,
    503,
    502,
    502,
    502,
    502,
    502,
    502,
    501,
    501,
    501,
    501,
    500,
    500,
    500,
    500,
    499,
    499,
    499,
    498,
    498,
    498,
    497,
    497,
    496,
    496,
    495,
    495,
    494,
    494,
    493,
    492,
    492,
    491,
    490,
    489,
    488,
    487,
    485,
    484,
    482,
    480,
    479,
    476,
    474,
    471,
    467,
    464,
    459,
    454,
    448,
    440,
    431,
    421,
    410,
    397,
    384,
    370,
    357,
    346,
    336,
    327,
    320,
    313,
    308,
    303,
    300,
    296,
    293,
    291,
    288,
    287,
    285,
    283,
    282,
    280,
    279,
    278,
    277,
    276,
    275,
    275,
    274,
    273,
    273,
    272,
    272,
    271,
    271,
    270,
    270,
    269,
    269,
    269,
    268,
    268,
    268,
    267,
    267,
    267,
    267,
    266,
    266,
    266,
    266,
    265,
    265,
    265,
    265,
    265,
    265,
    264,
    264,
    264,
    264,
    264,
    264,
    263,
    263,
    263,
    503,
    502,
    502,
    502,
    502,
    502,
    502,
    502,
    501,
    501,
    501,
    501,
    501,
    500,
    500,
    500,
    500,
    499,
    499,
    499,
    499,
    498,
    498,
    498,
    497,
    497,
    497,
    496,
    496,
    495,
    495,
    494,
    494,
    493,
    493,
    492,
    492,
    491,
    490,
    489,
    488,
    487,
    486,
    485,
    484,
    483,
    481,
    480,
    478,
    476,
    474,
    471,
    468,
    465,
    462,
    458,
    453,
    448,
    441,
    434,
    426,
    416,
    406,
    395,
    384,
    372,
    361,
    351,
    341,
    333,
    326,
    320,
    314,
    309,
    305,
    302,
    299,
    296,
    293,
    291,
    289,
    287,
    286,
    284,
    283,
    282,
    281,
    280,
    279,
    278,
    277,
    276,
    275,
    275,
    274,
    274,
    273,
    273,
    272,
    272,
    271,
    271,
    270,
    270,
    270,
    269,
    269,
    269,
    268,
    268,
    268,
    268,
    267,
    267,
    267,
    267,
    266,
    266,
    266,
    266,
    266,
    265,
    265,
    265,
    265,
    265,
    265,
    265,
    501,
    501,
    501,
    501,
    501,
    501,
    500,
    500,
    500,
    500,
    500,
    499,
    499,
    499,
    499,
    498,
    498,
    498,
    497,
    497,
    497,
    497,
    496,
    496,
    495,
    495,
    495,
    494,
    494,
    493,
    493,
    492,
    492,
    491,
    490,
    490,
    489,
    488,
    487,
    486,
    485,
    484,
    483,
    482,
    480,
    479,
    477,
    476,
    474,
    472,
    469,
    467,
    464,
    460,
    457,
    452,
    448,
    442,
    436,
    429,
    421,
    413,
    403,
    394,
    384,
    373,
    364,
    354,
    346,
    338,
    331,
    325,
    320,
    315,
    310,
    307,
    303,
    300,
    298,
    295,
    293,
    291,
    290,
    288,
    287,
    285,
    284,
    283,
    282,
    281,
    280,
    279,
    278,
    277,
    277,
    276,
    275,
    275,
    274,
    274,
    273,
    273,
    272,
    272,
    272,
    271,
    271,
    270,
    270,
    270,
    270,
    269,
    269,
    269,
    268,
    268,
    268,
    268,
    267,
    267,
    267,
    267,
    267,
    266,
    266,
    266,
    266,
    266,
    500,
    500,
    500,
    500,
    499,
    499,
    499,
    499,
    499,
    498,
    498,
    498,
    498,
    497,
    497,
    497,
    496,
    496,
    496,
    495,
    495,
    495,
    494,
    494,
    493,
    493,
    493,
    492,
    492,
    491,
    490,
    490,
    489,
    488,
    488,
    487,
    486,
    485,
    484,
    483,
    482,
    481,
    480,
    479,
    477,
    475,
    474,
    472,
    470,
    467,
    465,
    462,
    459,
    456,
    452,
    448,
    443,
    437,
    431,
    425,
    418,
    410,
    401,
    393,
    384,
    374,
    366,
    357,
    349,
    342,
    336,
    330,
    324,
    320,
    315,
    311,
    308,
    305,
    302,
    300,
    297,
    295,
    293,
    292,
    290,
    288,
    287,
    286,
    285,
    284,
    283,
    282,
    281,
    280,
    279,
    279,
    278,
    277,
    277,
    276,
    275,
    275,
    274,
    274,
    274,
    273,
    273,
    272,
    272,
    272,
    271,
    271,
    271,
    270,
    270,
    270,
    269,
    269,
    269,
    269,
    268,
    268,
    268,
    268,
    268,
    267,
    267,
    267,
    499,
    499,
    498,
    498,
    498,
    498,
    498,
    497,
    497,
    497,
    497,
    496,
    496,
    496,
    495,
    495,
    495,
    494,
    494,
    494,
    493,
    493,
    492,
    492,
    492,
    491,
    491,
    490,
    489,
    489,
    488,
    488,
    487,
    486,
    485,
    484,
    484,
    483,
    482,
    480,
    479,
    478,
    477,
    475,
    474,
    472,
    470,
    468,
    466,
    464,
    461,
    458,
    455,
    451,
    448,
    443,
    438,
    433,
    428,
    421,
    415,
    407,
    400,
    392,
    384,
    375,
    367,
    360,
    352,
    346,
    339,
    334,
    329,
    324,
    320,
    316,
    312,
    309,
    306,
    303,
    301,
    299,
    297,
    295,
    293,
    292,
    290,
    289,
    288,
    287,
    285,
    284,
    283,
    283,
    282,
    281,
    280,
    279,
    279,
    278,
    278,
    277,
    276,
    276,
    275,
    275,
    275,
    274,
    274,
    273,
    273,
    273,
    272,
    272,
    272,
    271,
    271,
    271,
    270,
    270,
    270,
    270,
    269,
    269,
    269,
    269,
    269,
    268,
    498,
    497,
    497,
    497,
    497,
    496,
    496,
    496,
    496,
    495,
    495,
    495,
    495,
    494,
    494,
    494,
    493,
    493,
    492,
    492,
    492,
    491,
    491,
    490,
    490,
    489,
    489,
    488,
    487,
    487,
    486,
    485,
    485,
    484,
    483,
    482,
    481,
    480,
    479,
    478,
    476,
    475,
    474,
    472,
    471,
    469,
    467,
    465,
    462,
    460,
    457,
    454,
    451,
    448,
    444,
    439,
    435,
    430,
    424,
    418,
    412,
    405,
    398,
    391,
    384,
    376,
    369,
    362,
    355,
    349,
    343,
    337,
    332,
    328,
    323,
    320,
    316,
    313,
    310,
    307,
    305,
    302,
    300,
    298,
    296,
    295,
    293,
    292,
    291,
    289,
    288,
    287,
    286,
    285,
    284,
    283,
    282,
    282,
    281,
    280,
    280,
    279,
    278,
    278,
    277,
    277,
    276,
    276,
    275,
    275,
    275,
    274,
    274,
    273,
    273,
    273,
    272,
    272,
    272,
    272,
    271,
    271,
    271,
    271,
    270,
    270,
    270,
    270,
    496,
    496,
    496,
    496,
    495,
    495,
    495,
    495,
    494,
    494,
    494,
    493,
    493,
    493,
    492,
    492,
    492,
    491,
    491,
    490,
    490,
    489,
    489,
    488,
    488,
    487,
    487,
    486,
    485,
    485,
    484,
    483,
    482,
    481,
    480,
    480,
    479,
    477,
    476,
    475,
    474,
    472,
    471,
    469,
    467,
    466,
    464,
    461,
    459,
    457,
    454,
    451,
    448,
    444,
    440,
    436,
    431,
    427,
    421,
    416,
    410,
    403,
    397,
    390,
    384,
    377,
    370,
    364,
    357,
    351,
    346,
    340,
    336,
    331,
    327,
    323,
    320,
    316,
    313,
    310,
    308,
    306,
    303,
    301,
    300,
    298,
    296,
    295,
    293,
    292,
    291,
    290,
    288,
    287,
    287,
    286,
    285,
    284,
    283,
    282,
    282,
    281,
    280,
    280,
    279,
    279,
    278,
    278,
    277,
    277,
    276,
    276,
    275,
    275,
    275,
    274,
    274,
    274,
    273,
    273,
    273,
    272,
    272,
    272,
    272,
    271,
    271,
    271,
    495,
    495,
    495,
    494,
    494,
    494,
    494,
    493,
    493,
    493,
    492,
    492,
    492,
    491,
    491,
    490,
    490,
    490,
    489,
    489,
    488,
    488,
    487,
    486,
    486,
    485,
    485,
    484,
    483,
    483,
    482,
    481,
    480,
    479,
    478,
    477,
    476,
    475,
    474,
    472,
    471,
    470,
    468,
    466,
    465,
    463,
    461,
    458,
    456,
    453,
    451,
    448,
    444,
    441,
    437,
    433,
    428,
    424,
    419,
    413,
    408,
    402,
    396,
    390,
    384,
    377,
    371,
    365,
    359,
    354,
    348,
    343,
    339,
    334,
    330,
    326,
    323,
    320,
    316,
    314,
    311,
    309,
    306,
    304,
    302,
    301,
    299,
    297,
    296,
    295,
    293,
    292,
    291,
    290,
    289,
    288,
    287,
    286,
    285,
    284,
    284,
    283,
    282,
    282,
    281,
    281,
    280,
    279,
    279,
    278,
    278,
    277,
    277,
    277,
    276,
    276,
    275,
    275,
    275,
    274,
    274,
    274,
    273,
    273,
    273,
    273,
    272,
    272,
    494,
    494,
    493,
    493,
    493,
    493,
    492,
    492,
    492,
    491,
    491,
    490,
    490,
    490,
    489,
    489,
    488,
    488,
    487,
    487,
    486,
    486,
    485,
    485,
    484,
    483,
    483,
    482,
    481,
    480,
    480,
    479,
    478,
    477,
    476,
    475,
    474,
    473,
    471,
    470,
    468,
    467,
    465,
    464,
    462,
    460,
    458,
    455,
    453,
    450,
    448,
    444,
    441,
    438,
    434,
    430,
    426,
    421,
    416,
    411,
    406,
    401,
    395,
    389,
    384,
    378,
    372,
    366,
    361,
    356,
    351,
    346,
    341,
    337,
    333,
    329,
    326,
    323,
    320,
    317,
    314,
    312,
    309,
    307,
    305,
    303,
    302,
    300,
    299,
    297,
    296,
    294,
    293,
    292,
    291,
    290,
    289,
    288,
    287,
    287,
    286,
    285,
    284,
    284,
    283,
    282,
    282,
    281,
    281,
    280,
    280,
    279,
    279,
    278,
    278,
    277,
    277,
    277,
    276,
    276,
    275,
    275,
    275,
    274,
    274,
    274,
    274,
    273,
    493,
    492,
    492,
    492,
    492,
    491,
    491,
    491,
    490,
    490,
    489,
    489,
    489,
    488,
    488,
    487,
    487,
    486,
    486,
    485,
    485,
    484,
    484,
    483,
    482,
    482,
    481,
    480,
    479,
    479,
    478,
    477,
    476,
    475,
    474,
    473,
    471,
    470,
    469,
    467,
    466,
    464,
    463,
    461,
    459,
    457,
    455,
    453,
    450,
    448,
    445,
    442,
    438,
    435,
    431,
    428,
    423,
    419,
    415,
    410,
    405,
    400,
    394,
    389,
    384,
    378,
    373,
    367,
    362,
    357,
    352,
    348,
    344,
    339,
    336,
    332,
    329,
    325,
    322,
    320,
    317,
    314,
    312,
    310,
    308,
    306,
    304,
    303,
    301,
    300,
    298,
    297,
    296,
    294,
    293,
    292,
    291,
    290,
    289,
    288,
    288,
    287,
    286,
    285,
    285,
    284,
    283,
    283,
    282,
    282,
    281,
    281,
    280,
    280,
    279,
    279,
    278,
    278,
    278,
    277,
    277,
    276,
    276,
    276,
    275,
    275,
    275,
    275,
    492,
    491,
    491,
    491,
    490,
    490,
    490,
    489,
    489,
    488,
    488,
    488,
    487,
    487,
    486,
    486,
    485,
    485,
    484,
    484,
    483,
    482,
    482,
    481,
    480,
    480,
    479,
    478,
    477,
    477,
    476,
    475,
    474,
    473,
    472,
    470,
    469,
    468,
    467,
    465,
    464,
    462,
    460,
    458,
    457,
    454,
    452,
    450,
    448,
    445,
    442,
    439,
    436,
    433,
    429,
    425,
    421,
    417,
    413,
    408,
    403,
    399,
    394,
    389,
    384,
    378,
    373,
    368,
    364,
    359,
    354,
    350,
    346,
    342,
    338,
    334,
    331,
    328,
    325,
    322,
    320,
    317,
    315,
    313,
    310,
    309,
    307,
    305,
    303,
    302,
    300,
    299,
    298,
    297,
    295,
    294,
    293,
    292,
    291,
    290,
    290,
    289,
    288,
    287,
    287,
    286,
    285,
    285,
    284,
    283,
    283,
    282,
    282,
    281,
    281,
    280,
    280,
    279,
    279,
    279,
    278,
    278,
    277,
    277,
    277,
    276,
    276,
    276,
    490,
    490,
    490,
    489,
    489,
    489,
    488,
    488,
    487,
    487,
    487,
    486,
    486,
    485,
    485,
    484,
    484,
    483,
    483,
    482,
    481,
    481,
    480,
    479,
    479,
    478,
    477,
    476,
    476,
    475,
    474,
    473,
    472,
    471,
    469,
    468,
    467,
    466,
    464,
    463,
    461,
    460,
    458,
    456,
    454,
    452,
    450,
    448,
    445,
    442,
    440,
    437,
    434,
    430,
    427,
    423,
    419,
    415,
    411,
    407,
    402,
    398,
    393,
    388,
    384,
    379,
    374,
    369,
    365,
    360,
    356,
    352,
    348,
    344,
    340,
    337,
    333,
    330,
    327,
    325,
    322,
    320,
    317,
    315,
    313,
    311,
    309,
    307,
    306,
    304,
    303,
    301,
    300,
    299,
    298,
    296,
    295,
    294,
    293,
    292,
    291,
    291,
    290,
    289,
    288,
    288,
    287,
    286,
    286,
    285,
    284,
    284,
    283,
    283,
    282,
    282,
    281,
    281,
    280,
    280,
    280,
    279,
    279,
    278,
    278,
    278,
    277,
    277,
    489,
    489,
    488,
    488,
    488,
    487,
    487,
    487,
    486,
    486,
    485,
    485,
    484,
    484,
    483,
    483,
    482,
    482,
    481,
    480,
    480,
    479,
    479,
    478,
    477,
    476,
    475,
    475,
    474,
    473,
    472,
    471,
    470,
    469,
    467,
    466,
    465,
    464,
    462,
    461,
    459,
    457,
    456,
    454,
    452,
    450,
    448,
    445,
    443,
    440,
    437,
    434,
    431,
    428,
    425,
    421,
    418,
    414,
    410,
    406,
    401,
    397,
    393,
    388,
    384,
    379,
    374,
    370,
    366,
    361,
    357,
    353,
    349,
    346,
    342,
    339,
    336,
    333,
    330,
    327,
    324,
    322,
    320,
    317,
    315,
    313,
    311,
    310,
    308,
    306,
    305,
    303,
    302,
    301,
    300,
    298,
    297,
    296,
    295,
    294,
    293,
    292,
    292,
    291,
    290,
    289,
    288,
    288,
    287,
    287,
    286,
    285,
    285,
    284,
    284,
    283,
    283,
    282,
    282,
    281,
    281,
    280,
    280,
    280,
    279,
    279,
    279,
    278,
    488,
    488,
    487,
    487,
    487,
    486,
    486,
    485,
    485,
    484,
    484,
    483,
    483,
    482,
    482,
    481,
    481,
    480,
    480,
    479,
    478,
    478,
    477,
    476,
    475,
    475,
    474,
    473,
    472,
    471,
    470,
    469,
    468,
    467,
    465,
    464,
    463,
    462,
    460,
    459,
    457,
    455,
    453,
    452,
    450,
    448,
    445,
    443,
    441,
    438,
    435,
    432,
    429,
    426,
    423,
    420,
    416,
    412,
    408,
    404,
    400,
    396,
    392,
    388,
    384,
    379,
    375,
    371,
    367,
    363,
    359,
    355,
    351,
    347,
    344,
    341,
    338,
    335,
    332,
    329,
    326,
    324,
    322,
    320,
    317,
    315,
    314,
    312,
    310,
    308,
    307,
    305,
    304,
    303,
    302,
    300,
    299,
    298,
    297,
    296,
    295,
    294,
    293,
    292,
    292,
    291,
    290,
    289,
    289,
    288,
    287,
    287,
    286,
    286,
    285,
    285,
    284,
    284,
    283,
    283,
    282,
    282,
    281,
    281,
    280,
    280,
    280,
    279,
    487,
    486,
    486,
    486,
    485,
    485,
    484,
    484,
    484,
    483,
    483,
    482,
    482,
    481,
    480,
    480,
    479,
    479,
    478,
    477,
    477,
    476,
    475,
    475,
    474,
    473,
    472,
    471,
    470,
    469,
    468,
    467,
    466,
    465,
    464,
    462,
    461,
    460,
    458,
    457,
    455,
    453,
    451,
    449,
    448,
    445,
    443,
    441,
    438,
    436,
    433,
    430,
    428,
    424,
    421,
    418,
    415,
    411,
    407,
    403,
    400,
    396,
    392,
    388,
    384,
    379,
    375,
    371,
    367,
    364,
    360,
    356,
    352,
    349,
    346,
    343,
    339,
    337,
    334,
    331,
    329,
    326,
    324,
    322,
    320,
    318,
    316,
    314,
    312,
    310,
    309,
    307,
    306,
    305,
    303,
    302,
    301,
    300,
    299,
    298,
    297,
    296,
    295,
    294,
    293,
    292,
    292,
    291,
    290,
    290,
    289,
    288,
    288,
    287,
    287,
    286,
    285,
    285,
    284,
    284,
    283,
    283,
    283,
    282,
    282,
    281,
    281,
    281,
    486,
    485,
    485,
    484,
    484,
    484,
    483,
    483,
    482,
    482,
    481,
    481,
    480,
    480,
    479,
    479,
    478,
    477,
    477,
    476,
    475,
    474,
    474,
    473,
    472,
    471,
    470,
    469,
    468,
    467,
    466,
    465,
    464,
    463,
    462,
    460,
    459,
    458,
    456,
    455,
    453,
    451,
    449,
    448,
    446,
    443,
    441,
    439,
    437,
    434,
    431,
    429,
    426,
    423,
    420,
    416,
    413,
    410,
    406,
    403,
    399,
    395,
    391,
    387,
    384,
    380,
    376,
    372,
    368,
    364,
    361,
    357,
    354,
    351,
    347,
    344,
    341,
    338,
    336,
    333,
    330,
    328,
    326,
    324,
    321,
    320,
    318,
    316,
    314,
    312,
    311,
    309,
    308,
    307,
    305,
    304,
    303,
    302,
    301,
    300,
    299,
    298,
    297,
    296,
    295,
    294,
    293,
    293,
    292,
    291,
    290,
    290,
    289,
    288,
    288,
    287,
    287,
    286,
    286,
    285,
    285,
    284,
    284,
    283,
    283,
    283,
    282,
    282,
    485,
    484,
    484,
    483,
    483,
    482,
    482,
    481,
    481,
    480,
    480,
    479,
    479,
    478,
    478,
    477,
    476,
    476,
    475,
    474,
    474,
    473,
    472,
    471,
    471,
    470,
    469,
    468,
    467,
    466,
    465,
    464,
    462,
    461,
    460,
    459,
    457,
    456,
    454,
    453,
    451,
    449,
    448,
    446,
    444,
    442,
    439,
    437,
    435,
    432,
    430,
    427,
    424,
    421,
    418,
    415,
    412,
    409,
    405,
    402,
    398,
    395,
    391,
    387,
    384,
    380,
    376,
    372,
    369,
    365,
    362,
    358,
    355,
    352,
    349,
    346,
    343,
    340,
    337,
    335,
    332,
    330,
    328,
    325,
    323,
    321,
    320,
    318,
    316,
    314,
    313,
    311,
    310,
    308,
    307,
    306,
    305,
    303,
    302,
    301,
    300,
    299,
    298,
    297,
    296,
    296,
    295,
    294,
    293,
    293,
    292,
    291,
    291,
    290,
    289,
    289,
    288,
    288,
    287,
    287,
    286,
    286,
    285,
    285,
    284,
    284,
    283,
    283,
    483,
    483,
    483,
    482,
    482,
    481,
    481,
    480,
    480,
    479,
    479,
    478,
    478,
    477,
    476,
    476,
    475,
    474,
    474,
    473,
    472,
    471,
    471,
    470,
    469,
    468,
    467,
    466,
    465,
    464,
    463,
    462,
    461,
    459,
    458,
    457,
    455,
    454,
    452,
    451,
    449,
    448,
    446,
    444,
    442,
    440,
    438,
    435,
    433,
    431,
    428,
    425,
    423,
    420,
    417,
    414,
    411,
    408,
    404,
    401,
    398,
    394,
    391,
    387,
    384,
    380,
    376,
    373,
    369,
    366,
    363,
    359,
    356,
    353,
    350,
    347,
    344,
    342,
    339,
    336,
    334,
    332,
    329,
    327,
    325,
    323,
    321,
    320,
    318,
    316,
    315,
    313,
    312,
    310,
    309,
    308,
    306,
    305,
    304,
    303,
    302,
    301,
    300,
    299,
    298,
    297,
    296,
    296,
    295,
    294,
    293,
    293,
    292,
    291,
    291,
    290,
    289,
    289,
    288,
    288,
    287,
    287,
    286,
    286,
    285,
    285,
    284,
    284,
    482,
    482,
    481,
    481,
    480,
    480,
    480,
    479,
    479,
    478,
    477,
    477,
    476,
    476,
    475,
    474,
    474,
    473,
    472,
    472,
    471,
    470,
    469,
    468,
    467,
    467,
    466,
    465,
    464,
    463,
    461,
    460,
    459,
    458,
    457,
    455,
    454,
    452,
    451,
    449,
    448,
    446,
    444,
    442,
    440,
    438,
    436,
    434,
    431,
    429,
    427,
    424,
    421,
    419,
    416,
    413,
    410,
    407,
    403,
    400,
    397,
    394,
    390,
    387,
    384,
    380,
    377,
    373,
    370,
    367,
    364,
    360,
    357,
    354,
    351,
    348,
    346,
    343,
    340,
    338,
    336,
    333,
    331,
    329,
    327,
    325,
    323,
    321,
    320,
    318,
    316,
    315,
    313,
    312,
    310,
    309,
    308,
    307,
    306,
    304,
    303,
    302,
    301,
    300,
    300,
    299,
    298,
    297,
    296,
    295,
    295,
    294,
    293,
    293,
    292,
    291,
    291,
    290,
    290,
    289,
    288,
    288,
    287,
    287,
    287,
    286,
    286,
    285,
    481,
    481,
    480,
    480,
    479,
    479,
    478,
    478,
    477,
    477,
    476,
    476,
    475,
    474,
    474,
    473,
    472,
    472,
    471,
    470,
    469,
    469,
    468,
    467,
    466,
    465,
    464,
    463,
    462,
    461,
    460,
    459,
    457,
    456,
    455,
    454,
    452,
    451,
    449,
    448,
    446,
    444,
    442,
    440,
    438,
    436,
    434,
    432,
    430,
    428,
    425,
    423,
    420,
    417,
    415,
    412,
    409,
    406,
    403,
    400,
    396,
    393,
    390,
    387,
    384,
    380,
    377,
    374,
    371,
    367,
    364,
    361,
    358,
    355,
    352,
    350,
    347,
    344,
    342,
    339,
    337,
    335,
    333,
    331,
    329,
    327,
    325,
    323,
    321,
    320,
    318,
    316,
    315,
    313,
    312,
    311,
    310,
    308,
    307,
    306,
    305,
    304,
    303,
    302,
    301,
    300,
    299,
    298,
    298,
    297,
    296,
    295,
    295,
    294,
    293,
    293,
    292,
    291,
    291,
    290,
    290,
    289,
    289,
    288,
    288,
    287,
    287,
    286,
    480,
    480,
    479,
    479,
    478,
    478,
    477,
    477,
    476,
    476,
    475,
    474,
    474,
    473,
    472,
    472,
    471,
    470,
    470,
    469,
    468,
    467,
    466,
    465,
    465,
    464,
    463,
    462,
    461,
    459,
    458,
    457,
    456,
    455,
    453,
    452,
    451,
    449,
    448,
    446,
    444,
    443,
    441,
    439,
    437,
    435,
    433,
    431,
    428,
    426,
    424,
    421,
    419,
    416,
    413,
    411,
    408,
    405,
    402,
    399,
    396,
    393,
    390,
    387,
    384,
    380,
    377,
    374,
    371,
    368,
    365,
    362,
    359,
    356,
    354,
    351,
    348,
    346,
    343,
    341,
    339,
    336,
    334,
    332,
    330,
    328,
    326,
    324,
    323,
    321,
    320,
    318,
    316,
    315,
    314,
    312,
    311,
    310,
    309,
    308,
    306,
    305,
    304,
    303,
    302,
    302,
    301,
    300,
    299,
    298,
    297,
    297,
    296,
    295,
    295,
    294,
    293,
    293,
    292,
    291,
    291,
    290,
    290,
    289,
    289,
    288,
    288,
    287,
    479,
    479,
    478,
    478,
    477,
    477,
    476,
    475,
    475,
    474,
    474,
    473,
    472,
    472,
    471,
    470,
    470,
    469,
    468,
    467,
    467,
    466,
    465,
    464,
    463,
    462,
    461,
    460,
    459,
    458,
    457,
    456,
    454,
    453,
    452,
    450,
    449,
    448,
    446,
    444,
    443,
    441,
    439,
    437,
    435,
    433,
    431,
    429,
    427,
    425,
    422,
    420,
    418,
    415,
    412,
    410,
    407,
    404,
    401,
    398,
    395,
    393,
    390,
    387,
    384,
    380,
    377,
    374,
    372,
    369,
    366,
    363,
    360,
    357,
    355,
    352,
    349,
    347,
    345,
    342,
    340,
    338,
    336,
    334,
    332,
    330,
    328,
    326,
    324,
    323,
    321,
    320,
    318,
    317,
    315,
    314,
    313,
    311,
    310,
    309,
    308,
    307,
    306,
    305,
    304,
    303,
    302,
    301,
    300,
    300,
    299,
    298,
    297,
    297,
    296,
    295,
    295,
    294,
    293,
    293,
    292,
    292,
    291,
    290,
    290,
    289,
    289,
    288,
    478,
    477,
    477,
    476,
    476,
    475,
    475,
    474,
    474,
    473,
    473,
    472,
    471,
    471,
    470,
    469,
    468,
    468,
    467,
    466,
    465,
    464,
    464,
    463,
    462,
    461,
    460,
    459,
    458,
    457,
    455,
    454,
    453,
    452,
    450,
    449,
    448,
    446,
    444,
    443,
    441,
    440,
    438,
    436,
    434,
    432,
    430,
    428,
    426,
    424,
    421,
    419,
    416,
    414,
    411,
    409,
    406,
    403,
    401,
    398,
    395,
    392,
    389,
    386,
    384,
    381,
    378,
    375,
    372,
    369,
    366,
    364,
    361,
    358,
    356,
    353,
    351,
    348,
    346,
    343,
    341,
    339,
    337,
    335,
    333,
    331,
    329,
    327,
    326,
    324,
    323,
    321,
    320,
    318,
    317,
    315,
    314,
    313,
    312,
    310,
    309,
    308,
    307,
    306,
    305,
    304,
    303,
    303,
    302,
    301,
    300,
    299,
    299,
    298,
    297,
    296,
    296,
    295,
    294,
    294,
    293,
    293,
    292,
    292,
    291,
    291,
    290,
    290,
    477,
    476,
    476,
    475,
    475,
    474,
    474,
    473,
    473,
    472,
    471,
    471,
    470,
    469,
    469,
    468,
    467,
    466,
    466,
    465,
    464,
    463,
    462,
    461,
    460,
    459,
    458,
    457,
    456,
    455,
    454,
    453,
    452,
    450,
    449,
    448,
    446,
    445,
    443,
    441,
    440,
    438,
    436,
    435,
    433,
    431,
    429,
    427,
    425,
    422,
    420,
    418,
    415,
    413,
    411,
    408,
    405,
    403,
    400,
    397,
    395,
    392,
    389,
    386,
    384,
    381,
    378,
    375,
    372,
    370,
    367,
    364,
    362,
    359,
    356,
    354,
    352,
    349,
    347,
    345,
    342,
    340,
    338,
    336,
    334,
    332,
    331,
    329,
    327,
    326,
    324,
    322,
    321,
    320,
    318,
    317,
    315,
    314,
    313,
    312,
    311,
    310,
    309,
    308,
    307,
    306,
    305,
    304,
    303,
    302,
    301,
    301,
    300,
    299,
    298,
    298,
    297,
    296,
    296,
    295,
    294,
    294,
    293,
    293,
    292,
    292,
    291,
    291,
    476,
    475,
    475,
    474,
    474,
    473,
    473,
    472,
    471,
    471,
    470,
    470,
    469,
    468,
    467,
    467,
    466,
    465,
    464,
    464,
    463,
    462,
    461,
    460,
    459,
    458,
    457,
    456,
    455,
    454,
    453,
    451,
    450,
    449,
    448,
    446,
    445,
    443,
    442,
    440,
    438,
    437,
    435,
    433,
    431,
    430,
    428,
    426,
    423,
    421,
    419,
    417,
    415,
    412,
    410,
    407,
    405,
    402,
    400,
    397,
    394,
    392,
    389,
    386,
    384,
    381,
    378,
    375,
    373,
    370,
    367,
    365,
    362,
    360,
    357,
    355,
    352,
    350,
    348,
    346,
    344,
    341,
    339,
    337,
    336,
    334,
    332,
    330,
    329,
    327,
    325,
    324,
    322,
    321,
    320,
    318,
    317,
    316,
    314,
    313,
    312,
    311,
    310,
    309,
    308,
    307,
    306,
    305,
    304,
    303,
    303,
    302,
    301,
    300,
    300,
    299,
    298,
    297,
    297,
    296,
    296,
    295,
    294,
    294,
    293,
    293,
    292,
    292,
    475,
    474,
    474,
    473,
    473,
    472,
    472,
    471,
    470,
    470,
    469,
    468,
    468,
    467,
    466,
    466,
    465,
    464,
    463,
    462,
    461,
    461,
    460,
    459,
    458,
    457,
    456,
    455,
    454,
    452,
    451,
    450,
    449,
    448,
    446,
    445,
    443,
    442,
    440,
    439,
    437,
    436,
    434,
    432,
    430,
    428,
    426,
    424,
    422,
    420,
    418,
    416,
    414,
    411,
    409,
    407,
    404,
    402,
    399,
    397,
    394,
    391,
    389,
    386,
    384,
    381,
    378,
    376,
    373,
    370,
    368,
    365,
    363,
    360,
    358,
    356,
    353,
    351,
    349,
    347,
    345,
    343,
    341,
    339,
    337,
    335,
    333,
    331,
    330,
    328,
    327,
    325,
    324,
    322,
    321,
    320,
    318,
    317,
    316,
    315,
    313,
    312,
    311,
    310,
    309,
    308,
    307,
    306,
    306,
    305,
    304,
    303,
    302,
    301,
    301,
    300,
    299,
    299,
    298,
    297,
    297,
    296,
    295,
    295,
    294,
    294,
    293,
    293,
    474,
    473,
    473,
    472,
    472,
    471,
    470,
    470,
    469,
    469,
    468,
    467,
    467,
    466,
    465,
    464,
    464,
    463,
    462,
    461,
    460,
    459,
    458,
    457,
    457,
    456,
    454,
    453,
    452,
    451,
    450,
    449,
    448,
    446,
    445,
    443,
    442,
    441,
    439,
    438,
    436,
    434,
    433,
    431,
    429,
    427,
    425,
    423,
    421,
    419,
    417,
    415,
    413,
    410,
    408,
    406,
    403,
    401,
    399,
    396,
    394,
    391,
    389,
    386,
    384,
    381,
    378,
    376,
    373,
    371,
    368,
    366,
    364,
    361,
    359,
    357,
    354,
    352,
    350,
    348,
    346,
    344,
    342,
    340,
    338,
    336,
    334,
    333,
    331,
    329,
    328,
    326,
    325,
    324,
    322,
    321,
    320,
    318,
    317,
    316,
    315,
    314,
    313,
    311,
    310,
    310,
    309,
    308,
    307,
    306,
    305,
    304,
    303,
    303,
    302,
    301,
    300,
    300,
    299,
    298,
    298,
    297,
    297,
    296,
    295,
    295,
    294,
    294,
    473,
    472,
    472,
    471,
    471,
    470,
    469,
    469,
    468,
    467,
    467,
    466,
    465,
    465,
    464,
    463,
    462,
    462,
    461,
    460,
    459,
    458,
    457,
    456,
    455,
    454,
    453,
    452,
    451,
    450,
    449,
    448,
    446,
    445,
    444,
    442,
    441,
    439,
    438,
    436,
    435,
    433,
    431,
    430,
    428,
    426,
    424,
    422,
    420,
    418,
    416,
    414,
    412,
    410,
    407,
    405,
    403,
    401,
    398,
    396,
    393,
    391,
    388,
    386,
    384,
    381,
    379,
    376,
    374,
    371,
    369,
    366,
    364,
    362,
    360,
    357,
    355,
    353,
    351,
    349,
    347,
    345,
    343,
    341,
    339,
    337,
    336,
    334,
    332,
    331,
    329,
    328,
    326,
    325,
    323,
    322,
    321,
    320,
    318,
    317,
    316,
    315,
    314,
    313,
    312,
    311,
    310,
    309,
    308,
    307,
    306,
    305,
    305,
    304,
    303,
    302,
    302,
    301,
    300,
    300,
    299,
    298,
    298,
    297,
    296,
    296,
    295,
    295,
    472,
    471,
    471,
    470,
    469,
    469,
    468,
    468,
    467,
    466,
    466,
    465,
    464,
    464,
    463,
    462,
    461,
    460,
    460,
    459,
    458,
    457,
    456,
    455,
    454,
    453,
    452,
    451,
    450,
    449,
    448,
    446,
    445,
    444,
    442,
    441,
    440,
    438,
    437,
    435,
    434,
    432,
    430,
    429,
    427,
    425,
    423,
    421,
    419,
    417,
    415,
    413,
    411,
    409,
    407,
    405,
    402,
    400,
    398,
    395,
    393,
    391,
    388,
    386,
    384,
    381,
    379,
    376,
    374,
    372,
    369,
    367,
    365,
    362,
    360,
    358,
    356,
    354,
    352,
    350,
    348,
    346,
    344,
    342,
    340,
    338,
    337,
    335,
    333,
    332,
    330,
    329,
    327,
    326,
    325,
    323,
    322,
    321,
    320,
    318,
    317,
    316,
    315,
    314,
    313,
    312,
    311,
    310,
    309,
    308,
    307,
    307,
    306,
    305,
    304,
    303,
    303,
    302,
    301,
    301,
    300,
    299,
    299,
    298,
    298,
    297,
    296,
    296,
    471,
    470,
    470,
    469,
    468,
    468,
    467,
    467,
    466,
    465,
    465,
    464,
    463,
    462,
    462,
    461,
    460,
    459,
    458,
    458,
    457,
    456,
    455,
    454,
    453,
    452,
    451,
    450,
    449,
    448,
    446,
    445,
    444,
    443,
    441,
    440,
    438,
    437,
    436,
    434,
    432,
    431,
    429,
    428,
    426,
    424,
    422,
    420,
    418,
    416,
    415,
    412,
    410,
    408,
    406,
    404,
    402,
    400,
    397,
    395,
    393,
    390,
    388,
    386,
    384,
    381,
    379,
    377,
    374,
    372,
    370,
    367,
    365,
    363,
    361,
    359,
    357,
    355,
    352,
    351,
    349,
    347,
    345,
    343,
    341,
    339,
    338,
    336,
    335,
    333,
    331,
    330,
    329,
    327,
    326,
    324,
    323,
    322,
    321,
    320,
    318,
    317,
    316,
    315,
    314,
    313,
    312,
    311,
    310,
    309,
    309,
    308,
    307,
    306,
    305,
    305,
    304,
    303,
    302,
    302,
    301,
    300,
    300,
    299,
    299,
    298,
    297,
    297,
    470,
    469,
    469,
    468,
    467,
    467,
    466,
    466,
    465,
    464,
    464,
    463,
    462,
    461,
    461,
    460,
    459,
    458,
    457,
    457,
    456,
    455,
    454,
    453,
    452,
    451,
    450,
    449,
    448,
    446,
    445,
    444,
    443,
    441,
    440,
    439,
    437,
    436,
    434,
    433,
    431,
    430,
    428,
    427,
    425,
    423,
    421,
    419,
    418,
    416,
    414,
    412,
    410,
    408,
    406,
    403,
    401,
    399,
    397,
    395,
    393,
    390,
    388,
    386,
    384,
    381,
    379,
    377,
    374,
    372,
    370,
    368,
    366,
    364,
    361,
    359,
    357,
    355,
    353,
    351,
    349,
    348,
    346,
    344,
    342,
    340,
    339,
    337,
    336,
    334,
    333,
    331,
    330,
    328,
    327,
    326,
    324,
    323,
    322,
    321,
    320,
    318,
    317,
    316,
    315,
    314,
    313,
    312,
    311,
    310,
    310,
    309,
    308,
    307,
    306,
    306,
    305,
    304,
    303,
    303,
    302,
    301,
    301,
    300,
    300,
    299,
    298,
    298,
    469,
    468,
    468,
    467,
    466,
    466,
    465,
    465,
    464,
    463,
    463,
    462,
    461,
    460,
    460,
    459,
    458,
    457,
    456,
    455,
    455,
    454,
    453,
    452,
    451,
    450,
    449,
    448,
    446,
    445,
    444,
    443,
    442,
    440,
    439,
    438,
    436,
    435,
    433,
    432,
    430,
    429,
    427,
    426,
    424,
    422,
    420,
    419,
    417,
    415,
    413,
    411,
    409,
    407,
    405,
    403,
    401,
    399,
    397,
    394,
    392,
    390,
    388,
    386,
    384,
    381,
    379,
    377,
    375,
    373,
    370,
    368,
    366,
    364,
    362,
    360,
    358,
    356,
    354,
    352,
    350,
    348,
    347,
    345,
    343,
    341,
    340,
    338,
    337,
    335,
    334,
    332,
    331,
    329,
    328,
    327,
    325,
    324,
    323,
    322,
    321,
    320,
    318,
    317,
    316,
    315,
    314,
    313,
    312,
    312,
    311,
    310,
    309,
    308,
    307,
    307,
    306,
    305,
    304,
    304,
    303,
    302,
    302,
    301,
    301,
    300,
    299,
    299,
    468,
    467,
    467,
    466,
    465,
    465,
    464,
    464,
    463,
    462,
    462,
    461,
    460,
    459,
    459,
    458,
    457,
    456,
    455,
    454,
    453,
    453,
    452,
    451,
    450,
    449,
    448,
    446,
    445,
    444,
    443,
    442,
    441,
    439,
    438,
    437,
    435,
    434,
    432,
    431,
    429,
    428,
    426,
    425,
    423,
    421,
    420,
    418,
    416,
    414,
    412,
    410,
    408,
    406,
    404,
    402,
    400,
    398,
    396,
    394,
    392,
    390,
    388,
    386,
    384,
    381,
    379,
    377,
    375,
    373,
    371,
    369,
    367,
    365,
    363,
    361,
    359,
    357,
    355,
    353,
    351,
    349,
    347,
    346,
    344,
    342,
    341,
    339,
    338,
    336,
    335,
    333,
    332,
    330,
    329,
    328,
    326,
    325,
    324,
    323,
    322,
    321,
    320,
    318,
    317,
    316,
    315,
    314,
    314,
    313,
    312,
    311,
    310,
    309,
    308,
    308,
    307,
    306,
    305,
    305,
    304,
    303,
    303,
    302,
    302,
    301,
    300,
    300,
    467,
    466,
    466,
    465,
    465,
    464,
    463,
    463,
    462,
    461,
    461,
    460,
    459,
    458,
    458,
    457,
    456,
    455,
    454,
    453,
    452,
    451,
    451,
    450,
    449,
    448,
    446,
    445,
    444,
    443,
    442,
    441,
    439,
    438,
    437,
    436,
    434,
    433,
    431,
    430,
    428,
    427,
    425,
    424,
    422,
    420,
    419,
    417,
    415,
    413,
    412,
    410,
    408,
    406,
    404,
    402,
    400,
    398,
    396,
    394,
    392,
    390,
    388,
    386,
    384,
    381,
    379,
    377,
    375,
    373,
    371,
    369,
    367,
    365,
    363,
    361,
    359,
    357,
    355,
    354,
    352,
    350,
    348,
    347,
    345,
    343,
    342,
    340,
    339,
    337,
    336,
    334,
    333,
    331,
    330,
    329,
    328,
    326,
    325,
    324,
    323,
    322,
    321,
    320,
    318,
    317,
    316,
    316,
    315,
    314,
    313,
    312,
    311,
    310,
    309,
    309,
    308,
    307,
    306,
    306,
    305,
    304,
    304,
    303,
    302,
    302,
    301,
    301,
    466,
    465,
    465,
    464,
    464,
    463,
    462,
    462,
    461,
    460,
    460,
    459,
    458,
    457,
    457,
    456,
    455,
    454,
    453,
    452,
    451,
    450,
    449,
    449,
    448,
    446,
    445,
    444,
    443,
    442,
    441,
    440,
    438,
    437,
    436,
    435,
    433,
    432,
    430,
    429,
    428,
    426,
    424,
    423,
    421,
    420,
    418,
    416,
    415,
    413,
    411,
    409,
    407,
    405,
    403,
    402,
    400,
    398,
    396,
    394,
    392,
    390,
    388,
    386,
    384,
    381,
    379,
    377,
    375,
    373,
    371,
    369,
    367,
    365,
    364,
    362,
    360,
    358,
    356,
    354,
    352,
    351,
    349,
    347,
    346,
    344,
    343,
    341,
    339,
    338,
    337,
    335,
    334,
    332,
    331,
    330,
    329,
    327,
    326,
    325,
    324,
    323,
    322,
    321,
    320,
    318,
    318,
    317,
    316,
    315,
    314,
    313,
    312,
    311,
    310,
    310,
    309,
    308,
    307,
    307,
    306,
    305,
    305,
    304,
    303,
    303,
    302,
    302,
    465,
    464,
    464,
    463,
    463,
    462,
    461,
    461,
    460,
    459,
    459,
    458,
    457,
    456,
    456,
    455,
    454,
    453,
    452,
    451,
    450,
    449,
    448,
    448,
    446,
    445,
    444,
    443,
    442,
    441,
    440,
    439,
    438,
    436,
    435,
    434,
    432,
    431,
    430,
    428,
    427,
    425,
    424,
    422,
    420,
    419,
    417,
    416,
    414,
    412,
    410,
    409,
    407,
    405,
    403,
    401,
    399,
    397,
    395,
    393,
    391,
    389,
    387,
    385,
    384,
    382,
    380,
    378,
    376,
    374,
    372,
    370,
    368,
    366,
    364,
    362,
    360,
    358,
    357,
    355,
    353,
    351,
    350,
    348,
    347,
    345,
    343,
    342,
    340,
    339,
    337,
    336,
    335,
    333,
    332,
    331,
    329,
    328,
    327,
    326,
    325,
    324,
    323,
    322,
    321,
    320,
    319,
    318,
    317,
    316,
    315,
    314,
    313,
    312,
    311,
    311,
    310,
    309,
    308,
    308,
    307,
    306,
    306,
    305,
    304,
    304,
    303,
    303,
    464,
    464,
    463,
    462,
    462,
    461,
    460,
    460,
    459,
    458,
    458,
    457,
    456,
    455,
    455,
    454,
    453,
    452,
    451,
    450,
    449,
    448,
    448,
    447,
    446,
    444,
    443,
    442,
    441,
    440,
    439,
    438,
    437,
    435,
    434,
    433,
    431,
    430,
    429,
    427,
    426,
    424,
    423,
    421,
    420,
    418,
    416,
    415,
    413,
    411,
    410,
    408,
    406,
    404,
    403,
    401,
    399,
    397,
    395,
    393,
    391,
    389,
    387,
    385,
    384,
    382,
    380,
    378,
    376,
    374,
    372,
    370,
    368,
    366,
    364,
    363,
    361,
    359,
    357,
    356,
    354,
    352,
    351,
    349,
    347,
    346,
    344,
    343,
    341,
    340,
    338,
    337,
    336,
    334,
    333,
    332,
    330,
    329,
    328,
    327,
    326,
    325,
    324,
    323,
    321,
    320,
    320,
    319,
    318,
    317,
    316,
    315,
    314,
    313,
    312,
    312,
    311,
    310,
    309,
    309,
    308,
    307,
    307,
    306,
    305,
    305,
    304,
    303,
    463,
    463,
    462,
    461,
    461,
    460,
    460,
    459,
    458,
    457,
    457,
    456,
    455,
    454,
    454,
    453,
    452,
    451,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    444,
    442,
    441,
    440,
    439,
    438,
    437,
    436,
    434,
    433,
    432,
    431,
    429,
    428,
    426,
    425,
    424,
    422,
    421,
    419,
    417,
    416,
    414,
    413,
    411,
    409,
    407,
    406,
    404,
    402,
    400,
    398,
    397,
    395,
    393,
    391,
    389,
    387,
    385,
    384,
    382,
    380,
    378,
    376,
    374,
    372,
    370,
    369,
    367,
    365,
    363,
    361,
    360,
    358,
    356,
    354,
    353,
    351,
    350,
    348,
    346,
    345,
    343,
    342,
    341,
    339,
    338,
    336,
    335,
    334,
    333,
    331,
    330,
    329,
    328,
    327,
    326,
    325,
    323,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    316,
    315,
    314,
    313,
    313,
    312,
    311,
    310,
    310,
    309,
    308,
    307,
    307,
    306,
    306,
    305,
    304,
    462,
    462,
    461,
    461,
    460,
    459,
    459,
    458,
    457,
    457,
    456,
    455,
    454,
    453,
    453,
    452,
    451,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    444,
    443,
    442,
    440,
    439,
    438,
    437,
    436,
    435,
    434,
    432,
    431,
    430,
    428,
    427,
    426,
    424,
    423,
    421,
    420,
    418,
    417,
    415,
    414,
    412,
    410,
    409,
    407,
    405,
    403,
    402,
    400,
    398,
    396,
    395,
    393,
    391,
    389,
    387,
    385,
    384,
    382,
    380,
    378,
    376,
    374,
    372,
    371,
    369,
    367,
    365,
    364,
    362,
    360,
    358,
    357,
    355,
    353,
    352,
    350,
    349,
    347,
    346,
    344,
    343,
    341,
    340,
    339,
    337,
    336,
    335,
    333,
    332,
    331,
    330,
    329,
    328,
    327,
    325,
    324,
    323,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    316,
    315,
    314,
    314,
    313,
    312,
    311,
    310,
    310,
    309,
    308,
    308,
    307,
    306,
    306,
    305,
    462,
    461,
    460,
    460,
    459,
    458,
    458,
    457,
    456,
    456,
    455,
    454,
    453,
    453,
    452,
    451,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    444,
    443,
    442,
    441,
    440,
    438,
    437,
    436,
    435,
    434,
    433,
    431,
    430,
    429,
    428,
    426,
    425,
    423,
    422,
    421,
    419,
    418,
    416,
    415,
    413,
    411,
    410,
    408,
    406,
    405,
    403,
    401,
    400,
    398,
    396,
    394,
    393,
    391,
    389,
    387,
    385,
    384,
    382,
    380,
    378,
    376,
    374,
    373,
    371,
    369,
    367,
    366,
    364,
    362,
    361,
    359,
    357,
    356,
    354,
    352,
    351,
    349,
    348,
    346,
    345,
    344,
    342,
    341,
    339,
    338,
    337,
    336,
    334,
    333,
    332,
    331,
    330,
    329,
    327,
    326,
    325,
    324,
    323,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    316,
    315,
    314,
    314,
    313,
    312,
    311,
    311,
    310,
    309,
    309,
    308,
    307,
    307,
    306,
    461,
    460,
    459,
    459,
    458,
    458,
    457,
    456,
    455,
    455,
    454,
    453,
    452,
    452,
    451,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    444,
    443,
    442,
    441,
    440,
    439,
    438,
    437,
    435,
    434,
    433,
    432,
    431,
    429,
    428,
    427,
    425,
    424,
    423,
    421,
    420,
    418,
    417,
    415,
    414,
    412,
    411,
    409,
    408,
    406,
    404,
    403,
    401,
    399,
    398,
    396,
    394,
    392,
    391,
    389,
    387,
    385,
    384,
    382,
    380,
    378,
    376,
    375,
    373,
    371,
    369,
    368,
    366,
    364,
    363,
    361,
    359,
    358,
    356,
    355,
    353,
    352,
    350,
    349,
    347,
    346,
    344,
    343,
    342,
    340,
    339,
    338,
    336,
    335,
    334,
    333,
    332,
    330,
    329,
    328,
    327,
    326,
    325,
    324,
    323,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    316,
    315,
    315,
    314,
    313,
    312,
    312,
    311,
    310,
    309,
    309,
    308,
    308,
    307,
    460,
    459,
    459,
    458,
    457,
    457,
    456,
    455,
    455,
    454,
    453,
    452,
    452,
    451,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    444,
    443,
    442,
    441,
    440,
    439,
    438,
    437,
    436,
    435,
    433,
    432,
    431,
    430,
    429,
    427,
    426,
    425,
    423,
    422,
    421,
    419,
    418,
    416,
    415,
    413,
    412,
    410,
    409,
    407,
    405,
    404,
    402,
    401,
    399,
    397,
    396,
    394,
    392,
    390,
    389,
    387,
    385,
    384,
    382,
    380,
    378,
    377,
    375,
    373,
    371,
    370,
    368,
    366,
    365,
    363,
    362,
    360,
    358,
    357,
    355,
    354,
    352,
    351,
    349,
    348,
    346,
    345,
    344,
    342,
    341,
    340,
    338,
    337,
    336,
    335,
    334,
    332,
    331,
    330,
    329,
    328,
    327,
    326,
    325,
    324,
    323,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    316,
    315,
    315,
    314,
    313,
    312,
    312,
    311,
    310,
    310,
    309,
    308,
    308,
    459,
    458,
    458,
    457,
    457,
    456,
    455,
    454,
    454,
    453,
    452,
    452,
    451,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    444,
    443,
    442,
    441,
    440,
    439,
    438,
    437,
    436,
    435,
    434,
    433,
    431,
    430,
    429,
    428,
    427,
    425,
    424,
    423,
    421,
    420,
    419,
    417,
    416,
    414,
    413,
    411,
    410,
    408,
    407,
    405,
    403,
    402,
    400,
    399,
    397,
    395,
    394,
    392,
    390,
    389,
    387,
    385,
    384,
    382,
    380,
    378,
    377,
    375,
    373,
    372,
    370,
    368,
    367,
    365,
    364,
    362,
    360,
    359,
    357,
    356,
    354,
    353,
    351,
    350,
    348,
    347,
    346,
    344,
    343,
    342,
    340,
    339,
    338,
    337,
    336,
    334,
    333,
    332,
    331,
    330,
    329,
    328,
    327,
    326,
    325,
    324,
    323,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    316,
    315,
    315,
    314,
    313,
    313,
    312,
    311,
    310,
    310,
    309,
    309,
    458,
    458,
    457,
    456,
    456,
    455,
    454,
    454,
    453,
    452,
    451,
    451,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    444,
    443,
    442,
    441,
    440,
    439,
    438,
    437,
    436,
    435,
    434,
    433,
    432,
    431,
    429,
    428,
    427,
    426,
    425,
    423,
    422,
    421,
    419,
    418,
    416,
    415,
    414,
    412,
    411,
    409,
    408,
    406,
    405,
    403,
    401,
    400,
    398,
    397,
    395,
    393,
    392,
    390,
    388,
    387,
    385,
    384,
    382,
    380,
    379,
    377,
    375,
    374,
    372,
    370,
    369,
    367,
    366,
    364,
    362,
    361,
    359,
    358,
    356,
    355,
    353,
    352,
    351,
    349,
    348,
    346,
    345,
    344,
    342,
    341,
    340,
    339,
    338,
    336,
    335,
    334,
    333,
    332,
    331,
    330,
    329,
    328,
    327,
    326,
    325,
    324,
    323,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    316,
    316,
    315,
    314,
    313,
    313,
    312,
    311,
    311,
    310,
    309,
    457,
    457,
    456,
    456,
    455,
    454,
    454,
    453,
    452,
    451,
    451,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    444,
    443,
    442,
    441,
    440,
    439,
    438,
    437,
    436,
    435,
    434,
    433,
    432,
    431,
    430,
    429,
    428,
    426,
    425,
    424,
    423,
    421,
    420,
    419,
    417,
    416,
    415,
    413,
    412,
    410,
    409,
    407,
    406,
    404,
    403,
    401,
    400,
    398,
    396,
    395,
    393,
    392,
    390,
    388,
    387,
    385,
    384,
    382,
    380,
    379,
    377,
    375,
    374,
    372,
    371,
    369,
    367,
    366,
    364,
    363,
    361,
    360,
    358,
    357,
    355,
    354,
    352,
    351,
    350,
    348,
    347,
    346,
    344,
    343,
    342,
    341,
    339,
    338,
    337,
    336,
    335,
    334,
    333,
    332,
    331,
    330,
    329,
    328,
    327,
    326,
    325,
    324,
    323,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    316,
    316,
    315,
    314,
    313,
    313,
    312,
    311,
    311,
    310,
    457,
    456,
    455,
    455,
    454,
    453,
    453,
    452,
    451,
    451,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    444,
    443,
    442,
    442,
    441,
    440,
    439,
    438,
    437,
    436,
    435,
    434,
    433,
    431,
    430,
    429,
    428,
    427,
    426,
    424,
    423,
    422,
    421,
    419,
    418,
    417,
    415,
    414,
    413,
    411,
    410,
    408,
    407,
    405,
    404,
    402,
    401,
    399,
    398,
    396,
    395,
    393,
    391,
    390,
    388,
    387,
    385,
    384,
    382,
    380,
    379,
    377,
    376,
    374,
    372,
    371,
    369,
    368,
    366,
    365,
    363,
    362,
    360,
    359,
    357,
    356,
    354,
    353,
    352,
    350,
    349,
    348,
    346,
    345,
    344,
    343,
    341,
    340,
    339,
    338,
    337,
    336,
    334,
    333,
    332,
    331,
    330,
    329,
    328,
    327,
    326,
    325,
    325,
    324,
    323,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    316,
    316,
    315,
    314,
    314,
    313,
    312,
    312,
    311,
    456,
    455,
    455,
    454,
    453,
    453,
    452,
    451,
    451,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    444,
    443,
    443,
    442,
    441,
    440,
    439,
    438,
    437,
    436,
    435,
    434,
    433,
    432,
    431,
    430,
    428,
    427,
    426,
    425,
    424,
    423,
    421,
    420,
    419,
    417,
    416,
    415,
    413,
    412,
    411,
    409,
    408,
    406,
    405,
    403,
    402,
    400,
    399,
    397,
    396,
    394,
    393,
    391,
    390,
    388,
    387,
    385,
    384,
    382,
    380,
    379,
    377,
    376,
    374,
    373,
    371,
    370,
    368,
    367,
    365,
    364,
    362,
    361,
    359,
    358,
    356,
    355,
    354,
    352,
    351,
    350,
    348,
    347,
    346,
    344,
    343,
    342,
    341,
    340,
    339,
    337,
    336,
    335,
    334,
    333,
    332,
    331,
    330,
    329,
    328,
    327,
    326,
    325,
    324,
    324,
    323,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    316,
    316,
    315,
    314,
    314,
    313,
    312,
    312,
    455,
    455,
    454,
    453,
    453,
    452,
    451,
    450,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    444,
    443,
    443,
    442,
    441,
    440,
    439,
    438,
    437,
    436,
    435,
    434,
    433,
    432,
    431,
    430,
    429,
    428,
    427,
    425,
    424,
    423,
    422,
    421,
    419,
    418,
    417,
    416,
    414,
    413,
    412,
    410,
    409,
    407,
    406,
    405,
    403,
    402,
    400,
    399,
    397,
    396,
    394,
    393,
    391,
    390,
    388,
    387,
    385,
    384,
    382,
    380,
    379,
    377,
    376,
    374,
    373,
    371,
    370,
    368,
    367,
    365,
    364,
    362,
    361,
    360,
    358,
    357,
    355,
    354,
    353,
    351,
    350,
    349,
    348,
    346,
    345,
    344,
    343,
    342,
    340,
    339,
    338,
    337,
    336,
    335,
    334,
    333,
    332,
    331,
    330,
    329,
    328,
    327,
    326,
    325,
    324,
    324,
    323,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    317,
    316,
    315,
    314,
    314,
    313,
    312,
    454,
    454,
    453,
    452,
    452,
    451,
    450,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    444,
    444,
    443,
    442,
    441,
    440,
    439,
    438,
    437,
    436,
    435,
    434,
    433,
    432,
    431,
    430,
    429,
    428,
    427,
    426,
    425,
    424,
    422,
    421,
    420,
    419,
    418,
    416,
    415,
    414,
    412,
    411,
    410,
    408,
    407,
    406,
    404,
    403,
    401,
    400,
    398,
    397,
    395,
    394,
    393,
    391,
    390,
    388,
    387,
    385,
    384,
    382,
    380,
    379,
    377,
    376,
    374,
    373,
    372,
    370,
    369,
    367,
    366,
    364,
    363,
    361,
    360,
    359,
    357,
    356,
    355,
    353,
    352,
    351,
    349,
    348,
    347,
    346,
    345,
    343,
    342,
    341,
    340,
    339,
    338,
    337,
    336,
    335,
    334,
    333,
    332,
    331,
    330,
    329,
    328,
    327,
    326,
    325,
    324,
    323,
    323,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    317,
    316,
    315,
    315,
    314,
    313,
    454,
    453,
    452,
    452,
    451,
    450,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    444,
    444,
    443,
    442,
    441,
    440,
    439,
    438,
    438,
    437,
    436,
    435,
    434,
    433,
    432,
    431,
    430,
    429,
    428,
    426,
    425,
    424,
    423,
    422,
    421,
    419,
    418,
    417,
    416,
    415,
    413,
    412,
    411,
    409,
    408,
    407,
    405,
    404,
    402,
    401,
    400,
    398,
    397,
    395,
    394,
    392,
    391,
    389,
    388,
    386,
    385,
    384,
    382,
    381,
    379,
    378,
    376,
    375,
    373,
    372,
    370,
    369,
    367,
    366,
    365,
    363,
    362,
    360,
    359,
    358,
    356,
    355,
    354,
    352,
    351,
    350,
    349,
    348,
    346,
    345,
    344,
    343,
    342,
    341,
    339,
    338,
    337,
    336,
    335,
    334,
    333,
    332,
    331,
    330,
    329,
    329,
    328,
    327,
    326,
    325,
    324,
    323,
    323,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    317,
    316,
    315,
    315,
    314,
    453,
    452,
    452,
    451,
    450,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    444,
    444,
    443,
    442,
    441,
    440,
    440,
    439,
    438,
    437,
    436,
    435,
    434,
    433,
    432,
    431,
    430,
    429,
    428,
    427,
    426,
    425,
    424,
    422,
    421,
    420,
    419,
    418,
    416,
    415,
    414,
    413,
    411,
    410,
    409,
    408,
    406,
    405,
    403,
    402,
    401,
    399,
    398,
    396,
    395,
    394,
    392,
    391,
    389,
    388,
    386,
    385,
    384,
    382,
    381,
    379,
    378,
    376,
    375,
    373,
    372,
    371,
    369,
    368,
    366,
    365,
    364,
    362,
    361,
    359,
    358,
    357,
    356,
    354,
    353,
    352,
    351,
    349,
    348,
    347,
    346,
    345,
    343,
    342,
    341,
    340,
    339,
    338,
    337,
    336,
    335,
    334,
    333,
    332,
    331,
    330,
    329,
    328,
    327,
    327,
    326,
    325,
    324,
    323,
    323,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    317,
    316,
    315,
    315,
    452,
    452,
    451,
    450,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    445,
    444,
    443,
    442,
    441,
    441,
    440,
    439,
    438,
    437,
    436,
    435,
    434,
    433,
    432,
    431,
    430,
    429,
    428,
    427,
    426,
    425,
    424,
    423,
    422,
    421,
    420,
    418,
    417,
    416,
    415,
    414,
    412,
    411,
    410,
    408,
    407,
    406,
    404,
    403,
    402,
    400,
    399,
    398,
    396,
    395,
    393,
    392,
    391,
    389,
    388,
    386,
    385,
    384,
    382,
    381,
    379,
    378,
    376,
    375,
    374,
    372,
    371,
    369,
    368,
    367,
    365,
    364,
    363,
    361,
    360,
    359,
    357,
    356,
    355,
    353,
    352,
    351,
    350,
    349,
    347,
    346,
    345,
    344,
    343,
    342,
    341,
    340,
    339,
    338,
    337,
    336,
    335,
    334,
    333,
    332,
    331,
    330,
    329,
    328,
    327,
    326,
    326,
    325,
    324,
    323,
    322,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    317,
    316,
    315,
    452,
    451,
    450,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    445,
    444,
    443,
    442,
    441,
    441,
    440,
    439,
    438,
    437,
    436,
    435,
    435,
    434,
    433,
    432,
    431,
    430,
    429,
    428,
    427,
    426,
    425,
    423,
    422,
    421,
    420,
    419,
    418,
    417,
    415,
    414,
    413,
    412,
    411,
    409,
    408,
    407,
    405,
    404,
    403,
    401,
    400,
    399,
    397,
    396,
    395,
    393,
    392,
    391,
    389,
    388,
    386,
    385,
    384,
    382,
    381,
    379,
    378,
    376,
    375,
    374,
    372,
    371,
    370,
    368,
    367,
    366,
    364,
    363,
    362,
    360,
    359,
    358,
    356,
    355,
    354,
    353,
    352,
    350,
    349,
    348,
    347,
    346,
    345,
    344,
    342,
    341,
    340,
    339,
    338,
    337,
    336,
    335,
    334,
    333,
    332,
    332,
    331,
    330,
    329,
    328,
    327,
    326,
    326,
    325,
    324,
    323,
    322,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    317,
    316,
    451,
    450,
    450,
    449,
    448,
    448,
    447,
    446,
    445,
    445,
    444,
    443,
    442,
    442,
    441,
    440,
    439,
    438,
    437,
    437,
    436,
    435,
    434,
    433,
    432,
    431,
    430,
    429,
    428,
    427,
    426,
    425,
    424,
    423,
    422,
    421,
    420,
    418,
    417,
    416,
    415,
    414,
    413,
    411,
    410,
    409,
    408,
    406,
    405,
    404,
    402,
    401,
    400,
    399,
    397,
    396,
    394,
    393,
    392,
    390,
    389,
    388,
    386,
    385,
    384,
    382,
    381,
    379,
    378,
    377,
    375,
    374,
    373,
    371,
    370,
    368,
    367,
    366,
    365,
    363,
    362,
    361,
    359,
    358,
    357,
    356,
    354,
    353,
    352,
    351,
    350,
    349,
    347,
    346,
    345,
    344,
    343,
    342,
    341,
    340,
    339,
    338,
    337,
    336,
    335,
    334,
    333,
    332,
    331,
    330,
    330,
    329,
    328,
    327,
    326,
    325,
    325,
    324,
    323,
    322,
    322,
    321,
    320,
    320,
    319,
    318,
    317,
    317,
    450,
    449,
    449,
    448,
    448,
    447,
    446,
    445,
    445,
    444,
    443,
    442,
    442,
    441,
    440,
    439,
    438,
    438,
    437,
    436,
    435,
    434,
    433,
    432,
    431,
    430,
    430,
    429,
    428,
    427,
    426,
    424,
    423,
    422,
    421,
    420,
    419,
    418,
    417,
    416,
    415,
    413,
    412,
    411,
    410,
    408,
    407,
    406,
    405,
    403,
    402,
    401,
    400,
    398,
    397,
    396,
    394,
    393,
    392,
    390,
    389,
    388,
    386,
    385,
    384,
    382,
    381,
    379,
    378,
    377,
    375,
    374,
    373,
    371,
    370,
    369,
    367,
    366,
    365,
    364,
    362,
    361,
    360,
    359,
    357,
    356,
    355,
    354,
    352,
    351,
    350,
    349,
    348,
    347,
    346,
    345,
    344,
    343,
    341,
    340,
    339,
    338,
    337,
    337,
    336,
    335,
    334,
    333,
    332,
    331,
    330,
    329,
    329,
    328,
    327,
    326,
    325,
    325,
    324,
    323,
    322,
    322,
    321,
    320,
    320,
    319,
    318,
    318,
    449,
    449,
    448,
    448,
    447,
    446,
    445,
    445,
    444,
    443,
    443,
    442,
    441,
    440,
    439,
    439,
    438,
    437,
    436,
    435,
    434,
    434,
    433,
    432,
    431,
    430,
    429,
    428,
    427,
    426,
    425,
    424,
    423,
    422,
    421,
    420,
    419,
    417,
    416,
    415,
    414,
    413,
    412,
    411,
    409,
    408,
    407,
    406,
    404,
    403,
    402,
    401,
    399,
    398,
    397,
    395,
    394,
    393,
    391,
    390,
    389,
    388,
    386,
    385,
    384,
    382,
    381,
    379,
    378,
    377,
    376,
    374,
    373,
    372,
    370,
    369,
    368,
    366,
    365,
    364,
    363,
    361,
    360,
    359,
    358,
    356,
    355,
    354,
    353,
    352,
    351,
    350,
    348,
    347,
    346,
    345,
    344,
    343,
    342,
    341,
    340,
    339,
    338,
    337,
    336,
    335,
    334,
    333,
    333,
    332,
    331,
    330,
    329,
    328,
    328,
    327,
    326,
    325,
    324,
    324,
    323,
    322,
    322,
    321,
    320,
    320,
    319,
    318,
    449,
    448,
    448,
    447,
    446,
    445,
    445,
    444,
    443,
    443,
    442,
    441,
    440,
    440,
    439,
    438,
    437,
    436,
    436,
    435,
    434,
    433,
    432,
    431,
    430,
    429,
    428,
    427,
    426,
    425,
    424,
    423,
    422,
    421,
    420,
    419,
    418,
    417,
    416,
    415,
    414,
    412,
    411,
    410,
    409,
    408,
    407,
    405,
    404,
    403,
    402,
    400,
    399,
    398,
    397,
    395,
    394,
    393,
    391,
    390,
    389,
    387,
    386,
    385,
    384,
    382,
    381,
    380,
    378,
    377,
    376,
    374,
    373,
    372,
    370,
    369,
    368,
    367,
    365,
    364,
    363,
    362,
    360,
    359,
    358,
    357,
    356,
    355,
    353,
    352,
    351,
    350,
    349,
    348,
    347,
    346,
    345,
    344,
    343,
    342,
    341,
    340,
    339,
    338,
    337,
    336,
    335,
    334,
    333,
    332,
    331,
    331,
    330,
    329,
    328,
    327,
    327,
    326,
    325,
    324,
    324,
    323,
    322,
    322,
    321,
    320,
    320,
    319,
    448,
    448,
    447,
    446,
    446,
    445,
    444,
    443,
    443,
    442,
    441,
    440,
    440,
    439,
    438,
    437,
    437,
    436,
    435,
    434,
    433,
    432,
    431,
    431,
    430,
    429,
    428,
    427,
    426,
    425,
    424,
    423,
    422,
    421,
    420,
    419,
    418,
    416,
    415,
    414,
    413,
    412,
    411,
    410,
    409,
    407,
    406,
    405,
    404,
    403,
    401,
    400,
    399,
    398,
    396,
    395,
    394,
    393,
    391,
    390,
    389,
    387,
    386,
    385,
    384,
    382,
    381,
    380,
    378,
    377,
    376,
    374,
    373,
    372,
    371,
    369,
    368,
    367,
    366,
    364,
    363,
    362,
    361,
    360,
    358,
    357,
    356,
    355,
    354,
    353,
    352,
    351,
    349,
    348,
    347,
    346,
    345,
    344,
    343,
    342,
    341,
    340,
    339,
    338,
    337,
    336,
    336,
    335,
    334,
    333,
    332,
    331,
    330,
    330,
    329,
    328,
    327,
    327,
    326,
    325,
    324,
    324,
    323,
    322,
    321,
    321,
    320,
    320
  ]);
  var LUT_SIZE = 512;
  var ATAN2_SIZE = 128;

  // game/engine/physics/vector.ts
  var FlatVec = class _FlatVec {
    constructor(x, y) {
      this.X = new FixedPoint(0);
      this.Y = new FixedPoint(0);
      this.X.SetFromFp(x);
      this.Y.SetFromFp(y);
    }
    static FromRaw(xRaw, yRaw) {
      const x = new FixedPoint();
      x.SetFromRaw(xRaw);
      const y = new FixedPoint();
      y.SetFromRaw(yRaw);
      return new _FlatVec(x, y);
    }
    static FromNumbers(x, y) {
      return new _FlatVec(new FixedPoint(x), new FixedPoint(y));
    }
  };
  var VertArrayContainsFlatVec = (verts, vecToFind) => {
    return verts.some((v) => v.X.Equals(vecToFind.X) && v.Y.Equals(vecToFind.Y));
  };
  var Line = class _Line {
    constructor(x1, y1, x2, y2) {
      this.x1 = new FixedPoint();
      this.y1 = new FixedPoint();
      this.x2 = new FixedPoint();
      this.y2 = new FixedPoint();
      this.x1.SetFromFp(x1);
      this.y1.SetFromFp(y1);
      this.x2.SetFromFp(x2);
      this.y2.SetFromFp(y2);
    }
    static FromNumbers(x1, y1, x2, y2) {
      return new _Line(
        new FixedPoint(x1),
        new FixedPoint(y1),
        new FixedPoint(x2),
        new FixedPoint(y2)
      );
    }
    get X1() {
      return this.x1;
    }
    get Y1() {
      return this.y1;
    }
    get X2() {
      return this.x2;
    }
    get Y2() {
      return this.y2;
    }
    set X1(val) {
      this.x1.SetFromFp(val);
    }
    set Y1(val) {
      this.y1.SetFromFp(val);
    }
    set X2(val) {
      this.x2.SetFromFp(val);
    }
    set Y2(val) {
      this.y2.SetFromFp(val);
    }
  };

  // game/engine/utils.ts
  var ONE2 = NumberToRaw(1);
  var TWO2 = NumberToRaw(2);
  function FillArrayWithFlatVec(fvArr) {
    for (let index = 0; index < fvArr.length; index++) {
      fvArr[index] = new FlatVec(new FixedPoint(), new FixedPoint());
    }
  }
  function ClampWithMin(value, min, max) {
    if (value < min) {
      return min;
    }
    if (value > max) {
      return max;
    }
    return value;
  }
  function Lerp(start2, end, alpha) {
    return start2 + (end - start2) * alpha;
  }
  function EaseInRaw(tRaw) {
    return MultiplyRaw(tRaw, tRaw);
  }
  var Sequencer = class {
    constructor(step) {
      this.seq = 0;
      if (step !== void 0) {
        this.step = step;
        return;
      }
      this.step = (seq2) => {
        return seq2 + 1;
      };
    }
    set SeqStart(val) {
      this.seq = val;
    }
    get Next() {
      const ret = this.seq;
      const next = this.step(this.seq);
      this.seq = next;
      return ret;
    }
  };
  function ToFp(num) {
    return new FixedPoint(num);
  }
  function ToFV(x, y) {
    return new FlatVec(ToFp(x), ToFp(y));
  }
  function GetAtan2IndexRaw(yRaw, xRaw) {
    if (xRaw === 0 && yRaw === 0) {
      return 0;
    }
    const xF = -RawToNumber(xRaw);
    const yF = -RawToNumber(yRaw);
    const atan2SizeHalf = ATAN2_SIZE / 2;
    let xLut = Math.floor(xF * atan2SizeHalf + atan2SizeHalf);
    let yLut = Math.floor(yF * atan2SizeHalf + atan2SizeHalf);
    xLut = Math.max(0, Math.min(ATAN2_SIZE - 1, xLut));
    yLut = Math.max(0, Math.min(ATAN2_SIZE - 1, yLut));
    const lutIndex = yLut * ATAN2_SIZE + xLut;
    return ATAN2_LUT[lutIndex] % LUT_SIZE;
  }

  // game/engine/pools/ActiveGrabBubbles.ts
  var ActiveGrabBubblesDTO = class {
    constructor() {
      this.bubbles = [];
    }
    AddBubble(bub) {
      this.bubbles.push(bub);
      return this;
    }
    AtIndex(index) {
      return this.bubbles[index];
    }
    get Bubbles() {
      return this.bubbles;
    }
    get Length() {
      return this.bubbles.length;
    }
    Zero() {
      this.bubbles.length = 0;
    }
  };

  // game/engine/finite-state-machine/stateConfigurations/shared.ts
  var seq = new Sequencer();
  seq.SeqStart = 0;
  var GAME_EVENTS = class {
    constructor() {
      this.UP_SPCL_GE = seq.Next;
      this.DOWN_SPCL_GE = seq.Next;
      this.SIDE_SPCL_GE = seq.Next;
      this.SIDE_SPCL_EX_GE = seq.Next;
      this.SPCL_GE = seq.Next;
      this.UP_ATTACK_GE = seq.Next;
      this.DOWN_ATTACK_GE = seq.Next;
      this.SIDE_ATTACK_GE = seq.Next;
      this.SIDE_CHARGE_GE = seq.Next;
      this.SIDE_CHARGE_EX_GE = seq.Next;
      this.UP_CHARGE_GE = seq.Next;
      this.UP_CHARGE_EX_GE = seq.Next;
      this.DOWN_CHARGE_GE = seq.Next;
      this.DOWN_CHARGE_EX_GE = seq.Next;
      this.ATTACK_GE = seq.Next;
      this.DASH_ATTACK_GE = seq.Next;
      this.D_TILT_GE = seq.Next;
      this.S_TILT_GE = seq.Next;
      this.S_TILT_U_GE = seq.Next;
      this.S_TILT_D_GE = seq.Next;
      this.U_TILT_GE = seq.Next;
      this.N_AIR_GE = seq.Next;
      this.F_AIR_GE = seq.Next;
      this.B_AIR_GE = seq.Next;
      this.U_AIR_GE = seq.Next;
      this.D_AIR_GE = seq.Next;
      this.S_SPCL_AIR_GE = seq.Next;
      this.S_SPCL_EX_AIR_GE = seq.Next;
      this.U_SPCL_AIR_GE = seq.Next;
      this.D_SPCL_AIR_GE = seq.Next;
      this.IDLE_GE = seq.Next;
      this.MOVE_GE = seq.Next;
      this.MOVE_FAST_GE = seq.Next;
      this.JUMP_GE = seq.Next;
      this.GRAB_GE = seq.Next;
      this.RUN_GRAB_GE = seq.Next;
      this.SPCL_GRAB_GE = seq.Next;
      this.GUARD_GE = seq.Next;
      this.UP_GE = seq.Next;
      this.DOWN_GE = seq.Next;
      // End of GameEvents that can be sourced from player input
      this.LAND_GE = seq.Next;
      this.SOFT_LAND_GE = seq.Next;
      this.FALL_GE = seq.Next;
      this.LEDGE_GRAB_GE = seq.Next;
      this.HIT_STOP_GE = seq.Next;
      this.GRAB_HELD_GE = seq.Next;
      this.GRAB_HOLD_GE = seq.Next;
      this.GRAB_RELEASE_GE = seq.Next;
      this.GRAB_ESCAPE_GE = seq.Next;
      this.LAUNCH_GE = seq.Next;
      this.TUBMLE_GE = seq.Next;
      this.SHIELD_BREAK_GE = seq.Next;
    }
  };
  var GAME_EVENT_IDS = new GAME_EVENTS();
  seq.SeqStart = 0;
  var STATES = class {
    constructor() {
      this.IDLE_S = seq.Next;
      this.TURN_S = seq.Next;
      this.WALK_S = seq.Next;
      this.DASH_S = seq.Next;
      this.DASH_TURN_S = seq.Next;
      this.STOP_RUN_S = seq.Next;
      this.RUN_TURN_S = seq.Next;
      this.STOP_RUN_TURN_S = seq.Next;
      this.RUN_S = seq.Next;
      this.JUMP_SQUAT_S = seq.Next;
      this.JUMP_S = seq.Next;
      this.N_FALL_S = seq.Next;
      this.LAND_S = seq.Next;
      this.SOFT_LAND_S = seq.Next;
      this.LEDGE_GRAB_S = seq.Next;
      this.AIR_DODGE_S = seq.Next;
      this.HELPLESS_S = seq.Next;
      this.ATTACK_S = seq.Next;
      this.SIDE_CHARGE_S = seq.Next;
      this.SIDE_CHARGE_EX_S = seq.Next;
      this.DOWN_CHARGE_S = seq.Next;
      this.DOWN_CHARGE_EX_S = seq.Next;
      this.UP_CHARGE_S = seq.Next;
      this.UP_CHARGE_EX_S = seq.Next;
      this.DASH_ATTACK_S = seq.Next;
      this.DOWN_TILT_S = seq.Next;
      this.SIDE_TILT_S = seq.Next;
      this.UP_TILT_S = seq.Next;
      this.N_AIR_S = seq.Next;
      this.F_AIR_S = seq.Next;
      this.B_AIR_S = seq.Next;
      this.U_AIR_S = seq.Next;
      this.D_AIR_S = seq.Next;
      this.SPCL_S = seq.Next;
      this.SIDE_SPCL_S = seq.Next;
      this.SIDE_SPCL_EX_S = seq.Next;
      this.SIDE_SPCL_AIR_S = seq.Next;
      this.SIDE_SPCL_EX_AIR_S = seq.Next;
      this.DOWN_SPCL_S = seq.Next;
      this.DOWN_SPCL_AIR_S = seq.Next;
      this.UP_SPCL_S = seq.Next;
      this.HIT_STOP_S = seq.Next;
      this.LAUNCH_S = seq.Next;
      this.TUMBLE_S = seq.Next;
      this.CROUCH_S = seq.Next;
      this.SHIELD_RAISE_S = seq.Next;
      this.SHIELD_S = seq.Next;
      this.SHIELD_DROP_S = seq.Next;
      this.SHIELD_BREAK_S = seq.Next;
      this.SHIELD_BREAK_TUMBLE_S = seq.Next;
      this.SHIELD_BREAK_LAND_S = seq.Next;
      this.DIZZY_S = seq.Next;
      this.SPOT_DODGE_S = seq.Next;
      this.ROLL_DODGE_S = seq.Next;
      this.GRAB_S = seq.Next;
      this.RUN_GRAB_S = seq.Next;
      this.SPCL_GRAB_S = seq.Next;
      this.GRAB_HOLD_S = seq.Next;
      this.GRAB_HELD_S = seq.Next;
      this.GRAB_RELEASE_S = seq.Next;
      this.GRAB_ESCAPE_S = seq.Next;
      this.LEDGE_RECOVER_S = seq.Next;
      this.LEDGE_GUA_S = seq.Next;
    }
  };
  var STATE_IDS = new STATES();
  seq.SeqStart = 0;
  var ATTACKS = class {
    constructor() {
      this.N_GRND_ATK = seq.Next;
      this.S_GRND_ATK = seq.Next;
      this.U_GRND_ATK = seq.Next;
      this.D_GRND_ATK = seq.Next;
      this.S_CHARGE_ATK = seq.Next;
      this.S_CHARGE_EX_ATK = seq.Next;
      this.U_CHARGE_ATK = seq.Next;
      this.U_CHARGE_EX_ATK = seq.Next;
      this.D_CHARGE_ATK = seq.Next;
      this.D_CHARGE_EX_ATK = seq.Next;
      this.S_TILT_ATK = seq.Next;
      this.S_TILT_U_ATK = seq.Next;
      this.S_TITL_D_ATK = seq.Next;
      this.U_TILT_ATK = seq.Next;
      this.D_TILT_ATK = seq.Next;
      this.DASH_ATK = seq.Next;
      this.N_AIR_ATK = seq.Next;
      this.F_AIR_ATK = seq.Next;
      this.B_AIR_ATK = seq.Next;
      this.U_AIR_ATK = seq.Next;
      this.D_AIR_ATK = seq.Next;
      this.N_SPCL_ATK = seq.Next;
      this.S_SPCL_ATK = seq.Next;
      this.S_SPCL_EX_ATK = seq.Next;
      this.S_SPCL_AIR_ATK = seq.Next;
      this.S_SPCL_EX_AIR_ATK = seq.Next;
      this.U_SPCL_ATK = seq.Next;
      this.D_SPCL_ATK = seq.Next;
      this.D_SPCL_AIR_ATK = seq.Next;
      this.LEDGE_GU_ATK = seq.Next;
      this.LEDGE_ATK = seq.Next;
    }
  };
  var ATTACK_IDS = new ATTACKS();
  seq.SeqStart = 0;
  var GRABS = class {
    constructor() {
      this.GRAB_G = seq.Next;
      this.RUN_GRAB_G = seq.Next;
      this.SPCL_GRAB_G = seq.Next;
    }
  };
  var GRAB_IDS = new GRABS();
  var StateIdToNameMap = /* @__PURE__ */ new Map();
  Object.entries(STATE_IDS).forEach(([key, value]) => {
    StateIdToNameMap.set(value, key);
  });
  var AttackIdToNameMap = /* @__PURE__ */ new Map();
  Object.entries(ATTACK_IDS).forEach(([key, value]) => {
    AttackIdToNameMap.set(value, key);
  });
  var GrabIdToNameMap = /* @__PURE__ */ new Map();
  Object.entries(GRAB_IDS).forEach(([key, value]) => {
    GrabIdToNameMap.set(value, key);
  });
  function CanStateWalkOffLedge(stateId) {
    switch (stateId) {
      case STATE_IDS.IDLE_S:
      case STATE_IDS.WALK_S:
      case STATE_IDS.RUN_TURN_S:
      case STATE_IDS.STOP_RUN_S:
      case STATE_IDS.DASH_ATTACK_S:
      case STATE_IDS.ATTACK_S:
      case STATE_IDS.SIDE_TILT_S:
      case STATE_IDS.UP_TILT_S:
      case STATE_IDS.DOWN_TILT_S:
      case STATE_IDS.SIDE_CHARGE_S:
      case STATE_IDS.SIDE_CHARGE_EX_S:
      case STATE_IDS.UP_CHARGE_S:
      case STATE_IDS.UP_CHARGE_EX_S:
      case STATE_IDS.CROUCH_S:
      case STATE_IDS.LEDGE_GRAB_S:
      case STATE_IDS.ROLL_DODGE_S:
      case STATE_IDS.SPOT_DODGE_S:
      case STATE_IDS.GRAB_S:
      case STATE_IDS.TURN_S:
      case STATE_IDS.DASH_S:
      case STATE_IDS.DOWN_CHARGE_S:
      case STATE_IDS.DOWN_CHARGE_EX_S:
        return false;
      default:
        return true;
    }
  }

  // game/engine/debug/debugUtils.ts
  var Player_State = "Player State:";
  var Position = "Position:";
  var Velocity = "Velocity:";
  var Frame = "Frame:";
  var State = "State:";
  var State_Id = "State Id:";
  var Name = "Name:";
  var Direction = "Direction:";
  var LeftLabel = "Left:";
  var RightLabel = "Right:";
  var Left = "Left";
  var Right = "Right";
  var ECB = "ECB:";
  var Top = "Top:";
  var Bottom = "Bottom:";
  var Damage = "Damage:";
  var HitStun = "HitStun:";
  var X = "X:";
  var Y = "Y:";
  var Vx = "Vx:";
  var Vy = "Vy:";
  var T = "T";
  var F = "F";
  var Flags = "Flags:";
  var FastFalling = "FastFalling:";
  var VelocityDecay = "VelocityDecay:";
  var HitPauseFrames = "HitPauseFrames:";
  var IntangabilityFrames = "IntangabilityFrames:";
  var PlatFormDetection = "PlatFormDetection:";
  var Jump = "Jump:";
  var Count = "Count:";
  var Grab = "Grab:";
  var GrabIdLabel = "GrabId:";
  var GrabIdName = "GrabIdName:";
  var GrabConfigName = "GrabConfigName:";
  var GrabMeter = "GrabMeter:";
  var Meter = "Meter:";
  var HoldingPlayerId = "HoldingPlayerId:";
  var AttackConfigName = "AttackConfigName:";
  var AttackIdName = "AttackIdName:";
  var PlayersHit = "Player Ids Hit:";
  var CurrentRadius = "CurrentRadius:";
  var Active = "Active";
  var Tilt = "Tilt:";
  var Middle = "Middle:";
  var ledgeGrabCount = "LedgeGrabCount:";
  var Radius = "Radius:";
  var Sensors = "Sensors:";
  var Shield = "Shield:";
  var LedgeDetector = "LedgeDetector:";
  var Attack = "Attack:";
  function StructurePlayerSnapShotForPrinting(ps) {
    const root = {
      kind: 2,
      label: Player_State,
      data: [
        stateNode(ps),
        positionNode(ps),
        velocityNode(ps),
        directionNode(ps),
        ecbNode(ps),
        damageNode(ps),
        hitStunNode(ps),
        flagsNode(ps),
        jumpNode(ps),
        ledgeDetectorNode(ps),
        shieldNode(ps),
        grabNode(ps),
        grabMeterNode(ps),
        attackNode(ps),
        sensorsNode(ps)
      ]
    };
    return root;
  }
  function positionNode(ps) {
    return {
      kind: 2,
      label: Position,
      data: [
        {
          kind: 1,
          label: X,
          data: ps.Position.X
        },
        {
          kind: 1,
          label: Y,
          data: ps.Position.Y
        }
      ]
    };
  }
  function velocityNode(ps) {
    return {
      kind: 2,
      label: Velocity,
      data: [
        {
          kind: 1,
          label: Vx,
          data: ps.Velocity.X
        },
        {
          kind: 1,
          label: Vy,
          data: ps.Velocity.Y
        }
      ]
    };
  }
  function stateNode(ps) {
    return {
      kind: 2,
      label: State,
      data: [
        {
          kind: 1,
          label: State_Id,
          data: ps.FSMInfo.State.StateId
        },
        {
          kind: 1,
          label: Name,
          data: GetStateName(ps.FSMInfo.State.StateId)
        },
        {
          kind: 1,
          label: Frame,
          data: ps.FSMInfo.StateFrame
        }
      ]
    };
  }
  function directionNode(ps) {
    return {
      kind: 1,
      label: Direction,
      data: ps.Flags.FacingRight ? Right : Left
    };
  }
  function ecbNode(ps) {
    return {
      kind: 2,
      label: ECB,
      data: [
        {
          kind: 2,
          label: Top,
          data: [
            {
              kind: 1,
              label: X,
              data: ps.Ecb.posX
            },
            {
              kind: 1,
              label: Y,
              data: ps.Ecb.posY + ps.Ecb.ecbShape.yOffset.AsNumber + ps.Ecb.ecbShape.height.AsNumber
            }
          ]
        },
        {
          kind: 2,
          label: Bottom,
          data: [
            {
              kind: 1,
              label: X,
              data: ps.Ecb.posX
            },
            {
              kind: 1,
              label: Y,
              data: ps.Ecb.posY + ps.Ecb.ecbShape.yOffset.AsNumber
            }
          ]
        },
        {
          kind: 2,
          label: LeftLabel,
          data: [
            {
              kind: 1,
              label: X,
              data: ps.Ecb.posX - ps.Ecb.ecbShape.width.AsNumber / 2
            },
            {
              kind: 1,
              label: Y,
              data: ps.Ecb.posY + (ps.Ecb.ecbShape.yOffset.AsNumber + ps.Ecb.ecbShape.height.AsNumber) / 2
            }
          ]
        },
        {
          kind: 2,
          label: RightLabel,
          data: [
            {
              kind: 1,
              label: X,
              data: ps.Ecb.posX + ps.Ecb.ecbShape.width.AsNumber / 2
            },
            {
              kind: 1,
              label: Y,
              data: ps.Ecb.posY + (ps.Ecb.ecbShape.yOffset.AsNumber + ps.Ecb.ecbShape.height.AsNumber) / 2
            }
          ]
        }
      ]
    };
  }
  function damageNode(ps) {
    return {
      kind: 1,
      label: Damage,
      data: ps.Damage.damagePoints
    };
  }
  function hitStunNode(ps) {
    return {
      kind: 2,
      label: HitStun,
      data: [
        {
          kind: 1,
          label: Frame,
          data: ps.PlayerHitStun.hitStunFrames
        },
        {
          kind: 1,
          label: Vx,
          data: ps.PlayerHitStun.vx
        },
        {
          kind: 1,
          label: Vy,
          data: ps.PlayerHitStun.vy
        }
      ]
    };
  }
  function flagsNode(ps) {
    return {
      kind: 2,
      label: Flags,
      data: [
        {
          kind: 1,
          label: FastFalling,
          data: ps.Flags.FastFalling ? T : F
        },
        {
          kind: 1,
          label: VelocityDecay,
          data: ps.Flags.VeloctyDecay ? T : F
        },
        {
          kind: 1,
          label: HitPauseFrames,
          data: ps.Flags.HitPauseFrames
        },
        {
          kind: 1,
          label: IntangabilityFrames,
          data: ps.Flags.IntangabilityFrames
        },
        {
          kind: 1,
          label: PlatFormDetection,
          data: ps.Flags.DisablePlatDetection
        }
      ]
    };
  }
  function jumpNode(ps) {
    return {
      kind: 2,
      label: Jump,
      data: [
        {
          kind: 1,
          label: Count,
          data: ps.Jump
        }
      ]
    };
  }
  function grabNode(ps) {
    return {
      kind: 2,
      label: Grab,
      data: [
        {
          kind: 1,
          label: GrabIdLabel,
          data: ps.Grab?.GrabId ?? ""
        },
        {
          kind: 1,
          label: GrabIdName,
          data: ps.Grab === void 0 ? "" : GetGrabName(ps.Grab.GrabId)
        },
        {
          kind: 1,
          label: GrabConfigName,
          data: ps.Grab === void 0 ? "" : ps.Grab.Name
        }
      ]
    };
  }
  function grabMeterNode(ps) {
    return {
      kind: 2,
      label: GrabMeter,
      data: [
        {
          kind: 1,
          label: Meter,
          data: ps.GrabMeter.meter
        },
        {
          kind: 1,
          label: HoldingPlayerId,
          data: ps.GrabMeter.holdingPlayerId ?? ""
        }
      ]
    };
  }
  function attackNode(ps) {
    return {
      kind: 2,
      label: Attack,
      data: [
        {
          kind: 1,
          label: AttackConfigName,
          data: ps.Attack.attack === void 0 ? "" : ps.Attack.attack.Name
        },
        {
          kind: 1,
          label: AttackIdName,
          data: ps.Attack.attack === void 0 ? "" : GetAttackName(ps.Attack.attack.AttackId)
        },
        {
          kind: 1,
          label: PlayersHit,
          data: ps.Attack.playersHit === void 0 ? "" : ps.Attack.playersHit.toString()
        }
      ]
    };
  }
  function shieldNode(ps) {
    return {
      kind: 2,
      label: Shield,
      data: [
        {
          kind: 1,
          label: CurrentRadius,
          data: ps.Shield.CurrentRadius
        },
        {
          kind: 1,
          label: Active,
          data: ps.Shield.Active ? T : F
        },
        {
          kind: 2,
          label: Tilt,
          data: [
            {
              kind: 1,
              label: X,
              data: ps.Shield.ShieldTiltX
            },
            {
              kind: 1,
              label: Y,
              data: ps.Shield.ShieldTiltY
            }
          ]
        }
      ]
    };
  }
  function ledgeDetectorNode(ps) {
    return {
      kind: 2,
      label: LedgeDetector,
      data: [
        {
          kind: 2,
          label: Middle,
          data: [
            {
              kind: 1,
              label: X,
              data: ps.LedgeDetector.middleX
            },
            {
              kind: 1,
              label: Y,
              data: ps.LedgeDetector.middleY
            }
          ]
        },
        {
          kind: 1,
          label: ledgeGrabCount,
          data: ps.LedgeDetector.numberOfLedgeGrabs
        }
      ]
    };
  }
  function sensorsNode(ps) {
    const r = {
      kind: 2,
      label: Sensors,
      data: []
    };
    if (ps.Sensors.sensors === void 0 || ps.Sensors.sensors.length === 0) {
      return r;
    }
    const sensorLength = ps.Sensors.sensors.length;
    for (let i = 0; i < sensorLength; i++) {
      const s = ps.Sensors.sensors[i];
      r.data.push({
        kind: 2,
        label: i.toString(),
        data: [
          {
            kind: 1,
            label: Radius,
            data: s.radius
          },
          {
            kind: 1,
            label: X,
            data: s.xOffset + ps.Position.X
          },
          {
            kind: 1,
            label: Y,
            data: s.yOffset + ps.Position.Y
          }
        ]
      });
    }
    return r;
  }
  function GetStateName(sId) {
    return StateIdToNameMap.get(sId);
  }
  function GetGrabName(gId) {
    return GrabIdToNameMap.get(gId);
  }
  function GetAttackName(atkId) {
    return AttackIdToNameMap.get(atkId);
  }

  // game/render/debug-2d.ts
  function getAlpha(timeStampNow, lastFrame, localFrame, previousFrameTimeStamp, currentFrameTimeStamp) {
    const preClampAlpha = (timeStampNow - previousFrameTimeStamp) / (currentFrameTimeStamp - previousFrameTimeStamp);
    const postClampalpha = Math.max(0, Math.min(1, preClampAlpha));
    let alpha = preClampAlpha - postClampalpha;
    if (localFrame === lastFrame || alpha > 1) {
      alpha = 1;
    }
    return alpha;
  }
  var DebugRenderer = class {
    constructor(mainWindow, debugInfoWindow) {
      this.lastFrame = 0;
      this.PlayerDeBugInfo = false;
      this.canvas = mainWindow.canvas;
      this.xRes = mainWindow.resX;
      this.yRes = mainWindow.resY;
      this.debugInfoCanvas = debugInfoWindow.canvas;
      this.ctx = mainWindow.canvas.getContext("2d");
      this.dbICtx = debugInfoWindow.canvas.getContext("2d");
      this.dbxRes = debugInfoWindow.resX;
      this.dbyRes = debugInfoWindow.resY;
      this.canvas.width = this.xRes;
      this.canvas.height = this.yRes;
      this.debugInfoCanvas.width = this.dbxRes;
      this.debugInfoCanvas.height = this.dbyRes;
    }
    render(jazz, timeStampNow) {
      const world = jazz.World;
      const localFrame = world.LocalFrame - 1 < 0 ? 0 : world.LocalFrame - 1;
      const previousFrameTimeStamp = world.GetFrameTimeStampForFrame(
        localFrame === 0 ? 0 : localFrame - 1
      );
      const currentFrameTimeStamp = world.GetFrameTimeStampForFrame(localFrame);
      const alpha = getAlpha(
        timeStampNow,
        this.lastFrame,
        localFrame,
        previousFrameTimeStamp,
        currentFrameTimeStamp
      );
      if (localFrame === 0) {
        return;
      }
      const ctx = this.ctx;
      ctx.fillStyle = "grey";
      ctx.fillRect(0, 0, this.xRes, this.yRes);
      drawStage(ctx, world);
      drawPlatforms(ctx, world.StageData.Stage.Platforms);
      drawPlayer(ctx, world, alpha);
      const frameTime = world.GetFrameTimeForFrame(localFrame);
      ctx.fillStyle = "darkblue";
      ctx.fillText(`Frame: ${localFrame}`, 10, 30);
      ctx.fillText(`FrameTime: ${frameTime}`, 10, 60);
      ctx.fillText(
        `VectorsRented: ${world.GetRentedVecsForFrame(localFrame)}`,
        10,
        90
      );
      ctx.fillText(
        `CollisionResultsRented: ${world.GetRentedColResForFrame(localFrame)}`,
        10,
        120
      );
      ctx.fillText(
        `ProjectionReultsRented: ${world.GetRentedProjResForFrame(localFrame)}`,
        10,
        150
      );
      ctx.fillText(
        `ATKReultsRented: ${world.GetRentedAtkResForFrame(localFrame)}`,
        10,
        180
      );
      ctx.fillText(
        `ActiveHitBubblesRented: ${world.GetRentedActiveHitBubblesForFrame(
          localFrame
        )}`,
        10,
        210
      );
      ctx.fillText(
        `ClosestPointsRented: ${world.GetRentedClosestPointsForFrame(
          localFrame
        )}`,
        10,
        240
      );
      ctx.fillText(
        `ECBDiamondDTOsRented: ${world.GetRentedECBDtosForFrame(localFrame)}`,
        10,
        270
      );
      if (this.PlayerDeBugInfo) {
        this.renderLiveDebugInfo(jazz);
      }
      this.lastFrame = localFrame;
    }
    renderLiveDebugInfo(jazz) {
      this.dbICtx.fillStyle = "black";
      this.dbICtx.fillRect(0, 0, this.dbxRes, this.dbyRes);
      const pdbs = jazz.playerDebuggers;
      const dbL = pdbs.length;
      let x = 10;
      const y = 30;
      for (let i = 0; i < dbL; i++) {
        const pdb = pdbs[i];
        const root = StructurePlayerSnapShotForPrinting(pdb.LiveStateData);
        PrintDataTreeRoot(x, y, root, this.dbICtx);
        x += 200;
      }
    }
  };
  function drawStage(ctx, world) {
    const stage = world.StageData.Stage;
    const stageVerts = stage.StageVerticies.GetVerts();
    const color = "green";
    const stageVertsLength = stageVerts.length;
    ctx.beginPath();
    ctx.moveTo(stageVerts[0].X.AsNumber, stageVerts[0].Y.AsNumber);
    for (let i = 0; i < stageVertsLength; i++) {
      ctx.lineTo(stageVerts[i].X.AsNumber, stageVerts[i].Y.AsNumber);
    }
    ctx.closePath();
    ctx.fillStyle = color;
    ctx.fill();
    const lLedge = stage.Ledges.GetLeftLedge();
    const rLedge = stage.Ledges.GetRightLedge();
    ctx.fillStyle = "yellow";
    ctx.beginPath();
    ctx.moveTo(lLedge[0].X.AsNumber, lLedge[0].Y.AsNumber);
    for (let i = 0; i < lLedge.length; i++) {
      ctx.lineTo(lLedge[i].X.AsNumber, lLedge[i].Y.AsNumber);
    }
    ctx.closePath();
    ctx.fill();
    ctx.beginPath();
    ctx.moveTo(rLedge[0].X.AsNumber, rLedge[0].Y.AsNumber);
    for (let i = 0; i < rLedge.length; i++) {
      ctx.lineTo(rLedge[i].X.AsNumber, rLedge[i].Y.AsNumber);
    }
    ctx.closePath();
    ctx.fill();
  }
  function drawPlatforms(ctx, plats) {
    if (plats === void 0 || plats.length === 0) {
      return;
    }
    const color = "white";
    const platsLength = plats.length;
    ctx.strokeStyle = color;
    ctx.lineWidth = 5;
    for (let i = 0; i < platsLength; i++) {
      const plat = plats[i];
      ctx.beginPath();
      ctx.moveTo(plat.X1.AsNumber, plat.Y1.AsNumber);
      ctx.lineTo(plat.X2.AsNumber, plat.Y2.AsNumber);
      ctx.closePath();
      ctx.stroke();
    }
  }
  function drawPlayer(ctx, world, alpha) {
    const playerCount = world.PlayerData.PlayerCount;
    const currentFrame = world.LocalFrame - 1;
    const lastFrame = currentFrame < 1 ? 0 : currentFrame - 1;
    const theFrameBeforeLast = lastFrame < 1 ? 0 : lastFrame - 1;
    for (let i = 0; i < playerCount; i++) {
      const playerHistory = world.GetComponentHistory(i);
      const shield = playerHistory.ShieldHistory[currentFrame];
      const lastShield = playerHistory.ShieldHistory[lastFrame];
      const shieldYOffset = playerHistory.BaseConfigValues.ShieldOffset;
      const pos = playerHistory.PositionHistory[currentFrame];
      const lastPos = playerHistory.PositionHistory[lastFrame];
      const lastLastPosition = playerHistory.PositionHistory[theFrameBeforeLast];
      const circlesHistory = playerHistory.BaseConfigValues.HurtCapsules;
      const flags = playerHistory.FlagsHistory[currentFrame];
      const lastFlags = playerHistory.FlagsHistory[lastFrame];
      const ecb = playerHistory.EcbHistory[currentFrame];
      const lastEcb = playerHistory.EcbHistory[lastFrame];
      const lD = playerHistory.LedgeDetectorHistory[currentFrame];
      const lastLd = playerHistory.LedgeDetectorHistory[lastFrame];
      const facingRight = flags.FacingRight;
      const lastFacingRight = lastFlags?.FacingRight;
      const isIntangible = flags.IntangabilityFrames > 0;
      const wasIntangible = lastFlags.IntangabilityFrames > 0;
      const intangible = alpha > 0.5 ? isIntangible : wasIntangible;
      const inputStore = world.PlayerData.InputStore(i);
      const input = inputStore.GetInputForFrame(currentFrame);
      drawPrevEcb(ctx, lastEcb, lastLastPosition, lastPos, alpha);
      drawCurrentECB(ctx, ecb, lastPos, pos, alpha);
      drawHurtCircles(
        ctx,
        currentFrame,
        pos,
        lastPos,
        circlesHistory,
        intangible,
        alpha
      );
      drawPositionMarker(ctx, pos, lastPos, alpha);
      const lerpDirection = alpha > 0.5 ? facingRight : lastFacingRight;
      drawDirectionMarker(ctx, lerpDirection, ecb, pos, lastPos, alpha);
      const isShieldActive = alpha > 0.5 ? shield.Active : lastShield.Active;
      if (isShieldActive) {
        drawShield(ctx, input, pos, lastPos, shield, shieldYOffset, alpha);
      }
      drawLedgeDetectors(
        ctx,
        facingRight,
        playerHistory.BaseConfigValues,
        lD,
        lastLd,
        alpha
      );
    }
    for (let i = 0; i < playerCount; i++) {
      const playerHistory = world.GetComponentHistory(i);
      const sensorsWrapper = playerHistory.SensorsHistory[currentFrame];
      const sensors = sensorsWrapper.sensors;
      if (sensors === void 0 || sensors.length === 0) {
        continue;
      }
      const pos = playerHistory.PositionHistory[currentFrame];
      const lastPos = playerHistory.PositionHistory[lastFrame];
      const flags = playerHistory.FlagsHistory[currentFrame];
      drawSensors(ctx, alpha, pos, lastPos, flags, sensorsWrapper);
    }
    for (let i = 0; i < playerCount; i++) {
      const playerHistory = world.GetComponentHistory(i);
      const grab = playerHistory.GrabHistory[currentFrame];
      const fsm = playerHistory.FsmInfoHistory[currentFrame];
      const flags = playerHistory.FlagsHistory[currentFrame];
      const pos = playerHistory.PositionHistory[currentFrame];
      const lastPos = playerHistory.PositionHistory[lastFrame];
      drawGrabCircles(ctx, grab, fsm, flags, pos, lastPos, alpha);
    }
    for (let i = 0; i < playerCount; i++) {
      const playerHistory = world.GetComponentHistory(i);
      const pos = playerHistory.PositionHistory[currentFrame];
      const lastPos = playerHistory.PositionHistory[lastFrame];
      const flags = playerHistory.FlagsHistory[currentFrame];
      const attack = playerHistory.AttackHistory[currentFrame];
      const fsm = playerHistory.FsmInfoHistory[currentFrame];
      drawHitCircles(ctx, attack, fsm, flags, pos, lastPos, alpha);
    }
  }
  function drawSensors(ctx, alpha, curPos, lastPos, flags, sensorsWrapper) {
    ctx.strokeStyle = "white";
    ctx.fillStyle = "white";
    ctx.globalAlpha = 0.4;
    const sensors = sensorsWrapper.sensors;
    const interpolatedX = Lerp(lastPos.X, curPos.X, alpha);
    const interpolatedY = Lerp(lastPos.Y, curPos.Y, alpha);
    const facingRight = flags.FacingRight;
    const sensorLength = sensors.length;
    for (let i = 0; i < sensorLength; i++) {
      const s = sensors[i];
      const x = interpolatedX + (facingRight ? s.xOffset : -s.xOffset);
      const y = interpolatedY + s.yOffset;
      ctx.beginPath();
      ctx.arc(x, y, s.radius, 0, Math.PI * 2);
      ctx.fill();
      ctx.stroke();
      ctx.closePath();
    }
    ctx.globalAlpha = 1;
  }
  function drawShield(ctx, ia, curPosition, lastPosition, shield, shieldYOffset, alpha) {
    const x = Lerp(lastPosition.X, curPosition.X, alpha) + shield.ShieldTiltX;
    const y = Lerp(lastPosition.Y, curPosition.Y, alpha) + shieldYOffset + shield.ShieldTiltY;
    const triggerValue = ia.RTValRaw > ia.LTValRaw ? ia.RTValRaw : ia.LTValRaw;
    const radius = RawToNumber(
      CalculateRadiusFromTriggerRaw(
        triggerValue,
        NumberToRaw(shield.CurrentRadius)
      )
    );
    ctx.strokeStyle = "blue";
    ctx.fillStyle = "blue";
    ctx.globalAlpha = 0.4;
    ctx.beginPath();
    ctx.arc(x, y, radius, 0, Math.PI * 2);
    ctx.fill();
    ctx.stroke();
    ctx.closePath();
    ctx.globalAlpha = 1;
  }
  function drawLedgeDetectors(ctx, facingRight, staticHistory, ledgeDetectorHistory, lastLedgeDetectorHistory, alpha) {
    const ldHeight = staticHistory.LedgeDetectorHeight;
    const ldWidth = staticHistory.LedgeDetectorWidth;
    const curMiddleTopX = ledgeDetectorHistory.middleX;
    const curMiddleTopY = ledgeDetectorHistory.middleY;
    const curTopRightX = ledgeDetectorHistory.middleX + ldWidth;
    const curTopRightY = ledgeDetectorHistory.middleY;
    const curBottomRightX = ledgeDetectorHistory.middleX + ldWidth;
    const curBottomRightY = ledgeDetectorHistory.middleY + ldHeight;
    const curMiddleBottomx = ledgeDetectorHistory.middleX;
    const curMiddleBottomY = ledgeDetectorHistory.middleY + ldHeight;
    const curTopLeftX = ledgeDetectorHistory.middleX - ldWidth;
    const curTopLeftY = ledgeDetectorHistory.middleY;
    const curBottomLeftX = ledgeDetectorHistory.middleX - ldWidth;
    const curBottomLeftY = ledgeDetectorHistory.middleY + ldHeight;
    const lastMiddleTopX = lastLedgeDetectorHistory.middleX;
    const lastMiddleTopY = lastLedgeDetectorHistory.middleY;
    const lastTopRightX = lastLedgeDetectorHistory.middleX + ldWidth;
    const lastTopRightY = lastLedgeDetectorHistory.middleY;
    const lastBottomRightX = lastLedgeDetectorHistory.middleX + ldWidth;
    const lastBottomRightY = lastLedgeDetectorHistory.middleY + ldHeight;
    const lastMiddleBottomx = lastLedgeDetectorHistory.middleX;
    const lastMiddleBottomY = lastLedgeDetectorHistory.middleY + ldHeight;
    const lastTopLeftX = lastLedgeDetectorHistory.middleX - ldWidth;
    const lastTopLeftY = lastLedgeDetectorHistory.middleY;
    const lastBottomLeftX = lastLedgeDetectorHistory.middleX - ldWidth;
    const lastBottomLeftY = lastLedgeDetectorHistory.middleY + ldHeight;
    const middleTopX = Lerp(lastMiddleTopX, curMiddleTopX, alpha);
    const middleTopY = Lerp(lastMiddleTopY, curMiddleTopY, alpha);
    const TopRightX = Lerp(lastTopRightX, curTopRightX, alpha);
    const TopRightY = Lerp(lastTopRightY, curTopRightY, alpha);
    const BottomRightX = Lerp(lastBottomRightX, curBottomRightX, alpha);
    const BottomRightY = Lerp(lastBottomRightY, curBottomRightY, alpha);
    const middleBottomx = Lerp(lastMiddleBottomx, curMiddleBottomx, alpha);
    const middleBottomY = Lerp(lastMiddleBottomY, curMiddleBottomY, alpha);
    const topLeftX = Lerp(lastTopLeftX, curTopLeftX, alpha);
    const topLeftY = Lerp(lastTopLeftY, curTopLeftY, alpha);
    const bottomLeftX = Lerp(lastBottomLeftX, curBottomLeftX, alpha);
    const bottomLeftY = Lerp(lastBottomLeftY, curBottomLeftY, alpha);
    ctx.strokeStyle = "blue";
    if (!facingRight) {
      ctx.strokeStyle = "red";
    }
    ctx.beginPath();
    ctx.moveTo(middleTopX, middleTopY);
    ctx.lineTo(TopRightX, TopRightY);
    ctx.lineTo(BottomRightX, BottomRightY);
    ctx.lineTo(middleBottomx, middleBottomY);
    ctx.closePath();
    ctx.stroke();
    ctx.strokeStyle = "red";
    if (!facingRight) {
      ctx.strokeStyle = "blue";
    }
    ctx.beginPath();
    ctx.moveTo(topLeftX, topLeftY);
    ctx.lineTo(middleTopX, middleTopY);
    ctx.lineTo(middleBottomx, middleBottomY);
    ctx.lineTo(bottomLeftX, bottomLeftY);
    ctx.closePath();
    ctx.stroke();
  }
  function drawDirectionMarker(ctx, facingRight, ecb, pos, lastPos, alpha) {
    ctx.strokeStyle = "white";
    const interpolatedX = Lerp(lastPos.X, pos.X, alpha);
    const interpolatedY = Lerp(lastPos.Y, pos.Y, alpha);
    const height = ecb.ecbShape.height.AsNumber;
    const width = ecb.ecbShape.width.AsNumber;
    const yOffset = ecb.ecbShape.yOffset.AsNumber;
    if (facingRight) {
      const rightX = interpolatedX + width / 2;
      const rightY = interpolatedY + yOffset - height / 2;
      ctx.beginPath();
      ctx.moveTo(rightX, rightY);
      ctx.lineTo(rightX + 10, rightY);
      ctx.stroke();
      ctx.closePath();
    } else {
      const leftX = interpolatedX - width / 2;
      const leftY = interpolatedY + yOffset - height / 2;
      ctx.beginPath();
      ctx.moveTo(leftX, leftY);
      ctx.lineTo(leftX - 10, leftY);
      ctx.stroke();
      ctx.closePath();
    }
  }
  function drawPrevEcb(ctx, lastEcb, lastLastPosition, lastPos, alpha) {
    ctx.fillStyle = "red";
    ctx.lineWidth = 3;
    const interpolatedX = Lerp(lastLastPosition.X, lastPos.X, alpha);
    const interpolatedY = Lerp(lastLastPosition.Y, lastPos.Y, alpha);
    const height = lastEcb.ecbShape.height.AsNumber;
    const width = lastEcb.ecbShape.width.AsNumber;
    const yOffset = lastEcb.ecbShape.yOffset.AsNumber;
    const bottomX = interpolatedX;
    const bottomY = interpolatedY + yOffset;
    const topX = interpolatedX;
    const topY = interpolatedY + yOffset - height;
    const leftX = interpolatedX - width / 2;
    const leftY = interpolatedY + yOffset - height / 2;
    const rightX = interpolatedX + width / 2;
    const rightY = interpolatedY + yOffset - height / 2;
    ctx.strokeStyle = "black";
    ctx.beginPath();
    ctx.moveTo(leftX, leftY);
    ctx.lineTo(topX, topY);
    ctx.lineTo(rightX, rightY);
    ctx.lineTo(bottomX, bottomY);
    ctx.closePath();
    ctx.stroke();
    ctx.fill();
  }
  function drawCurrentECB(ctx, ecb, lasPos, pos, alpha) {
    const interpolatedX = Lerp(lasPos.X, pos.X, alpha);
    const interpolatedY = Lerp(lasPos.Y, pos.Y, alpha);
    const height = ecb.ecbShape.height.AsNumber;
    const width = ecb.ecbShape.width.AsNumber;
    const yOffset = ecb.ecbShape.yOffset.AsNumber;
    const bottomX = interpolatedX;
    const bottomY = interpolatedY + yOffset;
    const topX = interpolatedX;
    const topY = interpolatedY + yOffset - height;
    const leftX = interpolatedX - width / 2;
    const leftY = interpolatedY + yOffset - height / 2;
    const rightX = interpolatedX + width / 2;
    const rightY = interpolatedY + yOffset - height / 2;
    ctx.fillStyle = "orange";
    ctx.strokeStyle = "black";
    ctx.beginPath();
    ctx.moveTo(leftX, leftY);
    ctx.lineTo(topX, topY);
    ctx.lineTo(rightX, rightY);
    ctx.lineTo(bottomX, bottomY);
    ctx.closePath();
    ctx.stroke();
    ctx.fill();
  }
  var adto = new ActiveHitBubblesDTO();
  function drawHitCircles(ctx, attack, fsmInfo, flags, currentPosition, lastPosition, alpha) {
    if (attack.attack === void 0) {
      return;
    }
    adto.Zero();
    const currentSateFrame = fsmInfo.StateFrame;
    const circles = attack.attack.GetActiveBubblesForFrame(
      currentSateFrame,
      adto
    );
    if (circles === void 0) {
      return;
    }
    ctx.strokeStyle = "red";
    ctx.fillStyle = "red";
    ctx.lineWidth = 2;
    ctx.globalAlpha = 0.4;
    const length = circles.Length;
    const interpolatedX = Lerp(lastPosition.X, currentPosition.X, alpha);
    const interpolatedY = Lerp(lastPosition.Y, currentPosition.Y, alpha);
    for (let i = 0; i < length; i++) {
      const circle = circles.AtIndex(i);
      if (circle === void 0) {
        continue;
      }
      const offSet = circle?.GetLocalPosiitionOffsetForFrame(currentSateFrame);
      if (offSet === void 0) {
        continue;
      }
      const offsetX = flags.FacingRight ? interpolatedX + offSet.X.AsNumber : interpolatedX - offSet.X.AsNumber;
      const offsetY = interpolatedY + offSet.Y.AsNumber;
      ctx.beginPath();
      ctx.arc(offsetX, offsetY, circle.Radius.AsNumber, 0, Math.PI * 2);
      ctx.fill();
      ctx.stroke();
      ctx.closePath();
      ctx.fillStyle = "darkblue";
      ctx.fillText(circle.Priority.toString(), offsetX, offsetY);
      ctx.fillStyle = "red";
    }
    ctx.globalAlpha = 1;
  }
  function drawHurtCircles(ctx, frame, curPositon, lasPosition, hurtCapsules, instangible, alpha) {
    ctx.strokeStyle = "yellow";
    ctx.fillStyle = "yellow";
    if (instangible) {
      ctx.strokeStyle = "white";
      ctx.fillStyle = "white";
      if (frame % 2 === 0) {
        ctx.strokeStyle = "lightgray";
        ctx.fillStyle = "lightgray";
      }
    }
    ctx.lineWidth = 2;
    ctx.globalAlpha = 0.5;
    const lerpedPosX = Lerp(lasPosition.X, curPositon.X, alpha);
    const lerpedPosY = Lerp(lasPosition.Y, curPositon.Y, alpha);
    const hcLength = hurtCapsules.length;
    for (let i = 0; i < hcLength; i++) {
      const hurtCapsule = hurtCapsules[i];
      const globalStartX = hurtCapsule.StartOffsetX.AsNumber + lerpedPosX;
      const globalStartY = hurtCapsule.StartOffsetY.AsNumber + lerpedPosY;
      const globalEndX = hurtCapsule.EndOffsetX.AsNumber + lerpedPosX;
      const globalEndY = hurtCapsule.EndOffsetY.AsNumber + lerpedPosY;
      drawCapsule(
        ctx,
        globalStartX,
        globalStartY,
        globalEndX,
        globalEndY,
        hurtCapsule.Radius.AsNumber
      );
    }
    ctx.globalAlpha = 1;
  }
  var gbDto = new ActiveGrabBubblesDTO();
  function drawGrabCircles(ctx, grab, fsmInfo, flags, currentPosition, lastPosition, alpha) {
    if (grab === void 0) {
      return;
    }
    const currentSateFrame = fsmInfo.StateFrame;
    const circles = grab.GetActiveBubblesForFrame(currentSateFrame, gbDto);
    if (circles === void 0) {
      return;
    }
    ctx.strokeStyle = "purple";
    ctx.fillStyle = "purple";
    ctx.lineWidth = 2;
    ctx.globalAlpha = 0.4;
    const length = circles.Length;
    const interpolatedX = Lerp(lastPosition.X, currentPosition.X, alpha);
    const interpolatedY = Lerp(lastPosition.Y, currentPosition.Y, alpha);
    for (let i = 0; i < length; i++) {
      const circle = circles.AtIndex(i);
      if (circle === void 0) {
        continue;
      }
      const offSet = circle?.GetLocalPositionOffsetForFrame(currentSateFrame);
      if (offSet === void 0) {
        continue;
      }
      const offsetX = flags.FacingRight ? interpolatedX + offSet.X.AsNumber : interpolatedX - offSet.X.AsNumber;
      const offsetY = interpolatedY + offSet.Y.AsNumber;
      ctx.beginPath();
      ctx.arc(offsetX, offsetY, circle.Radius.AsNumber, 0, Math.PI * 2);
      ctx.fill();
      ctx.stroke();
      ctx.closePath();
    }
    ctx.globalAlpha = 1;
  }
  function drawPositionMarker(ctx, posHistory, lastPosHistory, alpha) {
    const playerPosX = Lerp(lastPosHistory.X, posHistory.X, alpha);
    const playerPosY = Lerp(lastPosHistory.Y, posHistory.Y, alpha);
    ctx.lineWidth = 1;
    ctx.strokeStyle = "blue";
    ctx.beginPath();
    ctx.moveTo(playerPosX, playerPosY);
    ctx.lineTo(playerPosX + 10, playerPosY);
    ctx.stroke();
    ctx.moveTo(playerPosX, playerPosY);
    ctx.lineTo(playerPosX - 10, playerPosY);
    ctx.stroke();
    ctx.moveTo(playerPosX, playerPosY);
    ctx.lineTo(playerPosX, playerPosY + 10);
    ctx.stroke();
    ctx.moveTo(playerPosX, playerPosY);
    ctx.lineTo(playerPosX, playerPosY - 10);
    ctx.stroke();
    ctx.closePath();
  }
  function drawCapsule(ctx, x1, y1, x2, y2, radius) {
    const angle = Math.atan2(y2 - y1, x2 - x1);
    const offsetX = Math.sin(angle) * radius;
    const offsetY = -Math.cos(angle) * radius;
    ctx.beginPath();
    ctx.arc(x1, y1, radius, angle + Math.PI / 2, angle - Math.PI / 2, false);
    ctx.lineTo(x2 + offsetX, y2 + offsetY);
    ctx.arc(x2, y2, radius, angle - Math.PI / 2, angle + Math.PI / 2, false);
    ctx.lineTo(x1 - offsetX, y1 - offsetY);
    ctx.closePath();
    ctx.fill();
    ctx.stroke();
  }
  function PrintDataTreeRoot(x, y, tree, ctx) {
    ctx.fillStyle = "white";
    printDataTreeNode(tree, x, y, ctx);
  }
  var indent = 13;
  function printDataTreeNode(d, x, y, ctx, level = 0) {
    if (d.kind === 1) {
      const originalStyle = ctx.fillStyle;
      ctx.fillStyle = "#4bff14";
      ctx.fillText(d.label, x, y);
      const labelWidth = ctx.measureText(d.label).width;
      ctx.fillStyle = "white";
      ctx.fillText(String(d.data), x + labelWidth + 5, y);
      ctx.fillStyle = originalStyle;
      return y + indent;
    } else if (d.kind === 2) {
      ctx.fillStyle = "cyan";
      ctx.fillText(d.label, x, y);
      const dLength = d.data.length;
      let currentY = y + indent;
      for (let i = 0; i < dLength; i++) {
        const child = d.data[i];
        currentY = printDataTreeNode(child, x + indent, currentY, ctx, level + 1);
      }
      return currentY;
    }
    return y + indent;
  }

  // game/loops/FPS60LoopExecutor.ts
  function RENDERFPS60Loop(renderFunc) {
    function loop(now) {
      renderFunc(now);
      requestAnimationFrame(loop);
    }
    requestAnimationFrame(loop);
  }

  // game/input/Input.ts
  var GamePadInput = class {
    constructor() {
      this.LXAxis = 0;
      this.LYAxis = 0;
      this.RXAxis = 0;
      this.RYAxis = 0;
      this.action = false;
      this.special = false;
      this.jump = false;
      this.lb = false;
      this.rb = false;
      this.lt = false;
      this.rt = false;
      this.ltVal = 0;
      this.rtVal = 0;
      this.dpUp = false;
      this.dpDown = false;
      this.dpRight = false;
      this.dpLeft = false;
      this.start = false;
      this.select = false;
    }
    Clear() {
      this.LXAxis = 0;
      this.LYAxis = 0;
      this.RXAxis = 0;
      this.RYAxis = 0;
      this.action = false;
      this.special = false;
      this.jump = false;
      this.lb = false;
      this.rb = false;
      this.lt = false;
      this.rt = false;
      this.ltVal = 0;
      this.rtVal = 0;
      this.dpUp = false;
      this.dpDown = false;
      this.dpLeft = false;
      this.dpRight = false;
      this.start = false;
      this.select = false;
    }
  };
  var currentInput = new GamePadInput();
  function readInput(gamePad) {
    currentInput.Clear();
    let lx = setDeadzone(gamePad.axes[0]);
    let ly = setDeadzone(gamePad.axes[1]);
    let rx = setDeadzone(gamePad.axes[2]);
    let ry = setDeadzone(gamePad.axes[3]);
    [lx, ly] = clampStick(lx, ly);
    [rx, ry] = clampStick(rx, ry);
    if (ly != 0) {
      ly *= -1;
    }
    if (ry != 0) {
      ry *= -1;
    }
    currentInput.LXAxis = lx;
    currentInput.LYAxis = ly;
    currentInput.RXAxis = rx;
    currentInput.RYAxis = ry;
    currentInput.action = gamePad.buttons[0].pressed;
    currentInput.special = gamePad.buttons[2].pressed;
    currentInput.jump = gamePad.buttons[1].pressed || gamePad.buttons[3].pressed;
    currentInput.lb = gamePad.buttons[4].pressed;
    currentInput.rb = gamePad.buttons[5].pressed;
    currentInput.lt = gamePad.buttons[6].pressed;
    currentInput.rt = gamePad.buttons[7].pressed;
    currentInput.ltVal = gamePad.buttons[6].value;
    currentInput.rtVal = gamePad.buttons[7].value;
    currentInput.dpUp = gamePad.buttons[12].pressed;
    currentInput.dpDown = gamePad.buttons[13].pressed;
    currentInput.dpLeft = gamePad.buttons[14].pressed;
    currentInput.dpRight = gamePad.buttons[15].pressed;
    currentInput.start = gamePad.buttons[9].pressed;
    currentInput.select = gamePad.buttons[8].pressed;
  }
  function GetInput(index, w) {
    const gp = navigator.getGamepads()[index];
    if (gp && gp.connected) {
      readInput(gp);
    }
    return transcribeInput(currentInput);
  }
  function handleSpecial(inputAction, LXAxis, LYAxis) {
    if (Math.abs(LYAxis) > Math.abs(LXAxis)) {
      if (LYAxis > 0) {
        inputAction.Action = GAME_EVENT_IDS.UP_SPCL_GE;
        return inputAction;
      }
      inputAction.Action = GAME_EVENT_IDS.DOWN_SPCL_GE;
      return inputAction;
    }
    if (LXAxis != 0) {
      inputAction.Action = GAME_EVENT_IDS.SIDE_SPCL_GE;
      return inputAction;
    }
    inputAction.Action = GAME_EVENT_IDS.SPCL_GE;
    return inputAction;
  }
  function handleAction(inputAction, LXAxis, LYAxis) {
    if (Math.abs(LYAxis) > Math.abs(LXAxis)) {
      if (LYAxis > 0) {
        inputAction.Action = GAME_EVENT_IDS.UP_ATTACK_GE;
        return inputAction;
      }
      inputAction.Action = GAME_EVENT_IDS.DOWN_ATTACK_GE;
      return inputAction;
    }
    if (LXAxis != 0) {
      inputAction.Action = GAME_EVENT_IDS.SIDE_ATTACK_GE;
      return inputAction;
    }
    inputAction.Action = GAME_EVENT_IDS.ATTACK_GE;
    return inputAction;
  }
  function transcribeInput(input) {
    const LXAxis = input.LXAxis;
    const LYAxis = input.LYAxis;
    const RXAxis = input.RXAxis;
    const RYAxis = input.RYAxis;
    const inputAction = NewInputAction();
    inputAction.LXAxis.SetFromNumber(LXAxis);
    inputAction.LYAxis.SetFromNumber(LYAxis);
    inputAction.RXAxis.SetFromNumber(RXAxis);
    inputAction.RYAxis.SetFromNumber(RYAxis);
    inputAction.LTVal.SetFromNumber(input.ltVal);
    inputAction.RTVal.SetFromNumber(input.rtVal);
    inputAction.Start = input.start;
    inputAction.Select = input.select;
    if (input.special) {
      return handleSpecial(inputAction, LXAxis, LYAxis);
    }
    if (input.action) {
      return handleAction(inputAction, LXAxis, LYAxis);
    }
    if (Math.abs(RXAxis) > Math.abs(RYAxis)) {
      inputAction.Action = GAME_EVENT_IDS.SIDE_ATTACK_GE;
      return inputAction;
    }
    if (Math.abs(RYAxis) > Math.abs(RXAxis)) {
      if (RYAxis > 0) {
        inputAction.Action = GAME_EVENT_IDS.UP_ATTACK_GE;
        return inputAction;
      }
      inputAction.Action = GAME_EVENT_IDS.DOWN_ATTACK_GE;
      return inputAction;
    }
    if (input.rb) {
      inputAction.Action = GAME_EVENT_IDS.GRAB_GE;
      return inputAction;
    }
    if (input.rt || input.lt) {
      inputAction.Action = GAME_EVENT_IDS.GUARD_GE;
      return inputAction;
    }
    if (input.jump) {
      inputAction.Action = GAME_EVENT_IDS.JUMP_GE;
      return inputAction;
    }
    if (LYAxis > 0.7) {
      inputAction.Action = GAME_EVENT_IDS.UP_GE;
      return inputAction;
    }
    if (LYAxis < -0.5) {
      inputAction.Action = GAME_EVENT_IDS.DOWN_GE;
      return inputAction;
    }
    if (Math.abs(LXAxis) > 0) {
      inputAction.Action = Math.abs(LXAxis) > 0.6 ? GAME_EVENT_IDS.MOVE_FAST_GE : GAME_EVENT_IDS.MOVE_GE;
      return inputAction;
    }
    inputAction.Action = GAME_EVENT_IDS.IDLE_GE;
    return inputAction;
  }
  function setDeadzone(v) {
    const DEADZONE = 0.2;
    if (Math.abs(v) < DEADZONE) {
      v = 0;
    } else {
      v = v - Math.sign(v) * DEADZONE;
      v /= 1 - DEADZONE;
    }
    return v;
  }
  var clampDto = [];
  function clampStick(x, y) {
    let m = Math.sqrt(x * x + y * y);
    if (m > 1) {
      x /= m;
      y /= m;
    }
    clampDto[0] = x;
    clampDto[1] = y;
    return clampDto;
  }
  function NewInputAction() {
    return {
      Action: GAME_EVENT_IDS.IDLE_GE,
      LXAxis: ToFp(0),
      LYAxis: ToFp(0),
      RXAxis: ToFp(0),
      RYAxis: ToFp(0),
      LTVal: ToFp(0),
      RTVal: ToFp(0),
      Start: false,
      Select: false,
      get LXAxisRaw() {
        return this.LXAxis.Raw;
      },
      get LYAxisRaw() {
        return this.LYAxis.Raw;
      },
      get RXAxisRaw() {
        return this.RXAxis.Raw;
      },
      get RYAxisRaw() {
        return this.RYAxis.Raw;
      },
      get LTValRaw() {
        return this.LTVal.Raw;
      },
      get RTValRaw() {
        return this.RTVal.Raw;
      }
    };
  }

  // game/engine/command/commands/activateSensor.ts
  function ActivatePlayerSensor(p, c) {
    const xRaw = NumberToRaw(c.payload.x);
    const yRaw = NumberToRaw(c.payload.y);
    const radiusRaw = NumberToRaw(c.payload.radius);
    p.Sensors.ActivateSensorRaw(xRaw, yRaw, radiusRaw);
  }

  // game/engine/command/commands/deactivateSensor.ts
  function DeactivatePlayerSensor(p) {
    p.Sensors.DeactivateSensors();
  }

  // game/engine/command/commands/setJumpCount.ts
  function SetJumpCount(p, c) {
    p.Jump.Set(c.payload);
  }

  // game/engine/command/commands/setPlayerSensorReactor.ts
  function SetPlayerSensorReactor(p, c) {
    const newC = c.payload;
    p.Sensors.ReactCommand = newC;
  }

  // game/engine/command/commands/setPlayerVelocity.ts
  function SetPlayerVelocity(p, c) {
    const xRaw = NumberToRaw(c.payload.x);
    const yRaw = NumberToRaw(c.payload.y);
    p.Velocity.X.SetFromRaw(xRaw);
    p.Velocity.Y.SetFromRaw(yRaw);
  }

  // game/engine/command/commands/switchPlayerState.ts
  function SwicthPlayerState(w, p, c) {
    const sm = w.PlayerData.StateMachine(p.ID);
    sm.UpdateFromWorld(c.payload);
  }

  // game/engine/command/command.ts
  var CommandNames = class {
    constructor() {
      this.PLAYER_SWITCH_STATE = "PL_SWITCH_STATE";
      this.SENSOR_ACTIVATE = "PL_SENSE_ACTIVATE";
      this.SENSOR_DEACTIVATE = "PL_SENSE_DEACTIVATE";
      this.SET_SENSOR_REACT_COMMAND = "PL_SET_SENSOR_DETECT_COMMAND";
      this.VELOCITY_SET = "PL_SET_VELOCITY";
      this.SET_JUMP_COUNT = "PL_SET_JUMP_COUNT";
    }
  };
  var COMMAND_NAMES = new CommandNames();
  function HandleCommand(w, p, c) {
    switch (c.commandName) {
      case COMMAND_NAMES.PLAYER_SWITCH_STATE:
        SwicthPlayerState(w, p, c);
        break;
      case COMMAND_NAMES.SENSOR_ACTIVATE:
        ActivatePlayerSensor(p, c);
        break;
      case COMMAND_NAMES.SENSOR_DEACTIVATE:
        DeactivatePlayerSensor(p);
        break;
      case COMMAND_NAMES.SET_SENSOR_REACT_COMMAND:
        SetPlayerSensorReactor(p, c);
        break;
      case COMMAND_NAMES.VELOCITY_SET:
        SetPlayerVelocity(p, c);
        break;
      case COMMAND_NAMES.SET_JUMP_COUNT:
        SetJumpCount(p, c);
        break;
    }
  }

  // game/character/shared.ts
  var AttackConfigBuilder = class {
    constructor(name) {
      this.attackId = 0;
      this.name = "";
      this.totalFrames = 0;
      this.interuptableFrame = 0;
      this.hasGravtity = true;
      this.baseKnockBack = 0;
      this.knockBackScaling = 0;
      this.hitBubbles = [];
      this.canOnlyFallOffLedgeIfFacingAwayFromIt = false;
      this.onEnterCommands = [];
      this.onUpdateCommands = /* @__PURE__ */ new Map();
      this.onExitCommands = [];
      this.name = name;
    }
    WithAttackId(attackId) {
      this.attackId = attackId;
      return this;
    }
    WithTotalFrames(totalFrames) {
      this.totalFrames = totalFrames;
      return this;
    }
    WithImpulses(impulses, impulseClamp = void 0) {
      this.impulses = impulses;
      this.impulseClamp = impulseClamp !== void 0 ? impulseClamp : void 0;
      return this;
    }
    WithInteruptableFrame(interuptFrame) {
      this.interuptableFrame = interuptFrame;
      return this;
    }
    WithGravity(gravity) {
      this.hasGravtity = gravity;
      return this;
    }
    CanOnlyFallOffLedgeIfFacingIt() {
      this.canOnlyFallOffLedgeIfFacingAwayFromIt = true;
      return this;
    }
    WithBaseKnockBack(baseKb) {
      this.baseKnockBack = baseKb;
      return this;
    }
    WithKnockBackScaling(kbScaling) {
      this.knockBackScaling = kbScaling;
      return this;
    }
    WithOnEnterCommand(command) {
      this.onEnterCommands.push(command);
      return this;
    }
    WithOnUpdateEvent(frameNumber2, command) {
      if (!this.onUpdateCommands.has(frameNumber2)) {
        this.onUpdateCommands.set(frameNumber2, [command]);
      } else {
        this.onUpdateCommands.get(frameNumber2).push(command);
      }
      return this;
    }
    WithOnExitEvent(command) {
      this.onExitCommands.push(command);
      return this;
    }
    WithHitBubble(damage, radius, priority, launchAngle, frameOffsets) {
      const hitBubId = this.hitBubbles.length;
      if (hitBubId >= 25) {
        throw new Error("CANNOT HAVE MORE THAN 25 HIT BUBBLES PER ATTACK!");
      }
      const hitBub = {
        BubbleId: hitBubId,
        Damage: damage,
        Priority: priority,
        Radius: radius,
        LaunchAngle: launchAngle,
        frameOffsets
      };
      this.hitBubbles.push(hitBub);
      return this;
    }
    Build() {
      if (this.attackId == void 0) {
        throw new Error("ATTACK ID CANNOT BE NULL!");
      }
      const atkConf = {
        Name: this.name,
        AttackId: this.attackId,
        TotalFrameLength: this.totalFrames,
        InteruptableFrame: this.interuptableFrame,
        GravityActive: this.hasGravtity,
        BaseKnockBack: this.baseKnockBack,
        KnockBackScaling: this.knockBackScaling,
        ImpulseClamp: this.impulseClamp,
        Impulses: this.impulses,
        CanOnlyFallOffLedgeIfFacingAwayFromIt: this.canOnlyFallOffLedgeIfFacingAwayFromIt,
        HitBubbles: this.hitBubbles,
        onEnterCommands: this.onEnterCommands,
        onUpdateCommands: this.onUpdateCommands,
        onExitCommands: this.onExitCommands
      };
      return atkConf;
    }
  };
  var GrabConfigBuilder = class {
    constructor(name) {
      this.grabId = 0;
      this.name = "";
      this.totalFrames = 0;
      this.grabBubbles = [];
      this.name = name;
    }
    WithGrabId(grabId) {
      this.grabId = grabId;
      return this;
    }
    WithTotalFrames(totalFrames) {
      this.totalFrames = totalFrames;
      return this;
    }
    WithImpulses(impulses, impulseClamp = void 0) {
      this.impulses = impulses;
      this.impulseClamp = impulseClamp !== void 0 ? impulseClamp : void 0;
      return this;
    }
    WithGrabBubble(radius, frameOffsets) {
      const grabBubId = this.grabBubbles.length;
      if (grabBubId >= 25) {
        throw new Error("CANNOT HAVE MORE THAN 25 GRAB BUBBLES PER GRAB!");
      }
      const grabBub = {
        BubbleId: grabBubId,
        Radius: radius,
        frameOffsets
      };
      this.grabBubbles.push(grabBub);
      return this;
    }
    Build() {
      if (this.grabId == void 0) {
        throw new Error("GRAB ID CANNOT BE NULL!");
      }
      const grabConf = {
        Name: this.name,
        GrabId: this.grabId,
        TotalFrameLength: this.totalFrames,
        ImpulseClamp: this.impulseClamp,
        Impulses: this.impulses,
        GrabBubbles: this.grabBubbles
      };
      return grabConf;
    }
  };

  // game/character/default.ts
  var DefaultCharacterConfig = class {
    constructor() {
      this.FrameLengths = /* @__PURE__ */ new Map();
      this.ECBHeight = 0;
      this.ECBWidth = 0;
      this.ECBOffset = 0;
      this.ECBShapes = /* @__PURE__ */ new Map();
      this.HurtCapsules = [];
      this.JumpVelocity = 0;
      this.LedgeBoxHeight = 0;
      this.LedgeBoxWidth = 0;
      this.LedgeBoxYOffset = 0;
      this.Attacks = /* @__PURE__ */ new Map();
      this.Grabs = /* @__PURE__ */ new Map();
      this.Weight = 0;
      this.ShieldRadius = 0;
      this.ShieldYOffset = 0;
      const neutralAttack = GetNAtk();
      const sideTilt = GetSideTilt();
      const sideTiltUp = GetSideTiltUp();
      const sideTiltDown = GetSideTiltDown();
      const downTilt = GetDownTilt();
      const upTilt = GetUpTilt();
      const sideCharge = GetSideCharge();
      const sideChargeExtension = GetSideChargeExtension();
      const upCharge = GetUpcharge();
      const upChargeExtension = GetUpchargeExt();
      const downCharge = GetDownCharge();
      const downChargeEx = GetDownChargeExtension();
      const dashAtk = GetDashAttack();
      const nSpecial = GetNSpecial();
      const grab = GetGrab();
      const sideSpecial = GetSideSpecial();
      const sideSpecialEx = GetSideSpecialExtension();
      const sideSpecialAir = GetSideSpecialAir();
      const sideSpecialExAir = GetSideSpecialExtensionAir();
      const downSpecial = GetDownSpecial();
      const downSpecialAerial = GetDownSpecialAerial();
      const upSpecial = GetUpSpecial();
      const neutralAir = GetNeutralAir();
      const fAir = GetFAir();
      const uAir = GetUAir();
      const bAir = GetBAir();
      const dAir = GetDAir();
      this.FrameLengths.set(STATE_IDS.SHIELD_RAISE_S, 6).set(STATE_IDS.SHIELD_DROP_S, 6).set(STATE_IDS.SHIELD_BREAK_S, 10).set(STATE_IDS.SHIELD_BREAK_LAND_S, 8).set(STATE_IDS.DIZZY_S, 300).set(STATE_IDS.GRAB_ESCAPE_S, 30).set(STATE_IDS.GRAB_RELEASE_S, 30).set(STATE_IDS.JUMP_SQUAT_S, 4).set(STATE_IDS.TURN_S, 3).set(STATE_IDS.DASH_S, 20).set(STATE_IDS.DASH_TURN_S, 1).set(STATE_IDS.RUN_TURN_S, 20).set(STATE_IDS.STOP_RUN_S, 15).set(STATE_IDS.JUMP_S, 1).set(STATE_IDS.AIR_DODGE_S, 22).set(STATE_IDS.LAND_S, 11).set(STATE_IDS.SOFT_LAND_S, 2).set(STATE_IDS.SPOT_DODGE_S, 43).set(STATE_IDS.ROLL_DODGE_S, 35).set(STATE_IDS.ATTACK_S, neutralAttack.TotalFrameLength).set(STATE_IDS.DASH_ATTACK_S, dashAtk.TotalFrameLength).set(STATE_IDS.DOWN_TILT_S, downTilt.TotalFrameLength).set(STATE_IDS.UP_TILT_S, upTilt.TotalFrameLength).set(STATE_IDS.SIDE_TILT_S, sideTilt.TotalFrameLength).set(STATE_IDS.SIDE_CHARGE_S, sideCharge.TotalFrameLength).set(STATE_IDS.SIDE_CHARGE_EX_S, sideChargeExtension.TotalFrameLength).set(STATE_IDS.UP_CHARGE_S, upCharge.TotalFrameLength).set(STATE_IDS.UP_CHARGE_EX_S, upChargeExtension.TotalFrameLength).set(STATE_IDS.DOWN_CHARGE_S, downCharge.TotalFrameLength).set(STATE_IDS.DOWN_CHARGE_EX_S, downChargeEx.TotalFrameLength).set(STATE_IDS.N_AIR_S, neutralAir.TotalFrameLength).set(STATE_IDS.F_AIR_S, fAir.TotalFrameLength).set(STATE_IDS.U_AIR_S, uAir.TotalFrameLength).set(STATE_IDS.B_AIR_S, bAir.TotalFrameLength).set(STATE_IDS.D_AIR_S, dAir.TotalFrameLength).set(STATE_IDS.SPCL_S, nSpecial.TotalFrameLength).set(STATE_IDS.SIDE_SPCL_S, sideSpecial.TotalFrameLength).set(STATE_IDS.SIDE_SPCL_EX_S, sideSpecialEx.TotalFrameLength).set(STATE_IDS.SIDE_SPCL_AIR_S, sideSpecialAir.TotalFrameLength).set(STATE_IDS.SIDE_SPCL_EX_AIR_S, sideSpecialExAir.TotalFrameLength).set(STATE_IDS.DOWN_SPCL_S, downSpecial.TotalFrameLength).set(STATE_IDS.DOWN_SPCL_AIR_S, downSpecialAerial.TotalFrameLength).set(STATE_IDS.UP_SPCL_S, upSpecial.TotalFrameLength).set(STATE_IDS.GRAB_S, grab.TotalFrameLength);
      this.ECBShapes.set(STATE_IDS.N_FALL_S, {
        height: 70,
        width: 70,
        yOffset: -25
      }).set(STATE_IDS.JUMP_S, { height: 60, width: 70, yOffset: -15 }).set(STATE_IDS.N_AIR_S, { height: 60, width: 70, yOffset: -25 }).set(STATE_IDS.F_AIR_S, { height: 60, width: 70, yOffset: -25 }).set(STATE_IDS.U_AIR_S, { height: 60, width: 60, yOffset: -25 }).set(STATE_IDS.B_AIR_S, { height: 60, width: 60, yOffset: -25 }).set(STATE_IDS.D_AIR_S, { height: 90, width: 60, yOffset: -10 }).set(STATE_IDS.DOWN_CHARGE_S, { height: 110, width: 85, yOffset: 0 }).set(STATE_IDS.DOWN_CHARGE_EX_S, { height: 65, width: 100, yOffset: 0 }).set(STATE_IDS.AIR_DODGE_S, { height: 60, width: 70, yOffset: -5 }).set(STATE_IDS.DOWN_TILT_S, { height: 50, width: 100, yOffset: 0 }).set(STATE_IDS.DOWN_SPCL_S, { height: 65, width: 105, yOffset: 0 }).set(STATE_IDS.DOWN_SPCL_AIR_S, { height: 65, width: 65, yOffset: 0 }).set(STATE_IDS.JUMP_SQUAT_S, { height: 70, width: 80, yOffset: 0 }).set(STATE_IDS.LAND_S, { height: 65, width: 90, yOffset: 0 }).set(STATE_IDS.SOFT_LAND_S, { height: 85, width: 95, yOffset: 0 }).set(STATE_IDS.LEDGE_GRAB_S, { height: 110, width: 55, yOffset: 0 }).set(STATE_IDS.SIDE_SPCL_S, { height: 80, width: 100, yOffset: 0 }).set(STATE_IDS.UP_CHARGE_S, { height: 90, width: 100, yOffset: 0 }).set(STATE_IDS.UP_CHARGE_EX_S, { height: 110, width: 85, yOffset: 0 }).set(STATE_IDS.SIDE_CHARGE_S, { height: 100, width: 85, yOffset: 0 }).set(STATE_IDS.SIDE_CHARGE_EX_S, { height: 85, width: 100, yOffset: 0 }).set(STATE_IDS.CROUCH_S, { height: 50, width: 100, yOffset: 0 }).set(STATE_IDS.SHIELD_BREAK_S, { height: 90, width: 60, yOffset: 0 }).set(STATE_IDS.SHIELD_BREAK_TUMBLE_S, {
        height: 60,
        width: 60,
        yOffset: 0
      }).set(STATE_IDS.SHIELD_BREAK_LAND_S, {
        height: 40,
        width: 100,
        yOffset: 0
      }).set(STATE_IDS.DIZZY_S, {
        height: 70,
        width: 70,
        yOffset: 0
      });
      this.ShieldRadius = 75;
      this.ShieldYOffset = -50;
      this.MaxWalkSpeed = 3.5;
      this.WalkSpeedMulitplier = 1.2;
      this.MaxRunSpeed = 7;
      this.RunSpeedMultiplier = 2.2;
      this.FastFallSpeed = 14;
      this.FallSpeed = 7.2;
      this.Gravity = 0.6;
      this.AerialVelocityDecay = 0.7;
      this.AerialSpeedInpulseLimit = 4.8;
      this.AerialSpeedMultiplier = 1.8;
      this.DashMutiplier = 3;
      this.MaxDashSpeed = 7.8;
      this.AirDodgeSpeed = 13.5;
      this.DodgeRollSpeed = 14.5;
      this.GroundedVelocityDecay = 0.32;
      this.ECBOffset = 0;
      this.ECBHeight = 100;
      this.ECBWidth = 100;
      this.populateHurtCircles();
      this.Weight = 110;
      this.JumpVelocity = 20;
      this.NumberOfJumps = 2;
      this.LedgeBoxHeight = 35;
      this.LedgeBoxWidth = 80;
      this.LedgeBoxYOffset = -130;
      this.Attacks.set(neutralAttack.AttackId, neutralAttack).set(downTilt.AttackId, downTilt).set(upTilt.AttackId, upTilt).set(sideTilt.AttackId, sideTilt).set(sideTiltUp.AttackId, sideTiltUp).set(sideTiltDown.AttackId, sideTiltDown).set(sideCharge.AttackId, sideCharge).set(sideChargeExtension.AttackId, sideChargeExtension).set(upCharge.AttackId, upCharge).set(upChargeExtension.AttackId, upChargeExtension).set(downCharge.AttackId, downCharge).set(downChargeEx.AttackId, downChargeEx).set(nSpecial.AttackId, nSpecial).set(sideSpecial.AttackId, sideSpecial).set(sideSpecialEx.AttackId, sideSpecialEx).set(downSpecial.AttackId, downSpecial).set(downSpecialAerial.AttackId, downSpecialAerial).set(neutralAir.AttackId, neutralAir).set(fAir.AttackId, fAir).set(uAir.AttackId, uAir).set(bAir.AttackId, bAir).set(dAir.AttackId, dAir).set(sideSpecialAir.AttackId, sideSpecialAir).set(sideSpecialExAir.AttackId, sideSpecialExAir).set(dashAtk.AttackId, dashAtk).set(upSpecial.AttackId, upSpecial);
      this.Grabs.set(grab.GrabId, grab);
    }
    populateHurtCircles() {
      const body = {
        x1: 0,
        y1: -40,
        x2: 0,
        y2: -50,
        radius: 40
      };
      const head = {
        x1: 0,
        y1: -105,
        x2: 0,
        y2: -125,
        radius: 14
      };
      this.HurtCapsules.push(head);
      this.HurtCapsules.push(body);
    }
  };
  var toCv = (x, y) => ({ x, y });
  function GetNAtk() {
    const hb1OffSets = /* @__PURE__ */ new Map();
    const hb1Frame3Offset = toCv(30, -50);
    const hb1Frame4Offset = toCv(60, -50);
    const hb1Frame5Offset = toCv(80, -50);
    const hb1Frame6Offset = toCv(80, -50);
    const hb1Frame7Offset = toCv(80, -50);
    hb1OffSets.set(3, hb1Frame3Offset).set(4, hb1Frame4Offset).set(5, hb1Frame5Offset).set(6, hb1Frame6Offset).set(7, hb1Frame7Offset);
    const hb2OffSets = /* @__PURE__ */ new Map();
    const hb2Frame3Offset = toCv(15, -50);
    const hb2Frame4Offset = toCv(25, -50);
    const hb2Frame5Offset = toCv(55, -50);
    const hb2Frame6Offset = toCv(65, -50);
    const hb2Frame7Offset = toCv(65, -50);
    hb2OffSets.set(3, hb2Frame3Offset).set(4, hb2Frame4Offset).set(5, hb2Frame5Offset).set(6, hb2Frame6Offset).set(7, hb2Frame7Offset);
    const bldr = new AttackConfigBuilder("NAttack");
    bldr.WithAttackId(ATTACK_IDS.N_GRND_ATK).WithBaseKnockBack(15).WithKnockBackScaling(54).WithGravity(true).WithTotalFrames(18).WithInteruptableFrame(15).WithHitBubble(7, 16, 0, 60, hb1OffSets).WithHitBubble(6, 14, 1, 60, hb2OffSets);
    return bldr.Build();
  }
  function GetDashAttack() {
    const basKnowback = 15;
    const knockBackScaling = 45;
    const totalFrames = 37;
    const radius = 25;
    const damage = 12;
    const hb1Offsets = /* @__PURE__ */ new Map();
    const impulses = /* @__PURE__ */ new Map();
    for (let i = 0; i < 15; i++) {
      impulses.set(i, toCv(4, 0));
    }
    hb1Offsets.set(5, toCv(40, -60)).set(6, toCv(40, -60)).set(7, toCv(40, -60)).set(8, toCv(40, -60)).set(9, toCv(40, -60)).set(10, toCv(40, -60)).set(11, toCv(40, -60)).set(12, toCv(40, -60)).set(13, toCv(40, -60)).set(14, toCv(40, -60)).set(15, toCv(40, -60));
    const bldr = new AttackConfigBuilder("DashAttack");
    bldr.WithAttackId(ATTACK_IDS.DASH_ATK).WithGravity(true).WithBaseKnockBack(basKnowback).WithKnockBackScaling(knockBackScaling).WithTotalFrames(totalFrames).WithImpulses(impulses, 8).WithHitBubble(damage, radius, 0, 50, hb1Offsets);
    return bldr.Build();
  }
  function GetNeutralAir() {
    const activeFrames = 40;
    const hb1OffSets = /* @__PURE__ */ new Map();
    hb1OffSets.set(6, toCv(80, -50)).set(7, toCv(85, -50)).set(8, toCv(90, -50)).set(9, toCv(90, -50));
    const hb2OffSets = (/* @__PURE__ */ new Map()).set(6, toCv(35, -50)).set(7, toCv(40, -50)).set(8, toCv(45, -50)).set(9, toCv(47, -50));
    const hb3offSets = (/* @__PURE__ */ new Map()).set(6, toCv(10, -50)).set(7, toCv(10, -50)).set(8, toCv(10, -50)).set(9, toCv(10, -50));
    const hb4offsets = (/* @__PURE__ */ new Map()).set(19, toCv(80, -50)).set(20, toCv(85, -50)).set(21, toCv(90, -50));
    const hb5Offsets = (/* @__PURE__ */ new Map()).set(19, toCv(35, -50)).set(20, toCv(40, -50)).set(21, toCv(45, -50));
    const hb6Offsets = (/* @__PURE__ */ new Map()).set(19, toCv(10, -50)).set(20, toCv(10, -50)).set(21, toCv(10, -50)).set(22, toCv(10, -50)).set(23, toCv(10, -50)).set(24, toCv(10, -50)).set(25, toCv(10, -50)).set(26, toCv(10, -50));
    const bldr = new AttackConfigBuilder("NAir").WithAttackId(ATTACK_IDS.N_AIR_ATK).WithBaseKnockBack(10).WithKnockBackScaling(50).WithGravity(true).WithTotalFrames(activeFrames).WithHitBubble(12, 20, 0, 25, hb1OffSets).WithHitBubble(11, 19, 1, 25, hb2OffSets).WithHitBubble(13, 23, 3, 35, hb3offSets).WithHitBubble(15, 20, 4, 25, hb4offsets).WithHitBubble(12, 20, 5, 25, hb5Offsets).WithHitBubble(13, 23, 6, 35, hb6Offsets);
    return bldr.Build();
  }
  function GetUAir() {
    const uairTotalFrames = 31;
    const uairActiveStart = 6;
    const uairActiveEnd = 16;
    const uairFramesActive = uairActiveEnd - uairActiveStart + 1;
    const uairRadius = 22;
    const uairDamage = 12;
    const uairBaseKnockBack = 12;
    const uAirLaunchAngle = 20;
    const toeOfNoLaunchAngle = 340;
    const startAngle = 0;
    const endAngle = 200 * Math.PI / 180;
    const bubble1Offsets = generateArcBubbleOffsets(
      startAngle,
      endAngle,
      uairFramesActive,
      160,
      20
    );
    const bubble2Offsets = generateArcBubbleOffsets(
      startAngle,
      endAngle,
      uairFramesActive,
      140,
      20
    );
    const bubble3Offsets = generateArcBubbleOffsets(
      startAngle,
      endAngle,
      uairFramesActive,
      110,
      20
    );
    const uAirAttack = new AttackConfigBuilder("UAir").WithAttackId(ATTACK_IDS.U_AIR_ATK).WithTotalFrames(uairTotalFrames).WithInteruptableFrame(uairTotalFrames).WithBaseKnockBack(uairBaseKnockBack).WithKnockBackScaling(50).WithGravity(true).WithHitBubble(uairDamage, uairRadius, 2, uAirLaunchAngle, bubble1Offsets).WithHitBubble(uairDamage, uairRadius, 1, uAirLaunchAngle, bubble2Offsets).WithHitBubble(
      uairDamage,
      uairRadius,
      0,
      toeOfNoLaunchAngle,
      bubble3Offsets
    ).Build();
    return uAirAttack;
  }
  function GetFAir() {
    const fairTotalFrames = 40;
    const fairActiveStart = 11;
    const fairActiveEnd = 22;
    const fairFramesActive = fairActiveEnd - fairActiveStart + 1;
    const fairRadius = 25;
    const fairDamage = 17;
    const fairBaseKnockback = 15;
    const fairLaunchAngle = 30;
    const bubble1Offsets = generateArcBubbleOffsets(
      -Math.PI / 2,
      // start above (90deg)
      Math.PI / 2,
      // end below (270deg)
      fairFramesActive,
      155,
      // distance from player center
      130,
      // retract inwards by 10px at end
      12,
      false
    );
    const bubble2Offsets = generateArcBubbleOffsets(
      -Math.PI / 2,
      Math.PI / 2,
      fairFramesActive,
      130,
      110,
      12,
      false
    );
    const bubble3Offsets = generateArcBubbleOffsets(
      -Math.PI / 2,
      Math.PI / 2,
      fairFramesActive,
      100,
      100,
      12,
      false
    );
    const FairAttack = new AttackConfigBuilder("FAir").WithAttackId(ATTACK_IDS.F_AIR_ATK).WithTotalFrames(fairTotalFrames).WithInteruptableFrame(fairTotalFrames).WithBaseKnockBack(fairBaseKnockback).WithKnockBackScaling(45).WithGravity(true).WithHitBubble(fairDamage, fairRadius, 2, fairLaunchAngle, bubble1Offsets).WithHitBubble(fairDamage, fairRadius, 1, fairLaunchAngle, bubble2Offsets).WithHitBubble(fairDamage, fairRadius, 0, fairLaunchAngle, bubble3Offsets).Build();
    return FairAttack;
  }
  function GetBAir() {
    const totalFrames = 33;
    const baseKnockBack = 17;
    const knockBackScaling = 50;
    const damage = 16;
    const radius = 27;
    const launchAngle = 150;
    const hb1OffSets = /* @__PURE__ */ new Map();
    const hb1Frame9Offset = toCv(-40, -45);
    const hb1Frame10Offset = toCv(-44, -45);
    const hb1Frame11Offset = toCv(-46, -45);
    const hb1Frame12Offset = toCv(-44, -45);
    const hb1Frame13Offset = toCv(-44, -45);
    const hb1Frame14Offset = toCv(-44, -45);
    const hb1Frame15Offset = toCv(-44, -45);
    hb1OffSets.set(9, hb1Frame9Offset).set(10, hb1Frame10Offset).set(11, hb1Frame11Offset).set(12, hb1Frame12Offset).set(13, hb1Frame13Offset).set(14, hb1Frame14Offset).set(15, hb1Frame15Offset);
    const hb2OffSets = /* @__PURE__ */ new Map();
    const hb2Frame9Offset = toCv(-70, -40);
    const hb2Frame10Offset = toCv(-74, -39);
    const hb2Frame11Offset = toCv(-77, -38);
    const hb2Frame12Offset = toCv(-75, -38);
    const hb2Frame13Offset = toCv(-75, -38);
    const hb2Frame14Offset = toCv(-75, -38);
    const hb2Frame15Offset = toCv(-75, -38);
    hb2OffSets.set(9, hb2Frame9Offset).set(10, hb2Frame10Offset).set(11, hb2Frame11Offset).set(12, hb2Frame12Offset).set(13, hb2Frame13Offset).set(14, hb2Frame14Offset).set(15, hb2Frame15Offset);
    const bldr = new AttackConfigBuilder("BAir");
    bldr.WithAttackId(ATTACK_IDS.B_AIR_ATK).WithBaseKnockBack(baseKnockBack).WithKnockBackScaling(knockBackScaling).WithGravity(true).WithTotalFrames(totalFrames).WithHitBubble(damage, radius, 1, launchAngle, hb1OffSets).WithHitBubble(damage, radius, 0, launchAngle, hb2OffSets);
    return bldr.Build();
  }
  function GetDAir() {
    const activeFrames = 35;
    const radius = 30;
    const damage = 20;
    const baseKnockBack = 20;
    const knockBackScaling = 45;
    const launchAngle = 285;
    const hb1OffSets = /* @__PURE__ */ new Map();
    hb1OffSets.set(13, toCv(0, -30)).set(14, toCv(0, -30)).set(15, toCv(0, -30)).set(16, toCv(0, -30)).set(17, toCv(0, -30)).set(18, toCv(0, -30));
    const hb2OffSets = (/* @__PURE__ */ new Map()).set(13, toCv(-5, -5)).set(14, toCv(-8, -6)).set(15, toCv(-10, -7)).set(16, toCv(-12, -10)).set(17, toCv(-9, -10)).set(18, toCv(-7, -9));
    const hb3offSets = (/* @__PURE__ */ new Map()).set(13, toCv(0, 15)).set(14, toCv(0, 17)).set(15, toCv(0, 20)).set(16, toCv(0, 23)).set(17, toCv(0, 21)).set(18, toCv(0, 19));
    const bldr = new AttackConfigBuilder("DAir").WithAttackId(ATTACK_IDS.D_AIR_ATK).WithBaseKnockBack(baseKnockBack).WithKnockBackScaling(knockBackScaling).WithGravity(true).WithTotalFrames(activeFrames).WithHitBubble(damage, radius, 0, launchAngle, hb1OffSets).WithHitBubble(damage, radius, 1, launchAngle, hb2OffSets).WithHitBubble(damage, radius, 2, launchAngle, hb3offSets);
    return bldr.Build();
  }
  function GetDownTilt() {
    const totalFrames = 33;
    const damage = 11;
    const launchAngle = 70;
    const radius = 27;
    const baseKnockBack = 20;
    const knockBackScaling = 30;
    const hb1Offsets = /* @__PURE__ */ new Map();
    const hb2Offsets = /* @__PURE__ */ new Map();
    const hb3Offsets = /* @__PURE__ */ new Map();
    hb1Offsets.set(9, toCv(110, -15)).set(10, toCv(110, -15)).set(11, toCv(110, -15)).set(12, toCv(110, -15)).set(13, toCv(110, -15)).set(14, toCv(110, -15));
    hb2Offsets.set(9, toCv(85, -10)).set(10, toCv(85, -10)).set(11, toCv(85, -10)).set(12, toCv(85, -10)).set(13, toCv(85, -10)).set(14, toCv(85, -10));
    hb3Offsets.set(9, toCv(50, -7)).set(10, toCv(50, -7)).set(11, toCv(50, -7)).set(12, toCv(50, -7)).set(13, toCv(50, -7)).set(14, toCv(50, -7));
    const bldr = new AttackConfigBuilder("DownTilt");
    bldr.WithAttackId(ATTACK_IDS.D_TILT_ATK).WithBaseKnockBack(baseKnockBack).WithKnockBackScaling(knockBackScaling).WithTotalFrames(totalFrames).WithGravity(true).WithHitBubble(damage, radius, 0, launchAngle, hb1Offsets).WithHitBubble(damage - 1, radius, 1, launchAngle, hb2Offsets).WithHitBubble(damage - 2, radius, 2, launchAngle, hb3Offsets);
    return bldr.Build();
  }
  function GetSideTilt() {
    const totalFrames = 33;
    const damage = 12;
    const launchAngle = 40;
    const radius = 27;
    const baseKnockBack = 20;
    const knockBackScaling = 30;
    const hb1Offsets = /* @__PURE__ */ new Map();
    const hb2Offsets = /* @__PURE__ */ new Map();
    const hb3Offsets = /* @__PURE__ */ new Map();
    hb1Offsets.set(9, toCv(100, -40)).set(10, toCv(100, -40)).set(11, toCv(100, -40)).set(12, toCv(100, -40)).set(13, toCv(100, -40)).set(14, toCv(100, -40));
    hb2Offsets.set(9, toCv(60, -40)).set(10, toCv(60, -40)).set(11, toCv(60, -40)).set(12, toCv(60, -40)).set(13, toCv(60, -40)).set(14, toCv(60, -40));
    hb3Offsets.set(9, toCv(10, -40)).set(10, toCv(10, -40)).set(11, toCv(10, -40)).set(12, toCv(10, -40)).set(13, toCv(10, -40)).set(14, toCv(10, -40));
    const bldr = new AttackConfigBuilder("SideTilt");
    bldr.WithAttackId(ATTACK_IDS.S_TILT_ATK).WithBaseKnockBack(baseKnockBack).WithKnockBackScaling(knockBackScaling).WithTotalFrames(totalFrames).WithGravity(true).WithHitBubble(damage, radius, 0, launchAngle, hb1Offsets).WithHitBubble(damage - 1, radius - 2, 1, launchAngle, hb2Offsets).WithHitBubble(damage - 2, radius - 4, 2, launchAngle, hb3Offsets);
    return bldr.Build();
  }
  function GetSideTiltDown() {
    const totalFrames = 33;
    const damage = 12;
    const launchAngle = 40;
    const radius = 27;
    const baseKnockBack = 20;
    const knockBackScaling = 30;
    const hb1Offsets = /* @__PURE__ */ new Map();
    const hb2Offsets = /* @__PURE__ */ new Map();
    const hb3Offsets = /* @__PURE__ */ new Map();
    hb1Offsets.set(9, toCv(100, -25)).set(10, toCv(100, -25)).set(11, toCv(100, -25)).set(12, toCv(100, -25)).set(13, toCv(100, -25)).set(14, toCv(100, -25));
    hb2Offsets.set(9, toCv(60, -32)).set(10, toCv(60, -32)).set(11, toCv(60, -32)).set(12, toCv(60, -32)).set(13, toCv(60, -32)).set(14, toCv(60, -32));
    hb3Offsets.set(9, toCv(10, -40)).set(10, toCv(10, -40)).set(11, toCv(10, -40)).set(12, toCv(10, -40)).set(13, toCv(10, -40)).set(14, toCv(10, -40));
    const bldr = new AttackConfigBuilder("SideTiltDown");
    bldr.WithAttackId(ATTACK_IDS.S_TITL_D_ATK).WithBaseKnockBack(baseKnockBack).WithKnockBackScaling(knockBackScaling).WithTotalFrames(totalFrames).WithGravity(true).WithHitBubble(damage, radius, 0, launchAngle, hb1Offsets).WithHitBubble(damage - 1, radius - 2, 1, launchAngle, hb2Offsets).WithHitBubble(damage - 2, radius - 4, 2, launchAngle, hb3Offsets);
    return bldr.Build();
  }
  function GetSideTiltUp() {
    const totalFrames = 33;
    const damage = 12;
    const launchAngle = 40;
    const radius = 27;
    const baseKnockBack = 20;
    const knockBackScaling = 30;
    const hb1Offsets = /* @__PURE__ */ new Map();
    const hb2Offsets = /* @__PURE__ */ new Map();
    const hb3Offsets = /* @__PURE__ */ new Map();
    hb1Offsets.set(9, toCv(100, -65)).set(10, toCv(100, -65)).set(11, toCv(100, -65)).set(12, toCv(100, -65)).set(13, toCv(100, -65)).set(14, toCv(100, -65));
    hb2Offsets.set(9, toCv(60, -53)).set(10, toCv(60, -53)).set(11, toCv(60, -53)).set(12, toCv(60, -53)).set(13, toCv(60, -53)).set(14, toCv(60, -53));
    hb3Offsets.set(9, toCv(10, -40)).set(10, toCv(10, -40)).set(11, toCv(10, -40)).set(12, toCv(10, -40)).set(13, toCv(10, -40)).set(14, toCv(10, -40));
    const bldr = new AttackConfigBuilder("SideTiltUp");
    bldr.WithAttackId(ATTACK_IDS.S_TILT_U_ATK).WithBaseKnockBack(baseKnockBack).WithKnockBackScaling(knockBackScaling).WithTotalFrames(totalFrames).WithGravity(true).WithHitBubble(damage, radius, 0, launchAngle, hb1Offsets).WithHitBubble(damage - 1, radius - 2, 1, launchAngle, hb2Offsets).WithHitBubble(damage - 2, radius - 4, 2, launchAngle, hb3Offsets);
    return bldr.Build();
  }
  function GetUpTilt() {
    const totalFrames = 60;
    const damage = 16;
    const launchAngle = 65;
    const nonExplsoiveRadius = 30;
    const explosiveRadius = 50;
    const BaseKnockBack = 30;
    const knockBackScaling = 45;
    const startAngle = 90 * Math.PI / 180;
    const endAngle = -315 * Math.PI / 180;
    const hitBubbleOffsets = generateArcBubbleOffsets(
      startAngle,
      endAngle,
      58,
      120,
      0,
      50,
      true
    );
    const hitBubbleOffsets2 = /* @__PURE__ */ new Map();
    hitBubbleOffsets2.set(59, toCv(110, -40)).set(60, toCv(110, -40));
    const bldr = new AttackConfigBuilder("UpTilt");
    bldr.WithAttackId(ATTACK_IDS.U_TILT_ATK).WithBaseKnockBack(BaseKnockBack).WithKnockBackScaling(knockBackScaling).WithGravity(true).WithTotalFrames(totalFrames).WithHitBubble(damage, nonExplsoiveRadius, 0, launchAngle, hitBubbleOffsets).WithHitBubble(
      damage * 2,
      explosiveRadius,
      1,
      launchAngle,
      hitBubbleOffsets2
    );
    return bldr.Build();
  }
  function GetUpcharge() {
    const totalFrames = 180;
    const bldr = new AttackConfigBuilder("UpCharge").WithAttackId(ATTACK_IDS.U_CHARGE_ATK).WithTotalFrames(totalFrames).WithGravity(true);
    return bldr.Build();
  }
  function GetUpchargeExt() {
    const totalFrames = 45;
    const damage = 20;
    const launchAngle = 75;
    const radius = 30;
    const baseKb = 25;
    const knockBackScaling = 35;
    const startAngle = 1 * Math.PI / 100;
    const endAngle = 50 * Math.PI / 100;
    const h1offset = generateArcBubbleOffsets(
      startAngle,
      endAngle,
      6,
      105,
      0,
      21
    );
    h1offset.forEach((v, k) => {
      v.y -= 40;
    });
    const bldr = new AttackConfigBuilder("UpChargeExtension");
    bldr.WithAttackId(ATTACK_IDS.U_CHARGE_EX_ATK).WithBaseKnockBack(baseKb).WithKnockBackScaling(knockBackScaling).WithGravity(true).WithTotalFrames(totalFrames).WithHitBubble(damage, radius, 0, launchAngle, h1offset);
    return bldr.Build();
  }
  function GetDownCharge() {
    const totalFrames = 180;
    const bldr = new AttackConfigBuilder("DownCharge").WithAttackId(ATTACK_IDS.D_CHARGE_ATK).WithTotalFrames(totalFrames).WithGravity(true);
    return bldr.Build();
  }
  function GetDownChargeExtension() {
    const totalFrames = 55;
    const damage = 15;
    const launchAngle = 90;
    const radius = 30;
    const baseKb = 35;
    const knockBackScaling = 15;
    const of1 = /* @__PURE__ */ new Map();
    const of2 = /* @__PURE__ */ new Map();
    const of3 = /* @__PURE__ */ new Map();
    const of4 = /* @__PURE__ */ new Map();
    const of5 = /* @__PURE__ */ new Map();
    const of6 = /* @__PURE__ */ new Map();
    const activeFrames = 9;
    const attackStart = 21;
    for (let i = 0; i < activeFrames; i++) {
      const frame = i + attackStart;
      if (i < 3) {
        of1.set(frame, toCv(50, 0));
        of2.set(frame, toCv(-50, 0));
      } else if (i < 6) {
        of3.set(frame, toCv(70, 0));
        of4.set(frame, toCv(-70, 0));
      } else if (i < 9) {
        of5.set(frame, toCv(90, 0));
        of6.set(frame, toCv(-90, 0));
      }
    }
    const bldr = new AttackConfigBuilder("DownChargeExtension");
    bldr.WithAttackId(ATTACK_IDS.D_CHARGE_EX_ATK).WithBaseKnockBack(baseKb).WithKnockBackScaling(knockBackScaling).WithGravity(true).WithTotalFrames(totalFrames).WithHitBubble(damage, radius, 0, launchAngle, of1).WithHitBubble(damage, radius, 1, launchAngle, of2).WithHitBubble(damage, radius, 2, launchAngle, of3).WithHitBubble(damage, radius, 3, launchAngle, of4).WithHitBubble(damage, radius, 4, launchAngle, of5).WithHitBubble(damage, radius, 5, launchAngle, of6);
    return bldr.Build();
  }
  function GetSideCharge() {
    const totalFrames = 180;
    const bldr = new AttackConfigBuilder("SideCharge").WithAttackId(ATTACK_IDS.S_CHARGE_ATK).WithTotalFrames(totalFrames).WithGravity(true);
    return bldr.Build();
  }
  function GetSideChargeExtension() {
    const totalFrames = 60;
    const hb1Damage = 22;
    const hb2Damage = 20;
    const baseKnockBack = 30;
    const knockBackScaling = 45;
    const radius = 18;
    const hitBubbleOffsets1 = /* @__PURE__ */ new Map();
    const hitBubbleOffsets2 = /* @__PURE__ */ new Map();
    hitBubbleOffsets1.set(18, toCv(-10, -40)).set(19, toCv(10, -40)).set(20, toCv(40, -40)).set(21, toCv(65, -40)).set(22, toCv(70, -40)).set(23, toCv(70, -40));
    hitBubbleOffsets2.set(19, toCv(0, -40)).set(20, toCv(30, -40)).set(21, toCv(55, -40)).set(22, toCv(60, -40));
    const impulses = /* @__PURE__ */ new Map();
    impulses.set(20, toCv(8, 0));
    const bldr = new AttackConfigBuilder("SideChargeExtension").WithAttackId(ATTACK_IDS.S_CHARGE_EX_ATK).WithTotalFrames(totalFrames).WithImpulses(impulses, 10).WithGravity(true).WithHitBubble(hb1Damage, radius, 0, 50, hitBubbleOffsets1).WithHitBubble(hb2Damage, radius, 1, 50, hitBubbleOffsets2).WithBaseKnockBack(baseKnockBack).WithKnockBackScaling(knockBackScaling);
    return bldr.Build();
  }
  function GetNSpecial() {
    const activeFrames = 120;
    const h1Damage = 24;
    const baseKb = 35;
    const knockBackScaling = 45;
    const radius = 25;
    const h1Offset = /* @__PURE__ */ new Map();
    for (let i = 80; i < 100; i++) {
      h1Offset.set(i, toCv(90, -40));
    }
    const bldr = new AttackConfigBuilder("NSpecial");
    bldr.WithAttackId(ATTACK_IDS.N_SPCL_ATK).WithTotalFrames(activeFrames).WithGravity(true).WithHitBubble(h1Damage, radius, 0, 65, h1Offset).WithBaseKnockBack(baseKb).WithKnockBackScaling(knockBackScaling);
    return bldr.Build();
  }
  function GetSideSpecial() {
    const activeFrames = 80;
    const impulses = /* @__PURE__ */ new Map();
    const switchStateCommand = {
      commandName: COMMAND_NAMES.PLAYER_SWITCH_STATE,
      payload: GAME_EVENT_IDS.SIDE_SPCL_EX_GE
    };
    const sensorReactorChangeStateOnDetection = {
      commandName: COMMAND_NAMES.SET_SENSOR_REACT_COMMAND,
      payload: switchStateCommand
    };
    const setPlayerVelocityToZero = {
      commandName: COMMAND_NAMES.VELOCITY_SET,
      payload: {
        x: 0,
        y: 0
      }
    };
    const sensor1 = {
      commandName: COMMAND_NAMES.SENSOR_ACTIVATE,
      payload: {
        x: 45,
        y: -15,
        radius: 30
      }
    };
    const sensor2 = {
      commandName: COMMAND_NAMES.SENSOR_ACTIVATE,
      payload: {
        x: 45,
        y: -50,
        radius: 30
      }
    };
    const sensor3 = {
      commandName: COMMAND_NAMES.SENSOR_ACTIVATE,
      payload: {
        x: 45,
        y: -85,
        radius: 30
      }
    };
    const frameActivate = 15;
    const deactivateSensor = {
      commandName: COMMAND_NAMES.SENSOR_DEACTIVATE,
      payload: void 0
    };
    const frameDeactivate = 40;
    impulses.set(5, toCv(-6, 0)).set(6, toCv(-3, 0));
    for (let i = 14; i < 35; i++) {
      impulses.set(i, toCv(4, 0));
    }
    const bldr = new AttackConfigBuilder("SideSpecial");
    bldr.WithAttackId(ATTACK_IDS.S_SPCL_ATK).WithOnEnterCommand(setPlayerVelocityToZero).WithOnEnterCommand(sensorReactorChangeStateOnDetection).WithOnUpdateEvent(frameActivate, sensor1).WithOnUpdateEvent(frameActivate, sensor2).WithOnUpdateEvent(frameActivate, sensor3).WithOnUpdateEvent(frameDeactivate, deactivateSensor).WithOnExitEvent(deactivateSensor).WithImpulses(impulses, 13).WithTotalFrames(activeFrames).CanOnlyFallOffLedgeIfFacingIt().WithGravity(false);
    return bldr.Build();
  }
  function GetSideSpecialExtension() {
    const totalFrameLength = 25;
    const hb1Offsets = /* @__PURE__ */ new Map();
    const damage = 16;
    const radius = 40;
    const baseKnockBack = 30;
    const knockBackScaling = 45;
    hb1Offsets.set(3, toCv(80, -50)).set(4, toCv(90, -65)).set(5, toCv(100, -85)).set(6, toCv(65, -105)).set(7, toCv(25, -125));
    const setVelocityToZero = {
      commandName: COMMAND_NAMES.VELOCITY_SET,
      payload: {
        x: 0,
        y: 0
      }
    };
    const bldr = new AttackConfigBuilder("SideSpecialExtension");
    bldr.WithAttackId(ATTACK_IDS.S_SPCL_EX_ATK).WithTotalFrames(totalFrameLength).WithBaseKnockBack(baseKnockBack).WithKnockBackScaling(knockBackScaling).WithOnEnterCommand(setVelocityToZero).WithHitBubble(damage, radius, 0, 89, hb1Offsets);
    return bldr.Build();
  }
  function GetSideSpecialAir() {
    const activeFrames = 70;
    const impulses = /* @__PURE__ */ new Map();
    const frameToActivate = 15;
    const frameToDeactivate = 40;
    const setPlayerVelocityToZero = {
      commandName: COMMAND_NAMES.VELOCITY_SET,
      payload: {
        x: 0,
        y: 0
      }
    };
    const setPlayerStateToSideSpclAirEx = {
      commandName: COMMAND_NAMES.PLAYER_SWITCH_STATE,
      payload: GAME_EVENT_IDS.S_SPCL_EX_AIR_GE
    };
    const setSensorReactorToSwicthStateOnDetection = {
      commandName: COMMAND_NAMES.SET_SENSOR_REACT_COMMAND,
      payload: setPlayerStateToSideSpclAirEx
    };
    const activateSensor1 = {
      commandName: COMMAND_NAMES.SENSOR_ACTIVATE,
      payload: {
        x: 45,
        y: -15,
        radius: 30
      }
    };
    const activateSensor2 = {
      commandName: COMMAND_NAMES.SENSOR_ACTIVATE,
      payload: {
        x: 45,
        y: -50,
        radius: 30
      }
    };
    const activateSensor3 = {
      commandName: COMMAND_NAMES.SENSOR_ACTIVATE,
      payload: {
        x: 45,
        y: -85,
        radius: 30
      }
    };
    const deactivateSensor = {
      commandName: COMMAND_NAMES.SENSOR_DEACTIVATE,
      payload: void 0
    };
    for (let i = 14; i < 35; i++) {
      impulses.set(i, toCv(4, 0));
    }
    const bldr = new AttackConfigBuilder("SideSpecialAir");
    bldr.WithAttackId(ATTACK_IDS.S_SPCL_AIR_ATK).WithOnEnterCommand(setPlayerVelocityToZero).WithOnEnterCommand(setSensorReactorToSwicthStateOnDetection).WithOnUpdateEvent(frameToActivate, activateSensor1).WithOnUpdateEvent(frameToActivate, activateSensor2).WithOnUpdateEvent(frameToActivate, activateSensor3).WithOnUpdateEvent(frameToDeactivate, deactivateSensor).WithOnExitEvent(deactivateSensor).WithImpulses(impulses, 12).WithTotalFrames(activeFrames).WithGravity(false);
    return bldr.Build();
  }
  function GetSideSpecialExtensionAir() {
    const totalFrameLength = 25;
    const hb1Offsets = /* @__PURE__ */ new Map();
    const damage = 16;
    const radius = 40;
    const baseKnockBack = 30;
    const knockBackScaling = 45;
    const launchAngle = 270;
    hb1Offsets.set(3, toCv(25, -125)).set(4, toCv(65, -100)).set(5, toCv(100, -75)).set(6, toCv(90, -50)).set(7, toCv(80, -35));
    const setPlayerVelocityToZero = {
      commandName: COMMAND_NAMES.VELOCITY_SET,
      payload: {
        x: 0,
        y: 0
      }
    };
    const bldr = new AttackConfigBuilder("SideSpecialExtensionAir");
    bldr.WithAttackId(ATTACK_IDS.S_SPCL_EX_AIR_ATK).WithTotalFrames(totalFrameLength).WithBaseKnockBack(baseKnockBack).WithKnockBackScaling(knockBackScaling).WithOnEnterCommand(setPlayerVelocityToZero).WithHitBubble(damage, radius, 0, launchAngle, hb1Offsets);
    return bldr.Build();
  }
  function GetDownSpecial() {
    const activeFrames = 77;
    const impulses = /* @__PURE__ */ new Map();
    const hb1OffSets = /* @__PURE__ */ new Map();
    const hb2OffSets = /* @__PURE__ */ new Map();
    const hb3offSets = /* @__PURE__ */ new Map();
    for (let i = 23; i < activeFrames - 10; i++) {
      impulses.set(i, toCv(2, 0));
      hb1OffSets.set(i, toCv(100, -25));
      hb2OffSets.set(i, toCv(70, -25));
      hb3offSets.set(i, toCv(40, -25));
    }
    const blrd = new AttackConfigBuilder("DSpecial");
    blrd.WithAttackId(ATTACK_IDS.D_SPCL_ATK).WithBaseKnockBack(15).WithKnockBackScaling(66).WithGravity(false).WithTotalFrames(activeFrames).WithHitBubble(15, 20, 0, 45, hb1OffSets).WithHitBubble(13, 19, 1, 45, hb2OffSets).WithHitBubble(12, 18, 2, 45, hb3offSets).WithImpulses(impulses, 12);
    return blrd.Build();
  }
  function GetDownSpecialAerial() {
    const activeFrames = 60;
    const launchAngle = 280;
    const impulses = /* @__PURE__ */ new Map();
    const hb1OffSets = /* @__PURE__ */ new Map();
    const hb2OffSets = /* @__PURE__ */ new Map();
    const hb3offSets = /* @__PURE__ */ new Map();
    const hb4OffSets = /* @__PURE__ */ new Map();
    for (let i = 13; i < activeFrames - 10; i++) {
      impulses.set(i, toCv(1.5, 1.5));
      hb1OffSets.set(i, toCv(60, 50));
      hb2OffSets.set(i, toCv(40, 25));
      hb3offSets.set(i, toCv(20, 0));
    }
    const setPlayerVelocityToZero = {
      commandName: COMMAND_NAMES.VELOCITY_SET,
      payload: {
        x: 0,
        y: 0
      }
    };
    const setJumpToOne = {
      commandName: COMMAND_NAMES.SET_JUMP_COUNT,
      payload: 1
    };
    const blrd = new AttackConfigBuilder("DSpecialAir");
    blrd.WithAttackId(ATTACK_IDS.D_SPCL_AIR_ATK).WithBaseKnockBack(15).WithKnockBackScaling(66).WithGravity(false).WithTotalFrames(activeFrames).WithHitBubble(15, 20, 0, launchAngle, hb1OffSets).WithHitBubble(13, 19, 1, launchAngle, hb2OffSets).WithHitBubble(12, 18, 3, launchAngle, hb3offSets).WithHitBubble(16, 25, 4, launchAngle, hb4OffSets).WithImpulses(impulses, 8).WithOnEnterCommand(setPlayerVelocityToZero).WithOnExitEvent(setJumpToOne);
    return blrd.Build();
  }
  function GetUpSpecial() {
    const totalFrameLength = 62;
    const impulses = /* @__PURE__ */ new Map();
    for (let i = 13; i < 29; i++) {
      impulses.set(i, toCv(1.2, -1.6));
    }
    const bldr = new AttackConfigBuilder("UpSpecial");
    const setPlayerVelocityToZero = {
      commandName: COMMAND_NAMES.VELOCITY_SET,
      payload: {
        x: 0,
        y: 0
      }
    };
    bldr.WithAttackId(ATTACK_IDS.U_SPCL_ATK).WithTotalFrames(totalFrameLength).WithImpulses(impulses, 10).WithGravity(false).WithOnEnterCommand(setPlayerVelocityToZero);
    return bldr.Build();
  }
  function GetGrab() {
    const totalFrames = 30;
    const radius = 30;
    const bubble1Offsets = /* @__PURE__ */ new Map();
    const cv = toCv(65, -50);
    bubble1Offsets.set(6, cv).set(7, cv).set(8, cv).set(9, cv).set(10, cv);
    const bldr = new GrabConfigBuilder("Grab");
    bldr.WithTotalFrames(totalFrames).WithGrabBubble(radius, bubble1Offsets).WithGrabId(GRAB_IDS.GRAB_G);
    return bldr.Build();
  }
  function generateArcBubbleOffsets(startAngle, endAngle, frames, distance, inwardRetract, frameStart = 12, invertY = true) {
    const offsets = /* @__PURE__ */ new Map();
    for (let i = 0; i < frames; i++) {
      const t = i / (frames - 1);
      const angle = startAngle + (endAngle - startAngle) * t;
      const retract = inwardRetract * t;
      const r = distance - retract;
      const x = r * Math.cos(angle);
      const y = r * Math.sin(angle);
      offsets.set(frameStart + i, toCv(x, invertY ? -y : y));
    }
    return offsets;
  }

  // game/engine/physics/collisions.ts
  var ONE3 = NumberToRaw(1);
  function IntersectsPolygons(verticiesA, verticiesB, vecPool, colResPool, projResPool) {
    let normal = vecPool.Rent();
    let depthRaw = MAX_RAW_VALUE;
    const verticiesAVec = vecPool.Rent();
    const verticiesBVec = vecPool.Rent();
    for (let i = 0; i < verticiesA.length; i++) {
      const va = verticiesA[i];
      const vb = verticiesA[(i + 1) % verticiesA.length];
      verticiesAVec.SetFromFlatVec(va);
      verticiesBVec.SetFromFlatVec(vb);
      const edge = verticiesBVec.SubtractVec(verticiesAVec);
      const tempXRaw = edge.X.Raw;
      edge.SetX(edge.Y.Negate());
      edge.SetYRaw(tempXRaw);
      let axis = edge.Normalize();
      const vaProj = projectVerticies(verticiesA, axis, projResPool);
      const vbProj = projectVerticies(verticiesB, axis, projResPool);
      if (vaProj.Min.GreaterThanOrEqualTo(vbProj.Max) || vbProj.Min.GreaterThanOrEqualTo(vaProj.Max)) {
        return colResPool.Rent();
      }
      const vbVaDepthRaw = vbProj.Max.Raw - vaProj.Min.Raw;
      const vaVbDepthRaw = vaProj.Max.Raw - vbProj.Min.Raw;
      const axisDepthRaw = Math.min(vbVaDepthRaw, vaVbDepthRaw);
      if (axisDepthRaw < depthRaw) {
        depthRaw = axisDepthRaw;
        normal.SetFromPooledVec(axis);
      }
    }
    verticiesAVec.Zero();
    verticiesBVec.Zero();
    for (let i = 0; i < verticiesB.length; i++) {
      const va = verticiesB[i];
      const vb = verticiesB[(i + 1) % verticiesB.length];
      verticiesAVec.SetXY(va.X, va.Y);
      verticiesBVec.SetXY(vb.X, vb.Y);
      const edge = verticiesBVec.SubtractVec(verticiesAVec);
      const tempXRaw = edge.X.Raw;
      edge.SetX(edge.Y.Negate());
      edge.SetYRaw(tempXRaw);
      let axis = edge.Normalize();
      const vaProj = projectVerticies(verticiesA, axis, projResPool);
      const vbProj = projectVerticies(verticiesB, axis, projResPool);
      if (vaProj.Min.GreaterThanOrEqualTo(vbProj.Max) || vbProj.Min.GreaterThanOrEqualTo(vaProj.Max)) {
        return colResPool.Rent();
      }
      const vbVaDepthRaw = vbProj.Max.Raw - vaProj.Min.Raw;
      const vaVbDepthRaw = vaProj.Max.Raw - vbProj.Min.Raw;
      const axisDepthRaw = Math.min(vbVaDepthRaw, vaVbDepthRaw);
      if (axisDepthRaw < depthRaw) {
        depthRaw = axisDepthRaw;
        normal.SetXY(axis.X, axis.Y);
      }
    }
    const centerA = FindArithemticMean(verticiesA, vecPool.Rent());
    const centerB = FindArithemticMean(verticiesB, vecPool.Rent());
    const direction = centerB.SubtractVec(centerA);
    const dp = DotProductRaw(
      direction.X.Raw,
      direction.Y.Raw,
      normal.X.Raw,
      normal.Y.Raw
    );
    if (dp < 0) {
      normal.Negate();
    }
    const res = colResPool.Rent();
    res.SetCollisionTrueRaw(normal.X.Raw, normal.Y.Raw, depthRaw);
    return res;
  }
  function IntersectsCircles(colResPool, v1, v2, r1, r2) {
    const distRaw = v1.DistanceRaw(v2);
    const raddiRaw = r1.Raw + r2.Raw;
    if (distRaw > raddiRaw) {
      return colResPool.Rent();
    }
    const norm = v2.SubtractVec(v1).Normalize();
    const depthRaw = raddiRaw - distRaw;
    const returnValue = colResPool.Rent();
    returnValue.SetCollisionTrueRaw(norm.X.Raw, norm.Y.Raw, depthRaw);
    return returnValue;
  }
  function IntersectsCirclesRaw(colResPool, x1Raw, y1Raw, x2Raw, y2Raw, r1Raw, r2Raw) {
    const distRaw = DistanceRaw(x1Raw, y1Raw, x2Raw, y2Raw);
    const raddiRaw = r1Raw + r2Raw;
    if (distRaw > raddiRaw) {
      return colResPool.Rent();
    }
    const xr = x1Raw - x2Raw;
    const yr = y1Raw - y2Raw;
    const normX = DivideRaw(xr, distRaw);
    const normY = DivideRaw(yr, distRaw);
    const depthRaw = raddiRaw - distRaw;
    const returnValue = colResPool.Rent();
    returnValue.SetCollisionTrueRaw(normX, normY, depthRaw);
    return returnValue;
  }
  function IntersectsCirclesRawBool(x1Raw, y1Raw, x2Raw, y2Raw, r1Raw, r2Raw) {
    const distRaw = DistanceRaw(x1Raw, y1Raw, x2Raw, y2Raw);
    const raddiRaw = r1Raw + r2Raw;
    if (distRaw > raddiRaw) {
      return false;
    }
    return true;
  }
  function ClosestPointsBetweenSegments(p1, q1, p2, q2, vecPool, ClosestPointsPool) {
    const isSegment1Point = p1.X.Equals(q1.X) && p1.Y.Equals(q1.Y);
    const isSegment2Point = p2.X.Equals(q2.X) && p2.Y.Equals(q2.Y);
    if (isSegment1Point && isSegment2Point) {
      const ret = ClosestPointsPool.Rent();
      ret.Set(p1.X, p1.Y, p2.X, p2.Y);
      return ret;
    }
    if (isSegment1Point) {
      return closestPointOnSegmentToPoint(p2, q2, p1, ClosestPointsPool);
    }
    if (isSegment2Point) {
      return closestPointOnSegmentToPoint(p1, q1, p2, ClosestPointsPool);
    }
    const p1Dto = vecPool.Rent().SetXY(p1.X, p1.Y);
    const p2Dto = vecPool.Rent().SetXY(p2.X, p2.Y);
    const d1 = vecPool.Rent().SetFromPooledVec(q1).SubtractVec(p1Dto);
    const d2 = vecPool.Rent().SetFromPooledVec(q2).SubtractVec(p2Dto);
    const r = p1Dto.SubtractVec(p2Dto);
    const aRaw = DotProductVectorRaw(d1, d1);
    const eRaw = DotProductVectorRaw(d2, d2);
    const fRaw = DotProductVectorRaw(d2, r);
    let sRaw = 0;
    let tRaw = 0;
    const bRaw = DotProductVectorRaw(d1, d2);
    const cRaw = DotProductVectorRaw(d1, r);
    const denomT1Raw = MultiplyRaw(aRaw, eRaw);
    const denomT2Raw = MultiplyRaw(bRaw, bRaw);
    const denomRaw = denomT1Raw - denomT2Raw;
    if (denomRaw !== 0) {
      const sNumeT1Raw = MultiplyRaw(bRaw, fRaw);
      const sNumeT2Raw = MultiplyRaw(cRaw, eRaw);
      const sNumeRaw = sNumeT1Raw - sNumeT2Raw;
      sRaw = DivideRaw(sNumeRaw, denomRaw);
      sRaw = ClampWithMin(sRaw, 0, ONE3);
    } else {
      sRaw = 0;
    }
    const tNumeT1 = MultiplyRaw(bRaw, sRaw);
    const tNume = tNumeT1 + fRaw;
    tRaw = eRaw > 0 ? DivideRaw(tNume, eRaw) : 0;
    if (tRaw < 0) {
      tRaw = 0;
      sRaw = DivideRaw(-cRaw, aRaw);
      sRaw = ClampWithMin(sRaw, 0, ONE3);
    } else if (tRaw > ONE3) {
      tRaw = ONE3;
      const sNumeRaw = bRaw - cRaw;
      sRaw = DivideRaw(sNumeRaw, aRaw);
      sRaw = ClampWithMin(sRaw, 0, ONE3);
    }
    const c1X = p1.X.Raw + MultiplyRaw(sRaw, d1.X.Raw);
    const c1Y = p1.Y.Raw + MultiplyRaw(sRaw, d1.Y.Raw);
    const c2X = p2Dto.X.Raw + MultiplyRaw(tRaw, d2.X.Raw);
    const c2Y = p2Dto.Y.Raw + MultiplyRaw(tRaw, d2.Y.Raw);
    const closestPoints = ClosestPointsPool.Rent();
    closestPoints.SetRaw(c1X, c1Y, c2X, c2Y);
    return closestPoints;
  }
  function FindArithemticMean(verticies, pooledVec) {
    let sumXRaw = 0;
    let sumYRaw = 0;
    const vertLength = verticies.length;
    for (let index = 0; index < vertLength; index++) {
      const v = verticies[index];
      sumXRaw += v.X.Raw;
      sumYRaw += v.Y.Raw;
    }
    const lengthRaw = NumberToRaw(vertLength);
    sumXRaw = DivideRaw(sumXRaw, lengthRaw);
    sumYRaw = DivideRaw(sumYRaw, lengthRaw);
    return pooledVec.SetXYRaw(sumXRaw, sumYRaw);
  }
  function closestPointOnSegmentToPoint(segStart, segEnd, point, ClosestPointsPool) {
    const segStartXRaw = segStart.X.Raw;
    const segStartYRaw = segStart.Y.Raw;
    const segEndXRaw = segEnd.X.Raw;
    const segEndYRaw = segEnd.Y.Raw;
    const pointXRaw = point.X.Raw;
    const pointYRaw = point.Y.Raw;
    const segVecXRaw = segEndXRaw - segStartXRaw;
    const segVecYRaw = segEndYRaw - segStartYRaw;
    const pointVecXRaw = pointXRaw - segStartXRaw;
    const pointVecYRaw = pointYRaw - segStartYRaw;
    const xLengthRaw = MultiplyRaw(segVecXRaw, segVecXRaw);
    const yLengthRaw = MultiplyRaw(segVecYRaw, segVecYRaw);
    const segLengthSquaredRaw = xLengthRaw + yLengthRaw;
    let tRaw = 0;
    if (segLengthSquaredRaw > 0) {
      const tT1Raw = MultiplyRaw(pointVecXRaw, segVecXRaw);
      const tT2Raw = MultiplyRaw(pointVecYRaw, segVecYRaw);
      const tNumeratorRaw = tT1Raw + tT2Raw;
      tRaw = DivideRaw(tNumeratorRaw, segLengthSquaredRaw);
      if (tRaw < 0) {
        tRaw = 0;
      } else if (tRaw > ONE3) {
        tRaw = ONE3;
      }
    }
    const segXTRaw = MultiplyRaw(segVecXRaw, tRaw);
    const segYTRaw = MultiplyRaw(segVecYRaw, tRaw);
    const closestX = segStartXRaw + segXTRaw;
    const closestY = segStartYRaw + segYTRaw;
    const ret = ClosestPointsPool.Rent();
    ret.SetRaw(closestX, closestY, pointXRaw, pointYRaw);
    return ret;
  }
  function projectVerticies(verticies, axis, projResPool) {
    let min = MAX_RAW_VALUE;
    let max = MIN_RAW_VALUE;
    for (let i = 0; i < verticies.length; i++) {
      const v = verticies[i];
      const projection = DotProductRaw(v.X.Raw, v.Y.Raw, axis.X.Raw, axis.Y.Raw);
      if (projection < min) {
        min = projection;
      }
      if (projection > max) {
        max = projection;
      }
    }
    let result = projResPool.Rent();
    result.SetMinMaxRaw(min, max);
    return result;
  }
  function LineSegmentIntersectionRaw(ax1, ay1, ax2, ay2, bx3, by3, bx4, by4) {
    const denom = MultiplyRaw(by4 - by3, ax2 - ax1) - MultiplyRaw(bx4 - bx3, ay2 - ay1);
    if (denom === 0) {
      return false;
    }
    const numeA = MultiplyRaw(bx4 - bx3, ay1 - by3) - MultiplyRaw(by4 - by3, ax1 - bx3);
    const numeB = MultiplyRaw(ax2 - ax1, ay1 - by3) - MultiplyRaw(ay2 - ay1, ax1 - bx3);
    const uA = DivideRaw(numeA, denom);
    const uB = DivideRaw(numeB, denom);
    const oneRaw = NumberToRaw(1);
    if (uA >= 0 && uA <= oneRaw && uB >= 0 && uB <= oneRaw) {
      return true;
    }
    return false;
  }
  function LineSegmentIntersectionFp(ax1, ay1, ax2, ay2, bx3, by3, bx4, by4) {
    return LineSegmentIntersectionRaw(
      ax1.Raw,
      ay1.Raw,
      ax2.Raw,
      ay2.Raw,
      bx3.Raw,
      by3.Raw,
      bx4.Raw,
      by4.Raw
    );
  }
  function cross(o, a, b) {
    const term1_part1Raw = a.X.Raw - o.X.Raw;
    const term1_part2Raw = b.Y.Raw - o.Y.Raw;
    const term1Raw = MultiplyRaw(term1_part1Raw, term1_part2Raw);
    const term2_part1Raw = a.Y.Raw - o.Y.Raw;
    const term2_part2Raw = b.X.Raw - o.X.Raw;
    const term2Raw = MultiplyRaw(term2_part1Raw, term2_part2Raw);
    return term1Raw - term2Raw;
  }
  function comparePointsXY(a, b) {
    if (a.X.Equals(b.X)) {
      const diff2 = a.Y.Raw - b.Y.Raw;
      return diff2;
    }
    const diff = a.X.Raw - b.X.Raw;
    return diff;
  }
  var LOWER = [];
  var UPPER = [];
  function CreateConvexHull(points) {
    if (points.length < 3) {
      LOWER.length = 0;
      for (let i = 0; i < points.length; i++) {
        LOWER.push(points[i]);
      }
      return LOWER;
    }
    points.sort(comparePointsXY);
    LOWER.length = 0;
    UPPER.length = 0;
    for (let i = 0; i < points.length; i++) {
      const p = points[i];
      while (LOWER.length >= 2 && cross(LOWER[LOWER.length - 2], LOWER[LOWER.length - 1], p) <= 0) {
        LOWER.pop();
      }
      LOWER.push(p);
    }
    for (let i = points.length - 1; i >= 0; i--) {
      const p = points[i];
      while (UPPER.length >= 2 && cross(UPPER[UPPER.length - 2], UPPER[UPPER.length - 1], p) <= 0) {
        UPPER.pop();
      }
      UPPER.push(p);
    }
    LOWER.pop();
    UPPER.pop();
    for (let i = 0; i < UPPER.length; i++) {
      LOWER.push(UPPER[i]);
    }
    return LOWER;
  }

  // game/engine/finite-state-machine/stateConfigurations/conditions.ts
  var WALK_TO_DASH_STATE_FRAME_THRESHOLD = 2;
  var DASH_TO_TURN_THRESHOLD = NumberToRaw(0.5);
  var SPOT_DODGE_LYAXIS_THRESHOLD = NumberToRaw(0.25);
  var ROLL_DODGE_LXAXIS_THRESHOLD = NumberToRaw(0.25);
  var UP_CHARGE_EX_RYAXIS_THRESHOLD = NumberToRaw(0.1);
  var DOWN_CHARGE_EX_RYAXIS_THRESHOLD = NumberToRaw(-0.1);
  var TURN_TO_DASH_LXAXIS_THRESHOLD = NumberToRaw(0.5);
  function RunCondition(c, w, playerIndex) {
    if (c.ConditionFunc(w, playerIndex) === true) {
      return c.StateId;
    }
    return void 0;
  }
  var IdleToTurn = {
    Name: "IdleToTurn",
    ConditionFunc: (w, playerIndex) => {
      const p = w.PlayerData.Player(playerIndex);
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const flags = p.Flags;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.LXAxisRaw < 0 && flags.IsFacingRight) {
        return true;
      }
      if (ia.LXAxisRaw > 0 && flags.IsFacingLeft) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.TURN_S
  };
  var IdleToDash = {
    Name: "IdleToDash",
    ConditionFunc: (w, playerIndex) => {
      const p = w.PlayerData.Player(playerIndex);
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      if (prevIa.Action === GAME_EVENT_IDS.MOVE_FAST_GE) {
        return false;
      }
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.Action !== GAME_EVENT_IDS.MOVE_FAST_GE) {
        return false;
      }
      const facingRight = p.Flags.IsFacingRight;
      const lxAxisRaw = ia.LXAxisRaw;
      if (lxAxisRaw > 0 && facingRight) {
        return true;
      }
      if (lxAxisRaw < 0 && !facingRight) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.DASH_S
  };
  var IdleToDashTurn = {
    Name: "IdleToTurnDash",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      if (prevIa.Action === GAME_EVENT_IDS.MOVE_FAST_GE) {
        return false;
      }
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.Action !== GAME_EVENT_IDS.MOVE_FAST_GE) {
        return false;
      }
      const p = w.PlayerData.Player(playerIndex);
      const flags = p.Flags;
      const lxAxisRaw = ia.LXAxisRaw;
      if (lxAxisRaw < 0 && flags.IsFacingRight) {
        return true;
      }
      if (lxAxisRaw > 0 && flags.IsFacingLeft) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.DASH_TURN_S
  };
  var shieldToShieldDrop = {
    Name: "ToShieldDrop",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.LTValRaw === 0 && ia.RTValRaw === 0) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.SHIELD_DROP_S
  };
  var WalkToDash = {
    Name: "WalkToDash",
    ConditionFunc: (w, playerIndex) => {
      const p = w.PlayerData.Player(playerIndex);
      const fsmInfo = p.FSMInfo;
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      if (fsmInfo.CurrentStateFrame > WALK_TO_DASH_STATE_FRAME_THRESHOLD || prevIa.Action === GAME_EVENT_IDS.MOVE_FAST_GE) {
        return false;
      }
      const flags = p.Flags;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (flags.IsFacingRight && ia.LXAxisRaw > 0 && ia.Action === GAME_EVENT_IDS.MOVE_FAST_GE) {
        return true;
      }
      if (flags.IsFacingLeft && ia.LXAxisRaw < 0 && ia.Action === GAME_EVENT_IDS.MOVE_FAST_GE) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.DASH_S
  };
  var WalkToTurn = {
    Name: "WalkToTurn",
    ConditionFunc: (w, playerIndex) => {
      const player = w.PlayerData.Player(playerIndex);
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      if (prevIa === void 0) {
        return false;
      }
      const prevLaxRaw = prevIa.LXAxisRaw;
      const curLaxRaw = ia.LXAxisRaw;
      if (prevLaxRaw < 0 && curLaxRaw > 0 || prevLaxRaw > 0 && curLaxRaw < 0) {
        return true;
      }
      const flags = player.Flags;
      if (prevLaxRaw === 0 && flags.IsFacingRight && curLaxRaw < 0 || prevLaxRaw === 0 && flags.IsFacingLeft && curLaxRaw > 0) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.TURN_S
  };
  var RunToRunStopByGuard = {
    Name: "RunToRunStopByGuard",
    ConditionFunc: (w, playerIndex) => {
      const pd = w.PlayerData;
      const inputStore = pd.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.Action === GAME_EVENT_IDS.GUARD_GE) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.STOP_RUN_S
  };
  var RunToTurn = {
    Name: "RunToTurn",
    ConditionFunc: (w, playerIndex) => {
      const player = w.PlayerData.Player(playerIndex);
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      if (prevIa === void 0) {
        return false;
      }
      const prevLaxRaw = prevIa.LXAxisRaw;
      const curLaxRaw = ia.LXAxisRaw;
      if (prevLaxRaw < 0 && curLaxRaw > 0 || prevLaxRaw > 0 && curLaxRaw < 0) {
        return true;
      }
      const flags = player.Flags;
      if (prevLaxRaw === 0 && flags.IsFacingRight && curLaxRaw < 0 || prevLaxRaw === 0 && flags.IsFacingLeft && curLaxRaw > 0) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.RUN_TURN_S
  };
  var DashToTurn = {
    Name: "DashToTurn",
    ConditionFunc: (w, playerIndex) => {
      const player = w.PlayerData.Player(playerIndex);
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      if (prevIa === void 0) {
        return false;
      }
      const prevLaxRaw = prevIa.LXAxisRaw;
      const curLaxRaw = ia.LXAxisRaw;
      const laxDifferenceRaw = curLaxRaw - prevLaxRaw;
      const flags = player.Flags;
      const facingRight = flags.IsFacingRight;
      if (laxDifferenceRaw < -DASH_TO_TURN_THRESHOLD && facingRight) {
        if (curLaxRaw < 0) {
          return true;
        }
      }
      if (laxDifferenceRaw > DASH_TO_TURN_THRESHOLD && !facingRight) {
        if (curLaxRaw > 0) {
          return true;
        }
      }
      return false;
    },
    StateId: STATE_IDS.DASH_TURN_S
  };
  var ToJump = {
    Name: "ToJump",
    ConditionFunc: (w, playerIndex) => {
      const player = w.PlayerData.Player(playerIndex);
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      const jumpId = GAME_EVENT_IDS.JUMP_GE;
      if (inputActionMacthesTargetNotRepeating(jumpId, ia, prevIa) && player.Jump.HasJumps()) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.JUMP_S
  };
  var ToAirDodge = {
    Name: "ToAirDodge",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      return isBufferedInput(inputStore, curFrame, 3, GAME_EVENT_IDS.GUARD_GE);
    },
    StateId: STATE_IDS.AIR_DODGE_S
  };
  var DashDefaultRun = {
    Name: "DashDefaultRun",
    ConditionFunc: (w, playerIndex) => {
      const p = w.PlayerData.Player(playerIndex);
      const flags = p.Flags;
      const inputStore = w.PlayerData.InputStore(p.ID);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.LXAxisRaw > 0 && flags.IsFacingRight) {
        return true;
      }
      if (ia.LXAxisRaw < 0 && flags.IsFacingLeft) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.RUN_S
  };
  var DashDefaultIdle = {
    Name: "DashDefaultIdle",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.LXAxisRaw === 0) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.IDLE_S
  };
  var TurnDefaultWalk = {
    Name: "TurnDefaultWalk",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const p = w.PlayerData.Player(playerIndex);
      const facingRight = p?.Flags.IsFacingRight;
      if (facingRight && ia.LXAxisRaw < 0 || !facingRight && ia.LXAxisRaw > 0) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.WALK_S
  };
  var TurnToDash = {
    Name: "TurnToDash",
    ConditionFunc: (w, playerIndex) => {
      const p = w.PlayerData.Player(playerIndex);
      const stateFrame = p.FSMInfo.CurrentStateFrame;
      if (stateFrame > WALK_TO_DASH_STATE_FRAME_THRESHOLD) {
        return false;
      }
      const inputStore = w.PlayerData.InputStore(p.ID);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.LXAxisRaw < -TURN_TO_DASH_LXAXIS_THRESHOLD && p.Flags.IsFacingRight || ia.LXAxisRaw > TURN_TO_DASH_LXAXIS_THRESHOLD && p.Flags.IsFacingLeft) {
        const prevIa = inputStore.GetInputForFrame(w.PreviousFrame);
        return inputActionMacthesTargetNotRepeating(
          GAME_EVENT_IDS.MOVE_FAST_GE,
          ia,
          prevIa
        );
      }
      return false;
    },
    StateId: STATE_IDS.DASH_S
  };
  var ToNair = {
    Name: "ToNAir",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      return inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.ATTACK_GE,
        ia,
        prevIa
      );
    },
    StateId: STATE_IDS.N_AIR_S
  };
  var ToFAir = {
    Name: "ToFAir",
    ConditionFunc: (w, playerIndex) => {
      const p = w.PlayerData.Player(playerIndex);
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      if (ia.Action === prevIa.Action) {
        return false;
      }
      if (ia.Action !== GAME_EVENT_IDS.SIDE_ATTACK_GE) {
        return false;
      }
      const isFacingRight = p?.Flags.IsFacingRight;
      const IsFacingLeft = !isFacingRight;
      const isRStickXAxisActuated = Math.abs(ia.RXAxisRaw) > 0;
      if (isRStickXAxisActuated === true) {
        if (isFacingRight && ia.RXAxisRaw > 0) {
          return true;
        }
        if (IsFacingLeft && ia.RXAxisRaw < 0) {
          return true;
        }
      }
      if (isRStickXAxisActuated === false) {
        if (isFacingRight && ia.LXAxisRaw > 0) {
          return true;
        }
        if (IsFacingLeft && ia.LXAxisRaw < 0) {
          return true;
        }
      }
      return false;
    },
    StateId: STATE_IDS.F_AIR_S
  };
  var ToBAir = {
    Name: "ToBAir",
    ConditionFunc: (w, playerIndex) => {
      const p = w.PlayerData.Player(playerIndex);
      const inputStore = w.PlayerData.InputStore(p.ID);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      if (ia.Action === prevIa?.Action) {
        return false;
      }
      if (ia.Action === GAME_EVENT_IDS.SIDE_ATTACK_GE) {
        if (p.Flags.IsFacingRight && (ia.RXAxisRaw < 0 || ia.LXAxisRaw < 0)) {
          return true;
        }
        if (p.Flags.IsFacingLeft && (ia.RXAxisRaw > 0 || ia.LXAxisRaw > 0)) {
          return true;
        }
      }
      return false;
    },
    StateId: STATE_IDS.B_AIR_S
  };
  var ToUAir = {
    Name: "ToUAir",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      return inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.UP_ATTACK_GE,
        ia,
        prevIa
      );
    },
    StateId: STATE_IDS.U_AIR_S
  };
  var ToDAir = {
    Name: "ToDAir",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      return inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.DOWN_ATTACK_GE,
        ia,
        prevIa
      );
    },
    StateId: STATE_IDS.D_AIR_S
  };
  var SideTiltToWalk = {
    Name: "SideTiltToWalk",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.Action !== GAME_EVENT_IDS.MOVE_GE || ia.Action !== GAME_EVENT_IDS.MOVE_FAST_GE) {
        return false;
      }
      const p = w.PlayerData.Player(playerIndex);
      const flags = p.Flags;
      if (ia.LXAxisRaw > 0 && flags.IsFacingRight) {
        return true;
      }
      if (ia.LXAxisRaw < 0 && flags.IsFacingLeft) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.WALK_S
  };
  var LandToIdle = {
    Name: "LandToIdle",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.LXAxisRaw === 0) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.IDLE_S
  };
  var LandToWalk = {
    Name: "LandToWalk",
    ConditionFunc: (w, playerIndex) => {
      const p = w.PlayerData.Player(playerIndex);
      const flags = p.Flags;
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.LXAxisRaw > 0 && flags.IsFacingRight) {
        return true;
      }
      if (ia.LXAxisRaw < 0 && flags.IsFacingLeft) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.WALK_S
  };
  var LandToTurn = {
    Name: "LandToTurn",
    ConditionFunc: (w, playerIndex) => {
      const p = w.PlayerData.Player(playerIndex);
      const flags = p.Flags;
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.LXAxisRaw < 0 && flags.IsFacingRight) {
        return true;
      }
      if (ia.LXAxisRaw > 0 && flags.IsFacingLeft) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.TURN_S
  };
  var DefaultDownTiltToCrouch = {
    Name: "DefaultDownTiltToCrouch",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.Action === GAME_EVENT_IDS.DOWN_GE) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.CROUCH_S
  };
  var RunStopToTurn = {
    Name: "RunStopToTurn",
    ConditionFunc: (w, playerIndex) => {
      const p = w.PlayerData.Player(playerIndex);
      const flags = p.Flags;
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.LXAxisRaw > 0 && flags.IsFacingLeft) {
        return true;
      }
      if (ia.LXAxisRaw < 0 && flags.IsFacingRight) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.RUN_TURN_S
  };
  var IdleToAttack = {
    Name: "IdleToAttack",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      return inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.ATTACK_GE,
        ia,
        prevIa
      );
    },
    StateId: STATE_IDS.ATTACK_S
  };
  var ToSideCharge = {
    Name: "ToSideCharge",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      if (inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.SIDE_ATTACK_GE,
        ia,
        prevIa
      ) === false) {
        return false;
      }
      const rxAbsRaw = Math.abs(ia.RXAxisRaw);
      if (rxAbsRaw > 0 && rxAbsRaw > Math.abs(ia.RYAxisRaw)) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.SIDE_CHARGE_S
  };
  var IdleToUpTilt = {
    Name: "IdleToUpTilt",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      if (inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.UP_ATTACK_GE,
        ia,
        prevIa
      ) === false) {
        return false;
      }
      if (ia.RYAxisRaw > 0) {
        return false;
      }
      return true;
    },
    StateId: STATE_IDS.UP_TILT_S
  };
  var ToUpCharge = {
    Name: "ToUpCharge",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      if (inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.UP_ATTACK_GE,
        ia,
        prevIa
      ) === false) {
        return false;
      }
      if (Math.abs(ia.RYAxisRaw) > Math.abs(ia.RXAxisRaw) === false) {
        return false;
      }
      return true;
    },
    StateId: STATE_IDS.UP_CHARGE_S
  };
  var ToDownCharge = {
    Name: "ToDownCharge",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      if (inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.DOWN_ATTACK_GE,
        ia,
        prevIa
      ) === false) {
        return false;
      }
      if (ia.RYAxisRaw >= 0) {
        return false;
      }
      if (Math.abs(ia.RYAxisRaw) > Math.abs(ia.RXAxisRaw) === false) {
        return false;
      }
      return true;
    },
    StateId: STATE_IDS.DOWN_CHARGE_S
  };
  var RunToDashAttack = {
    Name: "ToDashAttack",
    ConditionFunc: (w, playerIndex) => {
      const p = w.PlayerData.Player(playerIndex);
      const inputStore = w.PlayerData.InputStore(p.ID);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.Action === GAME_EVENT_IDS.SIDE_ATTACK_GE) {
        if (Math.abs(ia.RXAxisRaw) > 0) {
          return false;
        }
        const facingRight = p.Flags.IsFacingRight;
        if (ia.LXAxisRaw > 0 && facingRight || ia.LXAxisRaw < 0 && facingRight === false) {
          return true;
        }
      }
      return false;
    },
    StateId: STATE_IDS.DASH_ATTACK_S
  };
  var ToSideTilt = {
    Name: "ToSideTilt",
    ConditionFunc: (w, playerIndex) => {
      const p = w.PlayerData.Player(playerIndex);
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.Action !== GAME_EVENT_IDS.SIDE_ATTACK_GE) {
        return false;
      }
      if (Math.abs(ia.RXAxisRaw) > 0) {
        return false;
      }
      const facingRight = p.Flags.IsFacingRight;
      if (ia.LXAxisRaw > 0 && facingRight || ia.LXAxisRaw < 0 && !facingRight) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.SIDE_TILT_S
  };
  var ToNSpecial = {
    Name: "ToNSpecial",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      return inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.SPCL_GE,
        ia,
        prevIa
      );
    },
    StateId: STATE_IDS.SPCL_S
  };
  var ToSideSpecial = {
    Name: "ToSideSpecial",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      return inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.SIDE_SPCL_GE,
        ia,
        prevIa
      );
    },
    StateId: STATE_IDS.SIDE_SPCL_S
  };
  var ToSideSpecialAir = {
    Name: "ToSideSpecialAir",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      return inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.SIDE_SPCL_GE,
        ia,
        prevIa
      );
    },
    StateId: STATE_IDS.SIDE_SPCL_AIR_S
  };
  var ToDownSpecial = {
    Name: "ToDownSpecial",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      return inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.DOWN_SPCL_GE,
        ia,
        prevIa
      );
    },
    StateId: STATE_IDS.DOWN_SPCL_S
  };
  var ToDownSpecialAir = {
    Name: "ToDownSpecialAir",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      return inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.DOWN_SPCL_GE,
        ia,
        prevIa
      );
    },
    StateId: STATE_IDS.DOWN_SPCL_AIR_S
  };
  var ToUpSpecial = {
    Name: "ToUpSpecial",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      return inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.UP_SPCL_GE,
        ia,
        prevIa
      );
    },
    StateId: STATE_IDS.UP_SPCL_S
  };
  var ToDownTilt = {
    Name: "ToDownTilt",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const prevFrame = w.PreviousFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const prevIa = inputStore.GetInputForFrame(prevFrame);
      return inputActionMacthesTargetNotRepeating(
        GAME_EVENT_IDS.DOWN_ATTACK_GE,
        ia,
        prevIa
      );
    },
    StateId: STATE_IDS.DOWN_TILT_S
  };
  var HitStopToLaunch = {
    Name: "HitStopToLaunch",
    ConditionFunc: (w, playerIndex) => {
      const p = w.PlayerData.Player(playerIndex);
      if (p.HitStop.HitStopFrames > 0) {
        return false;
      }
      return true;
    },
    StateId: STATE_IDS.LAUNCH_S
  };
  var LaunchToTumble = {
    Name: "LaunchToHitStun",
    ConditionFunc: (w, playerIndex) => {
      const p = w.PlayerData.Player(playerIndex);
      if (p.HitStun.FramesOfHitStun > 0) {
        return false;
      }
      return true;
    },
    StateId: STATE_IDS.TUMBLE_S
  };
  var SideChargeToEx = {
    Name: "SideChargeToEx",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.Action === GAME_EVENT_IDS.IDLE_GE) {
        return true;
      }
      const p = w.PlayerData.Player(playerIndex);
      const flags = p.Flags;
      if (flags.IsFacingRight && ia.RXAxisRaw <= 0) {
        return true;
      }
      if (flags.IsFacingLeft && ia.RXAxisRaw >= 0) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.SIDE_CHARGE_EX_S
  };
  var UpChargeToEx = {
    Name: "UpChargeToEx",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.Action === GAME_EVENT_IDS.IDLE_GE) {
        return true;
      }
      if (ia.RYAxisRaw <= UP_CHARGE_EX_RYAXIS_THRESHOLD) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.UP_CHARGE_EX_S
  };
  var DownChargeToEx = {
    Name: "DownChargeToEx",
    ConditionFunc: (w, playerIndex) => {
      const inputStore = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.Action === GAME_EVENT_IDS.IDLE_GE) {
        return true;
      }
      if (ia.RYAxisRaw >= DOWN_CHARGE_EX_RYAXIS_THRESHOLD) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.DOWN_CHARGE_EX_S
  };
  var ToSpotDodge = {
    Name: "ToSpotDodge",
    ConditionFunc: (w, playerIndex) => {
      const ips = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = ips.GetInputForFrame(curFrame);
      const prevIa = ips.GetInputForFrame(w.PreviousFrame);
      if (ia.Action === GAME_EVENT_IDS.GUARD_GE) {
        const lyAxisDiff = prevIa.LYAxisRaw - ia.LYAxisRaw;
        if (ia.LYAxisRaw < 0 && ia.LYAxisRaw < prevIa.LYAxisRaw && lyAxisDiff >= SPOT_DODGE_LYAXIS_THRESHOLD) {
          return true;
        }
      }
      return false;
    },
    StateId: STATE_IDS.SPOT_DODGE_S
  };
  var ToRollDodge = {
    Name: "ToRollDodge",
    ConditionFunc: (w, playerIndex) => {
      const ips = w.PlayerData.InputStore(playerIndex);
      const curFrame = w.LocalFrame;
      const ia = ips.GetInputForFrame(curFrame);
      if (ia.Action !== GAME_EVENT_IDS.GUARD_GE) {
        return false;
      }
      const prevIa = ips.GetInputForFrame(w.PreviousFrame);
      const lxAxisDiffRaw = prevIa.LXAxisRaw - ia.LXAxisRaw;
      if (ia.LXAxisRaw > 0 && ia.LXAxisRaw > prevIa.LXAxisRaw && lxAxisDiffRaw <= -ROLL_DODGE_LXAXIS_THRESHOLD) {
        return true;
      }
      if (ia.LXAxisRaw < 0 && ia.LXAxisRaw < prevIa.LXAxisRaw && lxAxisDiffRaw >= ROLL_DODGE_LXAXIS_THRESHOLD) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.ROLL_DODGE_S
  };
  var shieldBreakDefaultShieldTumble = {
    Name: "ShieldBreakToShieldLaunch",
    ConditionFunc: (w, playerIndex) => {
      return true;
    },
    StateId: STATE_IDS.SHIELD_BREAK_TUMBLE_S
  };
  var shieldBreakLandDefaultToDizzy = {
    Name: "ShieldBreakToDizzy",
    ConditionFunc: (w, playerIndex) => {
      return true;
    },
    StateId: STATE_IDS.DIZZY_S
  };
  var defaultWalk = {
    Name: "Walk",
    ConditionFunc: (w, playerIndex) => {
      return true;
    },
    StateId: STATE_IDS.WALK_S
  };
  var defaultTrunRunToIdle = {
    Name: "DefaultTrunRunToIdle",
    ConditionFunc: (w, playerIndex) => {
      const ia = w.PlayerData.InputStore(playerIndex).GetInputForFrame(
        w.LocalFrame
      );
      const p = w.PlayerData.Player(playerIndex);
      const facingRight = p.Flags.IsFacingRight;
      if (ia.LXAxisRaw > 0 && facingRight) {
        return true;
      }
      if (ia.LXAxisRaw < 0 && !facingRight) {
        return true;
      }
      return false;
    },
    StateId: STATE_IDS.IDLE_S
  };
  var defaultRun = {
    Name: "Run",
    ConditionFunc: (w, playerIndex) => {
      return true;
    },
    StateId: STATE_IDS.RUN_S
  };
  var defaultIdle = {
    Name: "Idle",
    ConditionFunc: (w, playerIndex) => {
      return true;
    },
    StateId: STATE_IDS.IDLE_S
  };
  var defaultDash = {
    Name: "Dash",
    ConditionFunc: (w, playerIndex) => {
      return true;
    },
    StateId: STATE_IDS.DASH_S
  };
  var defaultJump = {
    Name: "Jump",
    ConditionFunc: (w, playerIndex) => {
      return true;
    },
    StateId: STATE_IDS.JUMP_S
  };
  var defaultShield = {
    Name: "Shield",
    ConditionFunc: (w, playerIndex) => {
      return true;
    },
    StateId: STATE_IDS.SHIELD_S
  };
  var defaultNFall = {
    Name: "NFall",
    ConditionFunc: (w, playerIndex) => {
      return true;
    },
    StateId: STATE_IDS.N_FALL_S
  };
  var defaultHelpess = {
    Name: "Helpless",
    ConditionFunc: (w, playerIndex) => {
      return true;
    },
    StateId: STATE_IDS.HELPLESS_S
  };
  var defaultSideChargeEx = {
    Name: "DefaultSideChargeEx",
    ConditionFunc: (w, playerIndex) => {
      return true;
    },
    StateId: STATE_IDS.SIDE_CHARGE_EX_S
  };
  var defaultUpChargeEx = {
    Name: "DefaultUpChargeToEx",
    ConditionFunc: (w, playerIndex) => {
      return true;
    },
    StateId: STATE_IDS.UP_CHARGE_EX_S
  };
  var defaultDownChargeEx = {
    Name: "DefaultDownChargeEx",
    ConditionFunc: (w, playerIndex) => {
      return true;
    },
    StateId: STATE_IDS.DOWN_CHARGE_EX_S
  };
  function inputActionMacthesTargetNotRepeating(targetGeId, ia, prevIa) {
    if (ia.Action !== targetGeId) {
      return false;
    }
    if (prevIa === void 0) {
      return true;
    }
    if (ia.Action === prevIa.Action) {
      return false;
    }
    return true;
  }
  function isBufferedInput(inputStore, currentFrame, bufferFrames, targetGameEvent) {
    for (let i = 0; i < bufferFrames; i++) {
      const ia = inputStore.GetInputForFrame(currentFrame - i);
      if (!ia) continue;
      if (ia.Action === targetGameEvent) {
        const prevIa = inputStore.GetInputForFrame(currentFrame - i - 1);
        if (prevIa.Action !== targetGameEvent) {
          return true;
        }
      }
    }
    return false;
  }

  // game/engine/finite-state-machine/stateConfigurations/relationshipMappings.ts
  var StateRelation = class {
    constructor(stateId, actionStateTranslations) {
      this.stateId = stateId;
      this.mappings = actionStateTranslations;
    }
  };
  var ActionStateMappings = class {
    constructor() {
      this.mappings = /* @__PURE__ */ new Map();
    }
    GetMapping(geId) {
      return this.mappings.get(geId);
    }
    GetConditions() {
      return this.condtions;
    }
    GetDefaults() {
      return this.defaultConditions;
    }
    SetMappings(mappingsArray) {
      mappingsArray.forEach((actSt) => {
        this.mappings.set(actSt.geId, actSt.sId);
      });
    }
    SetConditions(conditions) {
      this.condtions = conditions;
    }
    SetDefaults(conditions) {
      this.defaultConditions = conditions;
    }
  };
  function InitIdleRelations() {
    const idleTranslations = new ActionStateMappings();
    idleTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.MOVE_GE, sId: STATE_IDS.WALK_S },
      { geId: GAME_EVENT_IDS.JUMP_GE, sId: STATE_IDS.JUMP_SQUAT_S },
      { geId: GAME_EVENT_IDS.FALL_GE, sId: STATE_IDS.N_FALL_S },
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.DOWN_GE, sId: STATE_IDS.CROUCH_S },
      { geId: GAME_EVENT_IDS.GUARD_GE, sId: STATE_IDS.SHIELD_RAISE_S },
      { geId: GAME_EVENT_IDS.GRAB_GE, sId: STATE_IDS.GRAB_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    const condtions = [
      IdleToDash,
      IdleToDashTurn,
      IdleToTurn,
      IdleToAttack,
      ToSideCharge,
      ToUpCharge,
      IdleToUpTilt,
      ToDownCharge,
      ToNSpecial,
      ToSideSpecial,
      ToDownSpecial,
      ToUpSpecial
    ];
    idleTranslations.SetConditions(condtions);
    const idle = new StateRelation(STATE_IDS.IDLE_S, idleTranslations);
    return idle;
  }
  function InitShieldRaiseRelations() {
    const shieldRaiseTranslations = new ActionStateMappings();
    shieldRaiseTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.FALL_GE, sId: STATE_IDS.N_FALL_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    shieldRaiseTranslations.SetConditions([ToSpotDodge, ToRollDodge]);
    shieldRaiseTranslations.SetDefaults([defaultShield]);
    return new StateRelation(STATE_IDS.SHIELD_RAISE_S, shieldRaiseTranslations);
  }
  function InitShieldRelations() {
    const translations = new ActionStateMappings();
    translations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.FALL_GE, sId: STATE_IDS.N_FALL_S },
      { geId: GAME_EVENT_IDS.GRAB_GE, sId: STATE_IDS.GRAB_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S },
      { geId: GAME_EVENT_IDS.SHIELD_BREAK_GE, sId: STATE_IDS.SHIELD_BREAK_S }
    ]);
    translations.SetConditions([shieldToShieldDrop, ToSpotDodge, ToRollDodge]);
    return new StateRelation(STATE_IDS.SHIELD_S, translations);
  }
  function InitShieldDropRelations() {
    const translations = new ActionStateMappings();
    translations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.FALL_GE, sId: STATE_IDS.N_FALL_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    translations.SetDefaults([defaultIdle]);
    return new StateRelation(STATE_IDS.SHIELD_DROP_S, translations);
  }
  function InitShieldBreakRelations() {
    const translation = new ActionStateMappings();
    translation.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    translation.SetDefaults([shieldBreakDefaultShieldTumble]);
    return new StateRelation(STATE_IDS.SHIELD_BREAK_S, translation);
  }
  function initShieldTubmleRelations() {
    const translation = new ActionStateMappings();
    translation.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S },
      { geId: GAME_EVENT_IDS.LAND_GE, sId: STATE_IDS.SHIELD_BREAK_LAND_S },
      { geId: GAME_EVENT_IDS.SOFT_LAND_GE, sId: STATE_IDS.SHIELD_BREAK_LAND_S }
    ]);
    return new StateRelation(STATE_IDS.SHIELD_BREAK_TUMBLE_S, translation);
  }
  function InitShieldBreakLandRelations() {
    const translation = new ActionStateMappings();
    translation.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    translation.SetDefaults([shieldBreakLandDefaultToDizzy]);
    return new StateRelation(STATE_IDS.SHIELD_BREAK_LAND_S, translation);
  }
  function InitDizzyRelations() {
    const translation = new ActionStateMappings();
    translation.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    translation.SetDefaults([defaultIdle]);
    return new StateRelation(STATE_IDS.DIZZY_S, translation);
  }
  function InitSpotDodgeRelations() {
    const translations = new ActionStateMappings();
    translations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    translations.SetDefaults([defaultIdle]);
    return new StateRelation(STATE_IDS.SPOT_DODGE_S, translations);
  }
  function InitRollDodgeRelations() {
    const translations = new ActionStateMappings();
    translations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    translations.SetDefaults([defaultIdle]);
    return new StateRelation(STATE_IDS.ROLL_DODGE_S, translations);
  }
  function InitTurnRelations() {
    const turnTranslations = new ActionStateMappings();
    turnTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.JUMP_GE, sId: STATE_IDS.JUMP_SQUAT_S },
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    const defaultConditions = [
      TurnDefaultWalk,
      defaultIdle,
      ToSideSpecial
    ];
    turnTranslations.SetConditions([TurnToDash, ToSideSpecial, ToSideTilt]);
    turnTranslations.SetDefaults(defaultConditions);
    const turnWalk = new StateRelation(STATE_IDS.TURN_S, turnTranslations);
    return turnWalk;
  }
  function InitWalkRelations() {
    const walkTranslations = new ActionStateMappings();
    walkTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.IDLE_GE, sId: STATE_IDS.IDLE_S },
      { geId: GAME_EVENT_IDS.JUMP_GE, sId: STATE_IDS.JUMP_SQUAT_S },
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.DOWN_GE, sId: STATE_IDS.CROUCH_S },
      { geId: GAME_EVENT_IDS.GUARD_GE, sId: STATE_IDS.SHIELD_RAISE_S },
      { geId: GAME_EVENT_IDS.GRAB_GE, sId: STATE_IDS.GRAB_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    const conditions = [
      WalkToTurn,
      WalkToDash,
      ToSideSpecial,
      ToSideCharge,
      ToDownCharge,
      ToUpCharge,
      ToSideTilt
    ];
    walkTranslations.SetConditions(conditions);
    const walkRelations = new StateRelation(STATE_IDS.WALK_S, walkTranslations);
    return walkRelations;
  }
  function InitDashRelations() {
    const dashTranslations = new ActionStateMappings();
    dashTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.JUMP_GE, sId: STATE_IDS.JUMP_SQUAT_S },
      { geId: GAME_EVENT_IDS.FALL_GE, sId: STATE_IDS.N_FALL_S },
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    const conditions = [
      DashToTurn,
      ToSideSpecial,
      ToUpSpecial,
      RunToDashAttack
    ];
    dashTranslations.SetConditions(conditions);
    const defaultConditions = [DashDefaultRun, defaultIdle];
    dashTranslations.SetDefaults(defaultConditions);
    const dashRelations = new StateRelation(STATE_IDS.DASH_S, dashTranslations);
    return dashRelations;
  }
  function InitDashTurnRelations() {
    const dashTrunTranslations = new ActionStateMappings();
    dashTrunTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.JUMP_GE, sId: STATE_IDS.JUMP_SQUAT_S },
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    dashTrunTranslations.SetConditions([ToSideSpecial]);
    dashTrunTranslations.SetDefaults([defaultDash]);
    const dashTurnRelations = new StateRelation(
      STATE_IDS.DASH_TURN_S,
      dashTrunTranslations
    );
    return dashTurnRelations;
  }
  function InitRunRelations() {
    const runTranslations = new ActionStateMappings();
    runTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.JUMP_GE, sId: STATE_IDS.JUMP_SQUAT_S },
      { geId: GAME_EVENT_IDS.IDLE_GE, sId: STATE_IDS.STOP_RUN_S },
      { geId: GAME_EVENT_IDS.FALL_GE, sId: STATE_IDS.N_FALL_S },
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.DOWN_GE, sId: STATE_IDS.CROUCH_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    const conditions = [
      RunToTurn,
      ToSideSpecial,
      ToUpSpecial,
      RunToDashAttack,
      RunToRunStopByGuard
    ];
    runTranslations.SetConditions(conditions);
    const runRelations = new StateRelation(STATE_IDS.RUN_S, runTranslations);
    return runRelations;
  }
  function InitRunTurnRelations() {
    const runTurnMapping = new ActionStateMappings();
    runTurnMapping.SetMappings([
      { geId: GAME_EVENT_IDS.JUMP_GE, sId: STATE_IDS.JUMP_SQUAT_S },
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    runTurnMapping.SetConditions([ToSideSpecial, ToUpSpecial]);
    runTurnMapping.SetDefaults([defaultTrunRunToIdle, defaultRun]);
    const runTurnRelations = new StateRelation(
      STATE_IDS.RUN_TURN_S,
      runTurnMapping
    );
    return runTurnRelations;
  }
  function InitStopRunRelations() {
    const stopRunTranslations = new ActionStateMappings();
    stopRunTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.MOVE_FAST_GE, sId: STATE_IDS.DASH_S },
      { geId: GAME_EVENT_IDS.JUMP_GE, sId: STATE_IDS.JUMP_SQUAT_S },
      { geId: GAME_EVENT_IDS.FALL_GE, sId: STATE_IDS.N_FALL_S },
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.DOWN_GE, sId: STATE_IDS.CROUCH_S },
      { geId: GAME_EVENT_IDS.SIDE_SPCL_GE, sId: STATE_IDS.SIDE_SPCL_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    const conditions = [RunStopToTurn, ToUpSpecial];
    stopRunTranslations.SetConditions(conditions);
    stopRunTranslations.SetDefaults([defaultIdle]);
    const stopRunRelations = new StateRelation(
      STATE_IDS.STOP_RUN_S,
      stopRunTranslations
    );
    return stopRunRelations;
  }
  function InitJumpSquatRelations() {
    const jumpSquatTranslations = new ActionStateMappings();
    jumpSquatTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_GE, sId: STATE_IDS.GRAB_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    jumpSquatTranslations.SetDefaults([defaultJump]);
    const jumpSquatRelations = new StateRelation(
      STATE_IDS.JUMP_SQUAT_S,
      jumpSquatTranslations
    );
    return jumpSquatRelations;
  }
  function InitJumpRelations() {
    const jumpTranslations = new ActionStateMappings();
    jumpTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    jumpTranslations.SetConditions([ToJump, ToAirDodge]);
    jumpTranslations.SetDefaults([defaultNFall]);
    const jumpRelations = new StateRelation(STATE_IDS.JUMP_S, jumpTranslations);
    return jumpRelations;
  }
  function InitNeutralFallRelations() {
    const nFallTranslations = new ActionStateMappings();
    nFallTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.LAND_GE, sId: STATE_IDS.LAND_S },
      { geId: GAME_EVENT_IDS.SOFT_LAND_GE, sId: STATE_IDS.SOFT_LAND_S },
      { geId: GAME_EVENT_IDS.LEDGE_GRAB_GE, sId: STATE_IDS.LEDGE_GRAB_S },
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    nFallTranslations.SetConditions([
      ToJump,
      ToAirDodge,
      ToNair,
      ToUAir,
      ToDAir,
      ToFAir,
      ToBAir,
      ToSideSpecialAir,
      ToUpSpecial,
      ToDownSpecialAir
    ]);
    const nFallRelations = new StateRelation(
      STATE_IDS.N_FALL_S,
      nFallTranslations
    );
    return nFallRelations;
  }
  function InitLandRelations() {
    const landTranslations = new ActionStateMappings();
    landTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.FALL_GE, sId: STATE_IDS.N_FALL_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    landTranslations.SetDefaults([LandToIdle, LandToWalk, LandToTurn]);
    const landRelations = new StateRelation(STATE_IDS.LAND_S, landTranslations);
    return landRelations;
  }
  function InitSoftLandRelations() {
    const softLandTranslations = new ActionStateMappings();
    softLandTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.FALL_GE, sId: STATE_IDS.N_FALL_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    softLandTranslations.SetDefaults([LandToIdle, LandToWalk, LandToTurn]);
    const softLandRelations = new StateRelation(
      STATE_IDS.SOFT_LAND_S,
      softLandTranslations
    );
    return softLandRelations;
  }
  function InitLedgeGrabRelations() {
    const LedgeGrabTranslations = new ActionStateMappings();
    LedgeGrabTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.JUMP_GE, sId: STATE_IDS.JUMP_S }
    ]);
    const LedgeGrabRelations = new StateRelation(
      STATE_IDS.LEDGE_GRAB_S,
      LedgeGrabTranslations
    );
    return LedgeGrabRelations;
  }
  function InitAirDodgeRelations() {
    const airDodgeTranslations = new ActionStateMappings();
    airDodgeTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.LAND_GE, sId: STATE_IDS.LAND_S },
      { geId: GAME_EVENT_IDS.SOFT_LAND_GE, sId: STATE_IDS.LAND_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    airDodgeTranslations.SetDefaults([defaultHelpess]);
    const AirDodgeRelations = new StateRelation(
      STATE_IDS.AIR_DODGE_S,
      airDodgeTranslations
    );
    return AirDodgeRelations;
  }
  function InitHelpessRelations() {
    const helpessTranslations = new ActionStateMappings();
    helpessTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.LAND_GE, sId: STATE_IDS.LAND_S },
      { geId: GAME_EVENT_IDS.SOFT_LAND_GE, sId: STATE_IDS.SOFT_LAND_S },
      { geId: GAME_EVENT_IDS.LEDGE_GRAB_GE, sId: STATE_IDS.LEDGE_GRAB_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    const HelplessRelations = new StateRelation(
      STATE_IDS.HELPLESS_S,
      helpessTranslations
    );
    return HelplessRelations;
  }
  function InitAttackRelations() {
    const attackTranslations = new ActionStateMappings();
    attackTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    attackTranslations.SetDefaults([defaultIdle]);
    const attackRelations = new StateRelation(
      STATE_IDS.ATTACK_S,
      attackTranslations
    );
    return attackRelations;
  }
  function InitDashAttackRelations() {
    const dashAtkTranslations = new ActionStateMappings();
    dashAtkTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    dashAtkTranslations.SetDefaults([defaultIdle]);
    const dashAtkRelations = new StateRelation(
      STATE_IDS.DASH_ATTACK_S,
      dashAtkTranslations
    );
    return dashAtkRelations;
  }
  function InitSideChargeRelations() {
    const sideChargeTranslations = new ActionStateMappings();
    sideChargeTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    sideChargeTranslations.SetConditions([SideChargeToEx]);
    sideChargeTranslations.SetDefaults([defaultSideChargeEx]);
    const sideChargeRelations = new StateRelation(
      STATE_IDS.SIDE_CHARGE_S,
      sideChargeTranslations
    );
    return sideChargeRelations;
  }
  function InitSideChargeExRelations() {
    const sideChargeExTranslations = new ActionStateMappings();
    sideChargeExTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    sideChargeExTranslations.SetDefaults([defaultIdle]);
    const relation = new StateRelation(
      STATE_IDS.SIDE_CHARGE_EX_S,
      sideChargeExTranslations
    );
    return relation;
  }
  function InitUpChargeRelations() {
    const upChargeRelations = new ActionStateMappings();
    upChargeRelations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    upChargeRelations.SetConditions([UpChargeToEx]);
    upChargeRelations.SetDefaults([defaultUpChargeEx]);
    const relation = new StateRelation(STATE_IDS.UP_CHARGE_S, upChargeRelations);
    return relation;
  }
  function InitiUpChargeExRelations() {
    const translations = new ActionStateMappings();
    translations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    translations.SetDefaults([defaultIdle]);
    const relation = new StateRelation(STATE_IDS.UP_CHARGE_EX_S, translations);
    return relation;
  }
  function InitDownChargeRelations() {
    const downChargeRelations = new ActionStateMappings();
    downChargeRelations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    downChargeRelations.SetConditions([DownChargeToEx]);
    downChargeRelations.SetDefaults([defaultDownChargeEx]);
    const relation = new StateRelation(
      STATE_IDS.DOWN_CHARGE_S,
      downChargeRelations
    );
    return relation;
  }
  function InitDownChargeExRelations() {
    const translations = new ActionStateMappings();
    translations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    translations.SetDefaults([defaultIdle]);
    const relation = new StateRelation(STATE_IDS.DOWN_CHARGE_EX_S, translations);
    return relation;
  }
  function InitAirAttackRelations() {
    const airAttackTranslations = new ActionStateMappings();
    airAttackTranslations.SetDefaults([defaultNFall]);
    airAttackTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.LAND_GE, sId: STATE_IDS.LAND_S },
      { geId: GAME_EVENT_IDS.SOFT_LAND_GE, sId: STATE_IDS.SOFT_LAND_S },
      { geId: GAME_EVENT_IDS.LEDGE_GRAB_GE, sId: STATE_IDS.LEDGE_GRAB_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    const airAttackRelations = new StateRelation(
      STATE_IDS.N_AIR_S,
      airAttackTranslations
    );
    return airAttackRelations;
  }
  function InitFAirAttackRelations() {
    const fAirAttackTranslations = new ActionStateMappings();
    fAirAttackTranslations.SetDefaults([defaultNFall]);
    fAirAttackTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.SOFT_LAND_GE, sId: STATE_IDS.SOFT_LAND_S },
      { geId: GAME_EVENT_IDS.LAND_GE, sId: STATE_IDS.LAND_S },
      { geId: GAME_EVENT_IDS.LEDGE_GRAB_GE, sId: STATE_IDS.LEDGE_GRAB_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    const fAirTranslations = new StateRelation(
      STATE_IDS.F_AIR_S,
      fAirAttackTranslations
    );
    return fAirTranslations;
  }
  function InitUAirRelations() {
    const uAirTranslations = new ActionStateMappings();
    uAirTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.LAND_GE, sId: STATE_IDS.LAND_S },
      { geId: GAME_EVENT_IDS.SOFT_LAND_GE, sId: STATE_IDS.SOFT_LAND_S },
      { geId: GAME_EVENT_IDS.LEDGE_GRAB_GE, sId: STATE_IDS.LEDGE_GRAB_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    uAirTranslations.SetDefaults([defaultNFall]);
    const uAirRelations = new StateRelation(STATE_IDS.U_AIR_S, uAirTranslations);
    return uAirRelations;
  }
  function InitBAirRelations() {
    const bAirTranslations = new ActionStateMappings();
    bAirTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.LAND_GE, sId: STATE_IDS.LAND_S },
      { geId: GAME_EVENT_IDS.SOFT_LAND_GE, sId: STATE_IDS.SOFT_LAND_S },
      { geId: GAME_EVENT_IDS.LEDGE_GRAB_GE, sId: STATE_IDS.LEDGE_GRAB_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    bAirTranslations.SetDefaults([defaultNFall]);
    const bAirRelations = new StateRelation(STATE_IDS.B_AIR_S, bAirTranslations);
    return bAirRelations;
  }
  function InitDAirRelations() {
    const dAirTranslations = new ActionStateMappings();
    dAirTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.LAND_GE, sId: STATE_IDS.LAND_S },
      { geId: GAME_EVENT_IDS.SOFT_LAND_GE, sId: STATE_IDS.SOFT_LAND_S },
      { geId: GAME_EVENT_IDS.LEDGE_GRAB_GE, sId: STATE_IDS.LEDGE_GRAB_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    dAirTranslations.SetDefaults([defaultNFall]);
    const bAirRelations = new StateRelation(STATE_IDS.D_AIR_S, dAirTranslations);
    return bAirRelations;
  }
  function InitNSpecialRelations() {
    const nSpecialTranslations = new ActionStateMappings();
    nSpecialTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    nSpecialTranslations.SetDefaults([defaultIdle]);
    const nSpecialRelations = new StateRelation(
      STATE_IDS.SPCL_S,
      nSpecialTranslations
    );
    return nSpecialRelations;
  }
  function InitSideSpecialRelations() {
    const sideSpclTranslations = new ActionStateMappings();
    sideSpclTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.FALL_GE, sId: STATE_IDS.HELPLESS_S },
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      {
        geId: GAME_EVENT_IDS.SIDE_SPCL_EX_GE,
        sId: STATE_IDS.SIDE_SPCL_EX_S
      },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    sideSpclTranslations.SetDefaults([defaultIdle]);
    const sideSpecialRelations = new StateRelation(
      STATE_IDS.SIDE_SPCL_S,
      sideSpclTranslations
    );
    return sideSpecialRelations;
  }
  function InitSideSpecialExtensionRelations() {
    const sideSpclExTranslations = new ActionStateMappings();
    sideSpclExTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    sideSpclExTranslations.SetDefaults([defaultIdle]);
    const sideSpclExRelations = new StateRelation(
      STATE_IDS.SIDE_SPCL_EX_S,
      sideSpclExTranslations
    );
    return sideSpclExRelations;
  }
  function InitSideSpecialAirRelations() {
    const translation = new ActionStateMappings();
    translation.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      {
        geId: GAME_EVENT_IDS.S_SPCL_EX_AIR_GE,
        sId: STATE_IDS.SIDE_SPCL_EX_AIR_S
      },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    translation.SetDefaults([defaultHelpess]);
    const relation = new StateRelation(STATE_IDS.SIDE_SPCL_AIR_S, translation);
    return relation;
  }
  function InitSideSpecialExAirRelations() {
    const translations = new ActionStateMappings();
    translations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    translations.SetDefaults([defaultHelpess]);
    const relations = new StateRelation(
      STATE_IDS.SIDE_SPCL_EX_AIR_S,
      translations
    );
    return relations;
  }
  function InitUpSpecialRelations() {
    const translation = new ActionStateMappings();
    translation.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    translation.SetDefaults([defaultHelpess]);
    const relation = new StateRelation(STATE_IDS.UP_SPCL_S, translation);
    return relation;
  }
  function InitDownSpecialRelations() {
    const downSpecialTranslations = new ActionStateMappings();
    downSpecialTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    downSpecialTranslations.SetDefaults([defaultIdle]);
    const downSpecRelations = new StateRelation(
      STATE_IDS.DOWN_SPCL_S,
      downSpecialTranslations
    );
    return downSpecRelations;
  }
  function InitDownSpecialAirRelations() {
    const translation = new ActionStateMappings();
    translation.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.LAND_GE, sId: STATE_IDS.LAND_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    translation.SetDefaults([defaultNFall]);
    const relation = new StateRelation(STATE_IDS.DOWN_SPCL_AIR_S, translation);
    return relation;
  }
  function InitHitStopRelations() {
    const hitStopTranslations = new ActionStateMappings();
    const hitStopConditions = [HitStopToLaunch];
    hitStopTranslations.SetConditions(hitStopConditions);
    const hitStunRelations = new StateRelation(
      STATE_IDS.HIT_STOP_S,
      hitStopTranslations
    );
    return hitStunRelations;
  }
  function InitTumbleRelations() {
    const TumbleTranslations = new ActionStateMappings();
    TumbleTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.LAND_GE, sId: STATE_IDS.LAND_S },
      { geId: GAME_EVENT_IDS.SOFT_LAND_GE, sId: STATE_IDS.LAND_S },
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    TumbleTranslations.SetConditions([ToJump]);
    const TumbleRelations = new StateRelation(
      STATE_IDS.TUMBLE_S,
      TumbleTranslations
    );
    return TumbleRelations;
  }
  function InitLaunchRelations() {
    const launchTranslations = new ActionStateMappings();
    launchTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    launchTranslations.SetConditions([LaunchToTumble]);
    const launchRelations = new StateRelation(
      STATE_IDS.LAUNCH_S,
      launchTranslations
    );
    return launchRelations;
  }
  function InitCrouchRelations() {
    const crouchTranslations = new ActionStateMappings();
    crouchTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.IDLE_GE, sId: STATE_IDS.IDLE_S },
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.MOVE_GE, sId: STATE_IDS.WALK_S },
      { geId: GAME_EVENT_IDS.MOVE_FAST_GE, sId: STATE_IDS.DASH_S },
      { geId: GAME_EVENT_IDS.JUMP_GE, sId: STATE_IDS.JUMP_SQUAT_S },
      { geId: GAME_EVENT_IDS.FALL_GE, sId: STATE_IDS.N_FALL_S },
      { geId: GAME_EVENT_IDS.GRAB_HELD_GE, sId: STATE_IDS.GRAB_HELD_S }
    ]);
    crouchTranslations.SetConditions([ToDownSpecial, ToDownTilt]);
    const crouchRelations = new StateRelation(
      STATE_IDS.CROUCH_S,
      crouchTranslations
    );
    return crouchRelations;
  }
  function InitDownTiltRelations() {
    const dTiltTranslations = new ActionStateMappings();
    dTiltTranslations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S }
    ]);
    dTiltTranslations.SetDefaults([DefaultDownTiltToCrouch, defaultIdle]);
    const dTiltRelations = new StateRelation(
      STATE_IDS.DOWN_TILT_S,
      dTiltTranslations
    );
    return dTiltRelations;
  }
  function InitSideTiltRelations() {
    const sideTiltTrnalsations = new ActionStateMappings();
    sideTiltTrnalsations.SetConditions([SideTiltToWalk]);
    sideTiltTrnalsations.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S }
    ]);
    sideTiltTrnalsations.SetDefaults([defaultIdle]);
    const sideTiltRelations = new StateRelation(
      STATE_IDS.SIDE_TILT_S,
      sideTiltTrnalsations
    );
    return sideTiltRelations;
  }
  function InitUpTiltRelations() {
    const upTiltTranslations = new ActionStateMappings();
    upTiltTranslations.SetMappings([
      {
        geId: GAME_EVENT_IDS.HIT_STOP_GE,
        sId: STATE_IDS.HIT_STOP_S
      }
    ]);
    upTiltTranslations.SetDefaults([defaultIdle]);
    const upTiltRelations = new StateRelation(
      STATE_IDS.UP_TILT_S,
      upTiltTranslations
    );
    return upTiltRelations;
  }
  function InitGrabRelations() {
    const grabmaps = new ActionStateMappings();
    grabmaps.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_HOLD_GE, sId: STATE_IDS.GRAB_HOLD_S }
    ]);
    grabmaps.SetDefaults([defaultIdle]);
    const grabRelations = new StateRelation(STATE_IDS.GRAB_S, grabmaps);
    return grabRelations;
  }
  function InitHoldRelations() {
    const holdMaps = new ActionStateMappings();
    holdMaps.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S },
      { geId: GAME_EVENT_IDS.GRAB_RELEASE_GE, sId: STATE_IDS.GRAB_RELEASE_S }
    ]);
    const holdRelations = new StateRelation(STATE_IDS.GRAB_HOLD_S, holdMaps);
    return holdRelations;
  }
  function InitHeldRelations() {
    const heldMaps = new ActionStateMappings();
    heldMaps.SetMappings([
      { geId: GAME_EVENT_IDS.GRAB_ESCAPE_GE, sId: STATE_IDS.GRAB_ESCAPE_S }
    ]);
    const heldRelations = new StateRelation(STATE_IDS.GRAB_HELD_S, heldMaps);
    return heldRelations;
  }
  function InitGrabReleaseRelations() {
    const grabReleaseMaps = new ActionStateMappings();
    grabReleaseMaps.SetMappings([
      { geId: GAME_EVENT_IDS.HIT_STOP_GE, sId: STATE_IDS.HIT_STOP_S }
    ]);
    grabReleaseMaps.SetDefaults([defaultIdle]);
    const grabReleaseRelations = new StateRelation(
      STATE_IDS.GRAB_RELEASE_S,
      grabReleaseMaps
    );
    return grabReleaseRelations;
  }
  function InitGrabEscapeRelations() {
    const grabEscapeMaps = new ActionStateMappings();
    grabEscapeMaps.SetDefaults([defaultIdle]);
    const grabEscapeRelations = new StateRelation(
      STATE_IDS.GRAB_ESCAPE_S,
      grabEscapeMaps
    );
    return grabEscapeRelations;
  }

  // game/engine/finite-state-machine/stateConfigurations/states.ts
  var POINT_THREE_THREE = NumberToRaw(0.33);
  var POINT_ONE_FIVE = NumberToRaw(0.15);
  var POINT_SIX = NumberToRaw(0.6);
  var POINT_EIGHT = NumberToRaw(0.8);
  var ONE4 = NumberToRaw(1);
  var TWO3 = NumberToRaw(2);
  var Idle = {
    StateName: "IDLE",
    StateId: STATE_IDS.IDLE_S,
    OnEnter: (p, w) => {
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
    }
  };
  var Walk = {
    StateName: "WALK",
    StateId: STATE_IDS.WALK_S,
    OnEnter: (p, w) => {
    },
    OnUpdate: (p, w) => {
      const speeds = p.Speeds;
      const vel = p.Velocity;
      const absWalkMaxSpeed = Math.abs(speeds.MaxWalkSpeedRaw);
      const absXVel = Math.abs(vel.X.Raw);
      if (absXVel >= absWalkMaxSpeed) {
        return;
      }
      const isFacingRight = p.Flags.IsFacingRight;
      const inputStore = w.PlayerData.InputStore(p.ID);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const impulse = MultiplyRaw(ia.LXAxisRaw, speeds.WalkSpeedMulitplierRaw);
      if (isFacingRight) {
        const diff = absWalkMaxSpeed - vel.X.Raw;
        if (diff >= impulse) {
          vel.X.SetFromRaw(vel.X.Raw + impulse);
        } else if (diff > 0) {
          vel.X.SetFromRaw(vel.X.Raw + diff);
        }
      } else {
        const diff = absWalkMaxSpeed + vel.X.Raw;
        if (diff >= -impulse) {
          vel.X.SetFromRaw(vel.X.Raw + impulse);
        } else if (diff > 0) {
          vel.X.SetFromRaw(vel.X.Raw - diff);
        }
      }
    },
    OnExit: (p, w) => {
    }
  };
  var Turn = {
    StateName: "TURN",
    StateId: STATE_IDS.TURN_S,
    OnEnter: (p, W) => {
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
      p.Flags.ChangeDirections();
    }
  };
  var Dash = {
    StateName: "DASH",
    StateId: STATE_IDS.DASH_S,
    OnEnter: (p, w) => {
      const flags = p.Flags;
      const MaxDashSpeedRaw = p.Speeds.MaxDashSpeedRaw;
      const absMaxDashRaw = Math.abs(MaxDashSpeedRaw);
      const impulse = flags.IsFacingRight ? absMaxDashRaw : -absMaxDashRaw;
      p.Velocity.AddClampedXImpulseRaw(MaxDashSpeedRaw, impulse);
    },
    OnUpdate: (p, w) => {
      const inputStore = w.PlayerData.InputStore(p.ID);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const speedsComp = p.Speeds;
      const dashSpeedMultiplierRaw = speedsComp.DashMultiplierRaw;
      const impulse = MultiplyRaw(ia?.LXAxis.Raw ?? 0, dashSpeedMultiplierRaw);
      p.Velocity.AddClampedXImpulseRaw(speedsComp.MaxDashSpeedRaw, impulse);
    },
    OnExit: (p, w) => {
    }
  };
  var DashTurn = {
    StateName: "DASH_TURN",
    StateId: STATE_IDS.DASH_TURN_S,
    OnEnter: (p, w) => {
      p.Velocity.X.Zero();
      p.Flags.ChangeDirections();
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
    }
  };
  var Run = {
    StateName: "RUN",
    StateId: STATE_IDS.RUN_S,
    OnEnter: (p, w) => {
    },
    OnUpdate: (p, w) => {
      const speeds = p.Speeds;
      const vel = p.Velocity;
      const absRunMaxSpeed = Math.abs(speeds.MaxRunSpeedRaw);
      const absXVel = Math.abs(vel.X.Raw);
      if (absXVel >= absRunMaxSpeed) {
        return;
      }
      const isFacingRight = p.Flags.IsFacingRight;
      const inputStore = w.PlayerData.InputStore(p.ID);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const impulse = MultiplyRaw(ia.LXAxis.Raw, speeds.RunSpeedMultiplierRaw);
      if (isFacingRight) {
        const diff = absRunMaxSpeed - vel.X.Raw;
        if (diff >= impulse) {
          vel.X.SetFromRaw(vel.X.Raw + impulse);
        } else if (diff > 0) {
          vel.X.SetFromRaw(vel.X.Raw + diff);
        }
      } else {
        const diff = absRunMaxSpeed + vel.X.Raw;
        if (diff >= -impulse) {
          vel.X.SetFromRaw(vel.X.Raw + impulse);
        } else if (diff > 0) {
          vel.X.SetFromRaw(vel.X.Raw - diff);
        }
      }
    },
    OnExit: (p, w) => {
    }
  };
  var RunTurn = {
    StateName: "RUN_TURN",
    StateId: STATE_IDS.RUN_TURN_S,
    OnEnter: (p, w) => {
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
      p.Flags.ChangeDirections();
    }
  };
  var RunStop = {
    StateName: "RUN_STOP",
    StateId: STATE_IDS.STOP_RUN_S,
    OnEnter: (p, w) => {
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
    }
  };
  var JumpSquat = {
    StateName: "JUMPSQUAT",
    StateId: STATE_IDS.JUMP_SQUAT_S,
    OnEnter: (p, w) => {
      p.ECB.SetECBShape(STATE_IDS.JUMP_SQUAT_S);
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
      p.ECB.ResetECBShape();
    }
  };
  var Jump2 = {
    StateName: "JUMP",
    StateId: STATE_IDS.JUMP_S,
    OnEnter: (p, w) => {
      const jumpComp = p.Jump;
      p.Flags.FastFallOff();
      jumpComp.IncrementJumps();
      p.ECB.SetECBShape(STATE_IDS.JUMP_S);
      AddToPlayerYPositionRaw(p, -p.ECB.YOffset.Raw);
      p.Velocity.Y.SetFromRaw(-p.Jump.JumpVelocity.Raw);
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
      p.ECB.ResetECBShape();
    }
  };
  var NeutralFall = {
    StateName: "NFALL",
    StateId: STATE_IDS.N_FALL_S,
    OnEnter: (p, w) => {
      if (p.Jump.JumpCountIsZero()) {
        p.Jump.IncrementJumps();
      }
      p.ECB.SetECBShape(STATE_IDS.N_FALL_S);
    },
    OnUpdate: (p, w) => {
      aerialInputOnUpdate(p, w);
    },
    OnExit: (p, w) => {
      p.ECB.ResetECBShape();
    }
  };
  var Land = {
    StateName: "Land",
    StateId: STATE_IDS.LAND_S,
    OnEnter: (p, w) => {
      p.Flags.FastFallOff();
      p.Jump.ResetJumps();
      p.Velocity.Y.Zero();
      p.LedgeDetector.ZeroLedgeGrabCount();
      p.ECB.SetECBShape(STATE_IDS.LAND_S);
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
      p.ECB.ResetECBShape();
    }
  };
  var SoftLand = {
    StateName: "SoftLand",
    StateId: STATE_IDS.SOFT_LAND_S,
    OnEnter: (p, w) => {
      p.Flags.FastFallOff();
      p.Jump.ResetJumps();
      p.Velocity.Y.Zero();
      p.LedgeDetector.ZeroLedgeGrabCount();
      p.ECB.SetECBShape(STATE_IDS.SOFT_LAND_S);
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
      p.ECB.ResetECBShape();
    }
  };
  var LedgeGrab = {
    StateName: "LedgeGrab",
    StateId: STATE_IDS.LEDGE_GRAB_S,
    OnEnter: (p, w) => {
      p.Flags.FastFallOff();
      p.Velocity.X.Zero();
      p.Velocity.Y.Zero();
      const ledgeDetectorComp = p.LedgeDetector;
      const jumpComp = p.Jump;
      jumpComp.ResetJumps();
      jumpComp.IncrementJumps();
      ledgeDetectorComp.IncrementLedgeGrabs();
      p.ECB.SetECBShape(STATE_IDS.LEDGE_GRAB_S);
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
      p.ECB.ResetECBShape();
    }
  };
  var AirDodge = {
    StateName: "AirDodge",
    StateId: STATE_IDS.AIR_DODGE_S,
    OnEnter: (p, w) => {
      p.Flags.FastFallOff();
      p.Flags.ZeroDisablePlatDetection();
      const pVel = p.Velocity;
      const ecb = p.ECB;
      const inputStore = w.PlayerData.InputStore(p.ID);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const angleIndexRaw = GetAtan2IndexRaw(ia.LYAxis.Raw, ia.LXAxis.Raw);
      let speed = p.Speeds.AirDogeSpeedRaw;
      if (ia.LXAxis.Raw === 0 && ia.LYAxis.Raw === 0) {
        speed = 0;
      }
      pVel.X.SetFromRaw(MultiplyRaw(COS_LUT[angleIndexRaw], speed));
      pVel.Y.SetFromRaw(MultiplyRaw(-SIN_LUT[angleIndexRaw], speed));
      ecb.SetECBShape(STATE_IDS.AIR_DODGE_S);
      p.Flags.VelocityDecayOff();
    },
    OnUpdate: (p, w) => {
      const frameLength = p.FSMInfo.GetFrameLengthForState(
        STATE_IDS.AIR_DODGE_S
      );
      const currentFrameForState = p.FSMInfo.CurrentStateFrame;
      const currentFrameFpRaw = NumberToRaw(currentFrameForState);
      const frameLengthFpRaw = NumberToRaw(frameLength);
      const normalizedTimeRaw = DivideRaw(currentFrameFpRaw, frameLengthFpRaw);
      const clampedNormalizedTimeRaw = Math.min(normalizedTimeRaw, ONE4);
      const easeRaw = EaseInRaw(clampedNormalizedTimeRaw);
      const pVel = p.Velocity;
      const oneMinusEaseRaw = ONE4 - easeRaw;
      pVel.X.SetFromRaw(MultiplyRaw(pVel.X.Raw, oneMinusEaseRaw));
      pVel.Y.SetFromRaw(MultiplyRaw(pVel.Y.Raw, oneMinusEaseRaw));
      if (currentFrameForState === 2) {
        p.Flags.SetIntangabilityFrames(15);
      }
    },
    OnExit: (p, w) => {
      p.ECB.ResetECBShape();
      p.Flags.VelocityDecayOn();
      p.Flags.ZeroIntangabilityFrames();
    }
  };
  var Helpless = {
    StateName: "Helpless",
    StateId: STATE_IDS.HELPLESS_S,
    OnEnter: (p, w) => {
    },
    OnUpdate: (p, w) => {
      const inputStore = w.PlayerData.InputStore(p.ID);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const speeds = p.Speeds;
      const airSpeedRaw = MultiplyRaw(
        speeds.AerialSpeedInpulseLimitRaw,
        POINT_SIX
      );
      const airMultRaw = MultiplyRaw(
        speeds.ArielVelocityMultiplierRaw,
        POINT_SIX
      );
      p.Velocity.AddClampedXImpulseRaw(
        airSpeedRaw,
        MultiplyRaw(ia.LXAxis.Raw, airMultRaw)
      );
    },
    OnExit: (p, w) => {
    }
  };
  var HitStop = {
    StateName: "HitStop",
    StateId: STATE_IDS.HIT_STOP_S,
    OnEnter: (p, world) => {
      p.Flags.FastFallOff();
      p.Velocity.X.Zero();
      p.Velocity.Y.Zero();
    },
    OnUpdate: (p, world) => {
      p.HitStop.Decrement();
    },
    OnExit: (p, world) => {
      p.HitStop.SetZero();
    }
  };
  var Launch = {
    StateName: "Launch",
    StateId: STATE_IDS.LAUNCH_S,
    OnEnter: (p, w) => {
      const pVel = p.Velocity;
      const hitStun = p.HitStun;
      pVel.X = hitStun.VX;
      pVel.Y = hitStun.VY;
      if (p.Jump.OnFirstJump()) {
        p.Jump.IncrementJumps();
      }
    },
    OnUpdate: (p, w) => {
      if (p) p.HitStun.DecrementHitStun();
    },
    OnExit: (p, w) => {
      p.HitStun.Zero();
    }
  };
  var Tumble = {
    StateName: "Tumble",
    StateId: STATE_IDS.TUMBLE_S,
    OnEnter: (p, w) => {
      p.Jump.ResetJumps();
      p.Jump.IncrementJumps();
    },
    OnUpdate: (p, w) => {
      const curFrame = w.LocalFrame;
      const ia = w.PlayerData.InputStore(p.ID).GetInputForFrame(curFrame);
      const speeds = p.Speeds;
      const airSpeedRaw = speeds.AerialSpeedInpulseLimitRaw;
      const airMultRaw = speeds.ArielVelocityMultiplierRaw;
      const inputXMult = MultiplyRaw(ia.LXAxis.Raw, airMultRaw);
      const inputHalf = DivideRaw(inputXMult, TWO3);
      p.Velocity.AddClampedXImpulseRaw(airSpeedRaw, inputHalf);
    },
    OnExit: (p, w) => {
    }
  };
  var Crouch = {
    StateName: "Crouch",
    StateId: STATE_IDS.CROUCH_S,
    OnEnter: (p, w) => {
      p.ECB.SetECBShape(STATE_IDS.CROUCH_S);
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
      p.ECB.ResetECBShape();
    }
  };
  var ShieldRaise = {
    StateName: "ShieldRaise",
    StateId: STATE_IDS.SHIELD_RAISE_S,
    OnEnter: (p, w) => {
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
    }
  };
  var Shield2 = {
    StateName: "Shield",
    StateId: STATE_IDS.SHIELD_S,
    OnEnter: (p, w) => {
      p.Shield.Active = true;
    },
    OnUpdate: (p, w) => {
      const inputStore = w.PlayerData.InputStore(p.ID);
      const input = inputStore.GetInputForFrame(w.LocalFrame);
      const s = p.Shield;
      const triggerValue = input.LTValRaw >= input.RTValRaw ? input.LTValRaw : input.RTValRaw;
      s.ShrinkRaw(triggerValue);
      const lxAxis = input.LXAxis;
      const lyAxis = input.LYAxis;
      if (lxAxis.Raw === 0 && lyAxis.Raw === 0) {
        s.ShieldTiltX.Zero();
        s.ShieldTiltY.Zero();
        return;
      }
      const magSqr = MultiplyRaw(lxAxis.Raw, lxAxis.Raw) + MultiplyRaw(lyAxis.Raw, lyAxis.Raw);
      if (magSqr > ONE4) {
        const mag = SqrtRaw(magSqr);
        const clampedXRaw = DivideRaw(lxAxis.Raw, mag);
        const clampedYRaw = -DivideRaw(lyAxis.Raw, mag);
        const newoffsetXRaw2 = MultiplyRaw(
          clampedXRaw,
          s.maxShieldOffSetRadius.Raw
        );
        const newoffsetYRaw2 = MultiplyRaw(
          clampedYRaw,
          s.maxShieldOffSetRadius.Raw
        );
        s.ShieldTiltX.SetFromRaw(newoffsetXRaw2);
        s.ShieldTiltY.SetFromRaw(newoffsetYRaw2);
        return;
      }
      const newoffsetXRaw = MultiplyRaw(lxAxis.Raw, s.maxShieldOffSetRadius.Raw);
      const newoffsetYRaw = -MultiplyRaw(lyAxis.Raw, s.maxShieldOffSetRadius.Raw);
      s.ShieldTiltX.SetFromRaw(newoffsetXRaw);
      s.ShieldTiltY.SetFromRaw(newoffsetYRaw);
    },
    OnExit: (p, w) => {
      p.Shield.Active = false;
      p.Shield.ShieldTiltX.Zero();
      p.Shield.ShieldTiltY.Zero();
    }
  };
  var SpotDodge = {
    StateName: "SpotDodge",
    StateId: STATE_IDS.SPOT_DODGE_S,
    OnEnter: (p, w) => {
      p.Flags.SetIntangabilityFrames(20);
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
    }
  };
  var RollDodge = {
    StateName: "RollDodge",
    StateId: STATE_IDS.ROLL_DODGE_S,
    OnEnter: (p, w) => {
      const pd = w.PlayerData;
      const inputStore = pd.InputStore(p.ID);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      if (ia.LXAxis.Raw > 0) {
        p.Flags.FaceLeft();
      } else if (ia.LXAxis.Raw < 0) {
        p.Flags.FaceRight();
      }
      p.Flags.SetIntangabilityFrames(20);
      p.Flags.VelocityDecayOff();
      p.ECB.SetECBShape(STATE_IDS.ROLL_DODGE_S);
    },
    OnUpdate: (p, w) => {
      const fsmInfo = p.FSMInfo;
      const totalFrames = fsmInfo.GetFrameLengthForState(STATE_IDS.ROLL_DODGE_S);
      const currentFrameRaw = NumberToRaw(fsmInfo.CurrentStateFrame);
      const normalizedTimeRaw = DivideRaw(
        currentFrameRaw,
        NumberToRaw(totalFrames)
      );
      const clampedNormalizedTimeRaw = Math.min(normalizedTimeRaw, ONE4);
      const easeRaw = EaseInRaw(clampedNormalizedTimeRaw);
      const maxSpeedRaw = p.Speeds.DodeRollSpeedRaw;
      const oneMinusEaseRaw = ONE4 - easeRaw;
      const direction = p.Flags.IsFacingRight ? NumberToRaw(-1) : NumberToRaw(1);
      p.Velocity.X.SetFromRaw(
        MultiplyRaw(direction, MultiplyRaw(maxSpeedRaw, oneMinusEaseRaw))
      );
    },
    OnExit: (p, w) => {
      p.ECB.ResetECBShape();
      p.Flags.VelocityDecayOn();
      p.Flags.ZeroIntangabilityFrames();
      p.Velocity.X.Zero();
    }
  };
  var ShieldDrop = {
    StateName: "ShieldDrop",
    StateId: STATE_IDS.SHIELD_DROP_S,
    OnEnter: (p, w) => {
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
    }
  };
  var NAttack = {
    StateName: "Attack",
    StateId: STATE_IDS.ATTACK_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.ATTACK_GE;
      const stateId = STATE_IDS.ATTACK_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var DashAttack = {
    StateName: "DashAttack",
    StateId: STATE_IDS.DASH_ATTACK_S,
    OnEnter: (p, w) => {
      p.Attacks.SetCurrentAttack(GAME_EVENT_IDS.DASH_ATTACK_GE);
      const geId = GAME_EVENT_IDS.DASH_ATTACK_GE;
      const stateId = STATE_IDS.DASH_ATTACK_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var DownTilt = {
    StateName: "DownTilt",
    StateId: STATE_IDS.DOWN_TILT_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.D_TILT_GE;
      const stateId = STATE_IDS.DOWN_TILT_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var SideTilt = {
    StateName: "SideTilt",
    StateId: STATE_IDS.SIDE_TILT_S,
    OnEnter: (p, w) => {
      const inputStore = w.PlayerData.InputStore(p.ID);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const stateId = STATE_IDS.SIDE_TILT_S;
      if (ia.LYAxis.Raw > POINT_ONE_FIVE) {
        attackOnEnter(p, w, GAME_EVENT_IDS.S_TILT_U_GE, stateId);
        return;
      }
      if (ia.LYAxis.Raw < -POINT_ONE_FIVE) {
        attackOnEnter(p, w, GAME_EVENT_IDS.S_TILT_D_GE, stateId);
        return;
      }
      attackOnEnter(p, w, GAME_EVENT_IDS.S_TILT_GE, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var UpTilt = {
    StateName: "UpTilt",
    StateId: STATE_IDS.UP_TILT_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.U_TILT_GE;
      const stateId = STATE_IDS.UP_TILT_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var SideCharge = {
    StateName: "SideChagrge",
    StateId: STATE_IDS.SIDE_CHARGE_S,
    OnEnter: (p, w) => {
      const inputStore = w.PlayerData.InputStore(p.ID);
      const curFrame = w.LocalFrame;
      const ia = inputStore.GetInputForFrame(curFrame);
      const rXAxis = ia.RXAxis;
      if (rXAxis.Raw > 0) {
        p.Flags.FaceRight();
      }
      if (rXAxis.Raw < 0) {
        p.Flags.FaceLeft();
      }
      const geId = GAME_EVENT_IDS.SIDE_CHARGE_GE;
      const stateId = STATE_IDS.SIDE_CHARGE_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var SideChargeEx = {
    StateName: "SideChagrgeEx",
    StateId: STATE_IDS.SIDE_CHARGE_EX_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.SIDE_CHARGE_EX_GE;
      const stateId = STATE_IDS.SIDE_CHARGE_EX_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var UpCharge = {
    StateName: "UpCharge",
    StateId: STATE_IDS.UP_CHARGE_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.UP_CHARGE_GE;
      const stateId = STATE_IDS.UP_CHARGE_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var UpChargeEx = {
    StateName: "UpChargeExt",
    StateId: STATE_IDS.UP_CHARGE_EX_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.UP_CHARGE_EX_GE;
      const stateId = STATE_IDS.UP_CHARGE_EX_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var DownCharge = {
    StateName: "DownCharge",
    StateId: STATE_IDS.DOWN_CHARGE_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.DOWN_CHARGE_GE;
      const stateId = STATE_IDS.DOWN_CHARGE_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var DownChargeEx = {
    StateName: "DownChargeExt",
    StateId: STATE_IDS.DOWN_CHARGE_EX_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.DOWN_CHARGE_EX_GE;
      const stateId = STATE_IDS.DOWN_CHARGE_EX_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var NAerialAttack = {
    StateName: "AerialAttack",
    StateId: STATE_IDS.N_AIR_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.N_AIR_GE;
      const stateId = STATE_IDS.N_AIR_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: (p, w) => {
      aerialInputOnUpdate(p, w);
      attackOnUpdate(p, w);
    },
    OnExit: attackOnExit
  };
  var FAerialAttack = {
    StateName: "FAir",
    StateId: STATE_IDS.F_AIR_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.F_AIR_GE;
      const stateId = STATE_IDS.F_AIR_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: (p, w) => {
      aerialInputOnUpdate(p, w);
      attackOnUpdate(p, w);
    },
    OnExit: attackOnExit
  };
  var UAirAttack = {
    StateName: "UAir",
    StateId: STATE_IDS.U_AIR_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.U_AIR_GE;
      const stateId = STATE_IDS.U_AIR_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: (p, w) => {
      aerialInputOnUpdate(p, w);
      attackOnUpdate(p, w);
    },
    OnExit: attackOnExit
  };
  var BAirAttack = {
    StateName: "BAir",
    StateId: STATE_IDS.B_AIR_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.B_AIR_GE;
      const stateId = STATE_IDS.B_AIR_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: (p, w) => {
      aerialInputOnUpdate(p, w);
      attackOnUpdate(p, w);
    },
    OnExit: attackOnExit
  };
  var DAirAttack = {
    StateName: "DAir",
    StateId: STATE_IDS.D_AIR_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.D_AIR_GE;
      const stateId = STATE_IDS.D_AIR_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: (p, w) => {
      aerialInputOnUpdate(p, w);
      attackOnUpdate(p, w);
    },
    OnExit: attackOnExit
  };
  var NeutralSpecial = {
    StateName: "NSpecial",
    StateId: STATE_IDS.SPCL_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.SPCL_GE;
      const stateId = STATE_IDS.SPCL_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var SideSpecial = {
    StateName: "SideSpecial",
    StateId: STATE_IDS.SIDE_SPCL_S,
    OnEnter: (p, w) => {
      const curFrame = w.LocalFrame;
      const ia = w.PlayerData.InputStore(p.ID).GetInputForFrame(curFrame);
      const lxAxis = ia.LXAxis;
      if (lxAxis.Raw < 0) {
        p.Flags.FaceLeft();
      }
      if (lxAxis.Raw >= 0) {
        p.Flags.FaceRight();
      }
      const geId = GAME_EVENT_IDS.SIDE_SPCL_GE;
      const stateId = STATE_IDS.SIDE_SPCL_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var SideSpecialExtension = {
    StateName: "SideSpecialExtension",
    StateId: STATE_IDS.SIDE_SPCL_EX_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.SIDE_SPCL_EX_GE;
      const stateId = STATE_IDS.SIDE_SPCL_EX_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var SideSpecialAir = {
    StateName: "SideSpecialAir",
    StateId: STATE_IDS.SIDE_SPCL_AIR_S,
    OnEnter: (p, w) => {
      const curFrame = w.LocalFrame;
      const ia = w.PlayerData.InputStore(p.ID).GetInputForFrame(curFrame);
      const lxAxis = ia.LXAxis;
      if (lxAxis.Raw < 0) {
        p.Flags.FaceLeft();
      }
      if (lxAxis.Raw >= 0) {
        p.Flags.FaceRight();
      }
      const geId = GAME_EVENT_IDS.S_SPCL_AIR_GE;
      const stateId = STATE_IDS.SIDE_SPCL_AIR_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var SideSpecialExtensionAir = {
    StateName: "SideSpecialExtensionAir",
    StateId: STATE_IDS.SIDE_SPCL_EX_AIR_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.S_SPCL_EX_AIR_GE;
      const stateId = STATE_IDS.SIDE_SPCL_EX_AIR_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var DownSpecial = {
    StateName: "DownSpecial",
    StateId: STATE_IDS.DOWN_SPCL_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.DOWN_SPCL_GE;
      const stateId = STATE_IDS.DOWN_SPCL_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var DownSpecialAerial = {
    StateName: "DownSpecialAerial",
    StateId: STATE_IDS.DOWN_SPCL_AIR_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.D_SPCL_AIR_GE;
      const stateId = STATE_IDS.DOWN_SPCL_AIR_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var UpSpecial = {
    StateName: "UpSpecial",
    StateId: STATE_IDS.UP_SPCL_S,
    OnEnter: (p, w) => {
      const ia = w.PlayerData.InputStore(p.ID).GetInputForFrame(w.LocalFrame);
      if (ia.LXAxis.Raw > 0) {
        p.Flags.FaceRight();
      }
      if (ia.LXAxis.Raw < 0) {
        p.Flags.FaceLeft();
      }
      const geId = GAME_EVENT_IDS.UP_SPCL_GE;
      const stateId = STATE_IDS.UP_SPCL_S;
      attackOnEnter(p, w, geId, stateId);
    },
    OnUpdate: attackOnUpdate,
    OnExit: attackOnExit
  };
  var NuetralGrab = {
    StateName: "Grab",
    StateId: STATE_IDS.GRAB_S,
    OnEnter: (p, w) => {
      const geId = GAME_EVENT_IDS.GRAB_GE;
      const stateId = STATE_IDS.GRAB_S;
      grabOnEnter(p, geId, stateId);
    },
    OnUpdate: grabOnUpdate,
    OnExit: grabOnExit
  };
  var Hold = {
    StateName: "hold",
    StateId: STATE_IDS.GRAB_HOLD_S,
    OnEnter: (p, w) => {
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
    }
  };
  var Held = {
    StateName: "Held",
    StateId: STATE_IDS.GRAB_HELD_S,
    OnEnter: (p, w) => {
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
      const grabMeter = p.GrabMeter;
      grabMeter.Meter.Zero();
      grabMeter.ZeroHoldingPlayerId();
    }
  };
  var GrabRelease = {
    StateName: "GrabRelease",
    StateId: STATE_IDS.GRAB_RELEASE_S,
    OnEnter: (p, w) => {
      const velocity = p.Velocity;
      const flags = p.Flags;
      const releaseVelocity = flags.IsFacingRight ? -6 : 6;
      velocity.X.SetFromNumber(releaseVelocity);
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
    }
  };
  var GrabEscape = {
    StateName: "GrabEscape",
    StateId: STATE_IDS.GRAB_ESCAPE_S,
    OnEnter: (p, w) => {
      const velocity = p.Velocity;
      const flags = p.Flags;
      const releaseVelocity = flags.IsFacingRight ? -10 : 10;
      velocity.X.SetFromNumber(releaseVelocity);
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
    }
  };
  var ShieldBreak = {
    StateName: "ShieldBreak",
    StateId: STATE_IDS.SHIELD_BREAK_S,
    OnEnter: (p, w) => {
      p.Velocity.X.Zero();
      p.Velocity.Y.SetFromNumber(-30);
      p.ECB.SetECBShape(STATE_IDS.SHIELD_BREAK_S);
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
      p.ECB.ResetECBShape();
    }
  };
  var ShieldBreakTumble = {
    StateName: "ShieldBreakTumble",
    StateId: STATE_IDS.SHIELD_BREAK_TUMBLE_S,
    OnEnter: (p, w) => {
      p.ECB.SetECBShape(STATE_IDS.SHIELD_BREAK_TUMBLE_S);
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
      p.ECB.ResetECBShape();
    }
  };
  var ShieldBreakLand = {
    StateName: "ShieldBreakLand",
    StateId: STATE_IDS.SHIELD_BREAK_LAND_S,
    OnEnter: (p, w) => {
      p.ECB.SetECBShape(STATE_IDS.SHIELD_BREAK_LAND_S);
      p.Velocity.Y.Zero();
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
      p.ECB.ResetECBShape();
    }
  };
  var dizzy = {
    StateName: "Dizzy",
    StateId: STATE_IDS.DIZZY_S,
    OnEnter: (p, w) => {
      p.ECB.SetECBShape(STATE_IDS.DIZZY_S);
    },
    OnUpdate: (p, w) => {
    },
    OnExit: (p, w) => {
      p.ECB.ResetECBShape();
    }
  };
  var legdeGetUp = {
    StateName: "LedgeGetUp",
    StateId: STATE_IDS.LEDGE_GUA_S,
    OnEnter: (p, w) => {
      p.ECB.SetECBShape(STATE_IDS.LEDGE_GUA_S);
      p.Velocity.X.Zero();
      p.Velocity.Y.Zero();
    },
    OnUpdate: (p, w) => {
      const framesToStage = p.FSMInfo.GetCurrentStateFrameLength();
      const currentFrame = p.FSMInfo.CurrentStateFrame;
      const remainingFrames = framesToStage - currentFrame;
      const stage = w.StageData.Stage;
      const ground = stage.StageVerticies.GetGround();
      let targetXRaw = 0;
      let targetYRaw = 0;
      if (p.Flags.IsFacingRight) {
        const leftCorner = ground[0];
        targetXRaw = leftCorner.X1.Raw;
        targetYRaw = leftCorner.Y1.Raw;
      } else {
        const rightCorner = ground[ground.length - 1];
        targetXRaw = rightCorner.X2.Raw;
        targetYRaw = rightCorner.Y2.Raw;
      }
      const diffXRaw = targetXRaw - p.Position.X.Raw;
      const diffYRaw = targetYRaw - p.Position.Y.Raw;
      const remainingFramesRaw = NumberToRaw(remainingFrames);
      const stepXRaw = DivideRaw(diffXRaw, remainingFramesRaw);
      const stepYRaw = DivideRaw(diffYRaw, remainingFramesRaw);
      AddToPlayerXPostionRaw(p, stepXRaw);
      AddToPlayerYPositionRaw(p, stepYRaw);
    },
    OnExit: (p, w) => {
      p.ECB.ResetECBShape();
    }
  };
  function fastFallCheck(p, w) {
    const inputStore = w.PlayerData.InputStore(p.ID);
    const curFrame = w.LocalFrame;
    const prevFrame = w.PreviousFrame;
    const ia = inputStore.GetInputForFrame(curFrame);
    const prevIa = inputStore.GetInputForFrame(prevFrame);
    if (p.Velocity.Y.Raw >= 0 && prevIa !== void 0 && ShouldFastFall(ia.LYAxis.Raw, prevIa.LYAxis.Raw)) {
      p.Flags.FastFallOn();
    }
  }
  function attackOnEnter(p, w, gameEventId, stateId) {
    const attackComp = p.Attacks;
    attackComp.SetCurrentAttack(gameEventId);
    const atk = attackComp.GetAttack();
    if (atk === void 0) {
      return;
    }
    p.ECB.SetECBShape(stateId);
    const onEnterCommands = atk.onEnterCommands;
    const onEnterEventCount = onEnterCommands.length;
    for (let i = 0; i < onEnterEventCount; i++) {
      const onEnterCommand = onEnterCommands[i];
      HandleCommand(w, p, onEnterCommand);
    }
  }
  function attackOnUpdate(p, w) {
    const attack = p.Attacks.GetAttack();
    if (attack === void 0) {
      return;
    }
    const currentStateFrame = p.FSMInfo.CurrentStateFrame;
    const impulse = attack.GetImpulseForFrame(currentStateFrame);
    if (impulse !== void 0) {
      addAttackImpulseToPlayer(p, impulse, attack);
    }
    const updateCommands = attack.onUpdateCommands.get(currentStateFrame);
    if (updateCommands !== void 0) {
      const updateCommandCount = updateCommands.length;
      for (let i = 0; i < updateCommandCount; i++) {
        const updateCommand = updateCommands[i];
        HandleCommand(w, p, updateCommand);
      }
    }
  }
  function aerialInputOnUpdate(p, w) {
    const inputStore = w.PlayerData.InputStore(p.ID);
    const curFrame = w.LocalFrame;
    const ia = inputStore.GetInputForFrame(curFrame);
    const speedsComp = p.Speeds;
    if (!p.Flags.IsPlatDetectDisabled) {
      fastFallCheck(p, w);
    }
    p.Velocity.AddClampedXImpulseRaw(
      speedsComp.AerialSpeedInpulseLimitRaw,
      MultiplyRaw(ia.LXAxis.Raw, speedsComp.ArielVelocityMultiplierRaw)
    );
  }
  function attackOnExit(p, w) {
    const attackComp = p.Attacks;
    const atk = attackComp.GetAttack();
    if (atk === void 0) {
      return;
    }
    const onExitCommands = atk.onExitCommands;
    const onExitCommandCount = onExitCommands.length;
    for (let i = 0; i < onExitCommandCount; i++) {
      const onExitCommand = onExitCommands[i];
      HandleCommand(w, p, onExitCommand);
    }
    attackComp.ZeroCurrentAttack();
    p.ECB.ResetECBShape();
  }
  function ShouldFastFall(curLYAxsisRaw, prevLYAxsisRaw) {
    return curLYAxsisRaw < -POINT_EIGHT && prevLYAxsisRaw > -POINT_EIGHT;
  }
  function addAttackImpulseToPlayer(p, impulse, attack) {
    const xRaw = p.Flags.IsFacingRight ? impulse.X.Raw : -impulse.X.Raw;
    const yRaw = impulse.Y.Raw;
    const clampRaw = attack?.ImpulseClamp?.Raw;
    const pVel = p.Velocity;
    if (clampRaw !== void 0) {
      pVel.AddClampedXImpulseRaw(clampRaw, xRaw);
      pVel.AddClampedYImpulseRaw(clampRaw, yRaw);
    }
  }
  function grabOnEnter(p, gameEventId, stateId) {
    const grabComp = p.Grabs;
    grabComp.SetGrab(gameEventId);
    const grab = grabComp.GetGrab();
    if (grab === void 0) {
      return;
    }
    p.ECB.SetECBShape(stateId);
  }
  function grabOnUpdate(p, w) {
    const grabs = p.Grabs;
    const grab = grabs.GetGrab();
    if (grab === void 0) {
      return;
    }
    const currentStateFrame = p.FSMInfo.CurrentStateFrame;
    const impulse = grab.GetImpulseForFrame(currentStateFrame);
    if (impulse !== void 0) {
      addGrabImpulseToPlayer(p, impulse, grab);
    }
  }
  function grabOnExit(p, w) {
    const grabComp = p.Grabs;
    const grab = grabComp.GetGrab();
    if (grab === void 0) {
      return;
    }
    grabComp.ZeroCurrentGrab();
    p.ECB.ResetECBShape();
  }
  function addGrabImpulseToPlayer(p, impulse, grab) {
    const xRaw = p.Flags.IsFacingRight ? impulse.X.Raw : -impulse.X.Raw;
    const yRaw = impulse.Y.Raw;
    const clampRaw = grab?.ImpulseClamp?.Raw;
    const pVel = p.Velocity;
    if (clampRaw !== void 0) {
      pVel.AddClampedXImpulseRaw(clampRaw, xRaw);
      pVel.AddClampedYImpulseRaw(clampRaw, yRaw);
    }
  }

  // game/engine/finite-state-machine/PlayerStates.ts
  var IDLE_STATE_RELATIONS = InitIdleRelations();
  var SHIELD_RAISE_RELATIONS = InitShieldRaiseRelations();
  var SHIELD_RELATIONS = InitShieldRelations();
  var SHIELD_DROP_RELATIONS = InitShieldDropRelations();
  var SPOT_DODGE_RELATIONS = InitSpotDodgeRelations();
  var ROLL_DODGE_RELATIONS = InitRollDodgeRelations();
  var TURN_RELATIONS = InitTurnRelations();
  var WALK_RELATIONS = InitWalkRelations();
  var DASH_RELATIONS = InitDashRelations();
  var DASH_TURN_RELATIONS = InitDashTurnRelations();
  var RUN_RELATIONS = InitRunRelations();
  var RUN_TURN_RELATIONS = InitRunTurnRelations();
  var STOP_RUN_RELATIONS = InitStopRunRelations();
  var JUMP_SQUAT_RELATIONS = InitJumpSquatRelations();
  var JUMP_RELATIONS = InitJumpRelations();
  var NFALL_RELATIONS = InitNeutralFallRelations();
  var LAND_RELATIONS = InitLandRelations();
  var SOFT_LAND_RELATIONS = InitSoftLandRelations();
  var LEDGE_GRAB_RELATIONS = InitLedgeGrabRelations();
  var AIR_DODGE_RELATIONS = InitAirDodgeRelations();
  var HELPESS_RELATIONS = InitHelpessRelations();
  var ATTACK_RELATIONS = InitAttackRelations();
  var SIDE_CHARGE_RELATIONS = InitSideChargeRelations();
  var SIDE_CHARGE_EX_RELATIONS = InitSideChargeExRelations();
  var DOWN_TILT_RELATIONS = InitDownTiltRelations();
  var UP_TILT_RELATIONS = InitUpTiltRelations();
  var SIDE_TILT_RELATIONS = InitSideTiltRelations();
  var DASH_ATK_RELATIONS = InitDashAttackRelations();
  var AIR_ATK_RELATIONS = InitAirAttackRelations();
  var F_AIR_ATK_RELATIONS = InitFAirAttackRelations();
  var U_AIR_ATK_RELATIONS = InitUAirRelations();
  var B_AIR_ATK_RELATIONS = InitBAirRelations();
  var D_AIR_ATK_RELATIONS = InitDAirRelations();
  var N_SPECIAL_ATK_RELATIONS = InitNSpecialRelations();
  var SIDE_SPCL_RELATIONS = InitSideSpecialRelations();
  var SIDE_SPCL_EX_RELATIONS = InitSideSpecialExtensionRelations();
  var SIDE_SPCL_AIR_RELATIONS = InitSideSpecialAirRelations();
  var SIDE_SPCL_AIR_EX_RELATIONS = InitSideSpecialExAirRelations();
  var DOWN_SPECIAL_RELATIONS = InitDownSpecialRelations();
  var DOWN_SPECIAL_AIR_RELATIONS = InitDownSpecialAirRelations();
  var UP_SPECIAL_RELATIONS = InitUpSpecialRelations();
  var HIT_STOP_RELATIONS = InitHitStopRelations();
  var TUMBLE_RELATIONS = InitTumbleRelations();
  var LAUNCH_RELATIONS = InitLaunchRelations();
  var CROUCH_RELATIONS = InitCrouchRelations();
  var UP_CHARGE_RELATIONS = InitUpChargeRelations();
  var UP_CHARGE_EX_RELATIONS = InitiUpChargeExRelations();
  var DOWN_CHARGE_RELATIONS = InitDownChargeRelations();
  var DOWN_CHARGE_EX_RELATIONS = InitDownChargeExRelations();
  var GRAB_RELATIONS = InitGrabRelations();
  var GRAB_HOLD_RELATIONS = InitHoldRelations();
  var GRAB_HELD_RELATIONS = InitHeldRelations();
  var GRAB_RELEASE_RELATIONS = InitGrabReleaseRelations();
  var GRAB_ESCAPE_RELATIONS = InitGrabEscapeRelations();
  var SHIELD_BREAK_RELATIONS = InitShieldBreakRelations();
  var SHIELD_BREAK_LAND_RELATIONS = InitShieldBreakLandRelations();
  var SHIELD_BREAK_TUMBLE_RELATIONS = initShieldTubmleRelations();
  var SHIELD_BREAK_DIZZY_RELATIONS = InitDizzyRelations();
  var ActionMappings = (/* @__PURE__ */ new Map()).set(IDLE_STATE_RELATIONS.stateId, IDLE_STATE_RELATIONS.mappings).set(SPOT_DODGE_RELATIONS.stateId, SPOT_DODGE_RELATIONS.mappings).set(ROLL_DODGE_RELATIONS.stateId, ROLL_DODGE_RELATIONS.mappings).set(SHIELD_RAISE_RELATIONS.stateId, SHIELD_RAISE_RELATIONS.mappings).set(SHIELD_RELATIONS.stateId, SHIELD_RELATIONS.mappings).set(SHIELD_DROP_RELATIONS.stateId, SHIELD_DROP_RELATIONS.mappings).set(TURN_RELATIONS.stateId, TURN_RELATIONS.mappings).set(WALK_RELATIONS.stateId, WALK_RELATIONS.mappings).set(DASH_RELATIONS.stateId, DASH_RELATIONS.mappings).set(DASH_TURN_RELATIONS.stateId, DASH_TURN_RELATIONS.mappings).set(RUN_RELATIONS.stateId, RUN_RELATIONS.mappings).set(RUN_TURN_RELATIONS.stateId, RUN_TURN_RELATIONS.mappings).set(STOP_RUN_RELATIONS.stateId, STOP_RUN_RELATIONS.mappings).set(JUMP_SQUAT_RELATIONS.stateId, JUMP_SQUAT_RELATIONS.mappings).set(JUMP_RELATIONS.stateId, JUMP_RELATIONS.mappings).set(NFALL_RELATIONS.stateId, NFALL_RELATIONS.mappings).set(LAND_RELATIONS.stateId, LAND_RELATIONS.mappings).set(SOFT_LAND_RELATIONS.stateId, SOFT_LAND_RELATIONS.mappings).set(LEDGE_GRAB_RELATIONS.stateId, LEDGE_GRAB_RELATIONS.mappings).set(AIR_DODGE_RELATIONS.stateId, AIR_DODGE_RELATIONS.mappings).set(HELPESS_RELATIONS.stateId, HELPESS_RELATIONS.mappings).set(ATTACK_RELATIONS.stateId, ATTACK_RELATIONS.mappings).set(SIDE_CHARGE_RELATIONS.stateId, SIDE_CHARGE_RELATIONS.mappings).set(SIDE_CHARGE_EX_RELATIONS.stateId, SIDE_CHARGE_EX_RELATIONS.mappings).set(UP_CHARGE_RELATIONS.stateId, UP_CHARGE_RELATIONS.mappings).set(UP_CHARGE_EX_RELATIONS.stateId, UP_CHARGE_EX_RELATIONS.mappings).set(DOWN_CHARGE_RELATIONS.stateId, DOWN_CHARGE_RELATIONS.mappings).set(DOWN_CHARGE_EX_RELATIONS.stateId, DOWN_CHARGE_EX_RELATIONS.mappings).set(DOWN_TILT_RELATIONS.stateId, DOWN_TILT_RELATIONS.mappings).set(UP_TILT_RELATIONS.stateId, UP_TILT_RELATIONS.mappings).set(SIDE_TILT_RELATIONS.stateId, SIDE_TILT_RELATIONS.mappings).set(DASH_ATK_RELATIONS.stateId, DASH_ATK_RELATIONS.mappings).set(AIR_ATK_RELATIONS.stateId, AIR_ATK_RELATIONS.mappings).set(F_AIR_ATK_RELATIONS.stateId, F_AIR_ATK_RELATIONS.mappings).set(U_AIR_ATK_RELATIONS.stateId, U_AIR_ATK_RELATIONS.mappings).set(B_AIR_ATK_RELATIONS.stateId, B_AIR_ATK_RELATIONS.mappings).set(D_AIR_ATK_RELATIONS.stateId, D_AIR_ATK_RELATIONS.mappings).set(DOWN_SPECIAL_RELATIONS.stateId, DOWN_SPECIAL_RELATIONS.mappings).set(DOWN_SPECIAL_AIR_RELATIONS.stateId, DOWN_SPECIAL_AIR_RELATIONS.mappings).set(N_SPECIAL_ATK_RELATIONS.stateId, N_SPECIAL_ATK_RELATIONS.mappings).set(SIDE_SPCL_RELATIONS.stateId, SIDE_SPCL_RELATIONS.mappings).set(SIDE_SPCL_EX_RELATIONS.stateId, SIDE_SPCL_EX_RELATIONS.mappings).set(SIDE_SPCL_AIR_RELATIONS.stateId, SIDE_SPCL_AIR_RELATIONS.mappings).set(SIDE_SPCL_AIR_EX_RELATIONS.stateId, SIDE_SPCL_AIR_EX_RELATIONS.mappings).set(UP_SPECIAL_RELATIONS.stateId, UP_SPECIAL_RELATIONS.mappings).set(HIT_STOP_RELATIONS.stateId, HIT_STOP_RELATIONS.mappings).set(TUMBLE_RELATIONS.stateId, TUMBLE_RELATIONS.mappings).set(LAUNCH_RELATIONS.stateId, LAUNCH_RELATIONS.mappings).set(CROUCH_RELATIONS.stateId, CROUCH_RELATIONS.mappings).set(GRAB_RELATIONS.stateId, GRAB_RELATIONS.mappings).set(GRAB_HOLD_RELATIONS.stateId, GRAB_HOLD_RELATIONS.mappings).set(GRAB_HELD_RELATIONS.stateId, GRAB_HELD_RELATIONS.mappings).set(GRAB_RELEASE_RELATIONS.stateId, GRAB_RELEASE_RELATIONS.mappings).set(GRAB_ESCAPE_RELATIONS.stateId, GRAB_ESCAPE_RELATIONS.mappings).set(SHIELD_BREAK_RELATIONS.stateId, SHIELD_BREAK_RELATIONS.mappings).set(
    SHIELD_BREAK_TUMBLE_RELATIONS.stateId,
    SHIELD_BREAK_TUMBLE_RELATIONS.mappings
  ).set(
    SHIELD_BREAK_LAND_RELATIONS.stateId,
    SHIELD_BREAK_LAND_RELATIONS.mappings
  ).set(
    SHIELD_BREAK_DIZZY_RELATIONS.stateId,
    SHIELD_BREAK_DIZZY_RELATIONS.mappings
  );
  var FSMStates = (/* @__PURE__ */ new Map()).set(Idle.StateId, Idle).set(SpotDodge.StateId, SpotDodge).set(RollDodge.StateId, RollDodge).set(ShieldRaise.StateId, ShieldRaise).set(Shield2.StateId, Shield2).set(ShieldDrop.StateId, ShieldDrop).set(Turn.StateId, Turn).set(Walk.StateId, Walk).set(Run.StateId, Run).set(RunTurn.StateId, RunTurn).set(RunStop.StateId, RunStop).set(Dash.StateId, Dash).set(DashTurn.StateId, DashTurn).set(JumpSquat.StateId, JumpSquat).set(Jump2.StateId, Jump2).set(NeutralFall.StateId, NeutralFall).set(Land.StateId, Land).set(SoftLand.StateId, SoftLand).set(LedgeGrab.StateId, LedgeGrab).set(AirDodge.StateId, AirDodge).set(Helpless.StateId, Helpless).set(NAttack.StateId, NAttack).set(SideCharge.StateId, SideCharge).set(SideChargeEx.StateId, SideChargeEx).set(SideTilt.StateId, SideTilt).set(UpCharge.StateId, UpCharge).set(UpChargeEx.StateId, UpChargeEx).set(DownCharge.StateId, DownCharge).set(DownChargeEx.StateId, DownChargeEx).set(DashAttack.StateId, DashAttack).set(NAerialAttack.StateId, NAerialAttack).set(FAerialAttack.StateId, FAerialAttack).set(UAirAttack.StateId, UAirAttack).set(BAirAttack.StateId, BAirAttack).set(DAirAttack.StateId, DAirAttack).set(NeutralSpecial.StateId, NeutralSpecial).set(SideSpecial.StateId, SideSpecial).set(SideSpecialExtension.StateId, SideSpecialExtension).set(SideSpecialAir.StateId, SideSpecialAir).set(SideSpecialExtensionAir.StateId, SideSpecialExtensionAir).set(DownSpecial.StateId, DownSpecial).set(DownSpecialAerial.StateId, DownSpecialAerial).set(UpSpecial.StateId, UpSpecial).set(HitStop.StateId, HitStop).set(Tumble.StateId, Tumble).set(Launch.StateId, Launch).set(Crouch.StateId, Crouch).set(DownTilt.StateId, DownTilt).set(UpTilt.StateId, UpTilt).set(NuetralGrab.StateId, NuetralGrab).set(Hold.StateId, Hold).set(Held.StateId, Held).set(GrabRelease.StateId, GrabRelease).set(GrabEscape.StateId, GrabEscape).set(ShieldBreak.StateId, ShieldBreak).set(ShieldBreakTumble.StateId, ShieldBreakTumble).set(ShieldBreakLand.StateId, ShieldBreakLand).set(dizzy.StateId, dizzy);
  var AttackGameEventMappings = (/* @__PURE__ */ new Map()).set(GAME_EVENT_IDS.ATTACK_GE, ATTACK_IDS.N_GRND_ATK).set(GAME_EVENT_IDS.SIDE_CHARGE_GE, ATTACK_IDS.S_CHARGE_ATK).set(GAME_EVENT_IDS.SIDE_CHARGE_EX_GE, ATTACK_IDS.S_CHARGE_EX_ATK).set(GAME_EVENT_IDS.UP_CHARGE_GE, ATTACK_IDS.U_CHARGE_ATK).set(GAME_EVENT_IDS.UP_CHARGE_EX_GE, ATTACK_IDS.U_CHARGE_EX_ATK).set(GAME_EVENT_IDS.DOWN_CHARGE_GE, ATTACK_IDS.D_CHARGE_ATK).set(GAME_EVENT_IDS.DOWN_CHARGE_EX_GE, ATTACK_IDS.D_CHARGE_EX_ATK).set(GAME_EVENT_IDS.DASH_ATTACK_GE, ATTACK_IDS.DASH_ATK).set(GAME_EVENT_IDS.D_TILT_GE, ATTACK_IDS.D_TILT_ATK).set(GAME_EVENT_IDS.S_TILT_GE, ATTACK_IDS.S_TILT_ATK).set(GAME_EVENT_IDS.S_TILT_U_GE, ATTACK_IDS.S_TILT_U_ATK).set(GAME_EVENT_IDS.S_TILT_D_GE, ATTACK_IDS.S_TITL_D_ATK).set(GAME_EVENT_IDS.U_TILT_GE, ATTACK_IDS.U_TILT_ATK).set(GAME_EVENT_IDS.N_AIR_GE, ATTACK_IDS.N_AIR_ATK).set(GAME_EVENT_IDS.F_AIR_GE, ATTACK_IDS.F_AIR_ATK).set(GAME_EVENT_IDS.U_AIR_GE, ATTACK_IDS.U_AIR_ATK).set(GAME_EVENT_IDS.B_AIR_GE, ATTACK_IDS.B_AIR_ATK).set(GAME_EVENT_IDS.D_AIR_GE, ATTACK_IDS.D_AIR_ATK).set(GAME_EVENT_IDS.SPCL_GE, ATTACK_IDS.N_SPCL_ATK).set(GAME_EVENT_IDS.SIDE_SPCL_GE, ATTACK_IDS.S_SPCL_ATK).set(GAME_EVENT_IDS.SIDE_SPCL_EX_GE, ATTACK_IDS.S_SPCL_EX_ATK).set(GAME_EVENT_IDS.S_SPCL_AIR_GE, ATTACK_IDS.S_SPCL_AIR_ATK).set(GAME_EVENT_IDS.S_SPCL_EX_AIR_GE, ATTACK_IDS.S_SPCL_EX_AIR_ATK).set(GAME_EVENT_IDS.DOWN_SPCL_GE, ATTACK_IDS.D_SPCL_ATK).set(GAME_EVENT_IDS.D_SPCL_AIR_GE, ATTACK_IDS.D_SPCL_AIR_ATK).set(GAME_EVENT_IDS.UP_SPCL_GE, ATTACK_IDS.U_SPCL_ATK);
  var GrabGameEventMappings = (/* @__PURE__ */ new Map()).set(GAME_EVENT_IDS.GRAB_GE, GRAB_IDS.GRAB_G).set(GAME_EVENT_IDS.RUN_GRAB_GE, GRAB_IDS.RUN_GRAB_G).set(GAME_EVENT_IDS.SPCL_GRAB_GE, GRAB_IDS.SPCL_GRAB_G);

  // game/engine/entity/components/attack.ts
  var HitBubble = class {
    constructor(hbc) {
      this.Damage = new FixedPoint(0);
      this.Radius = new FixedPoint(0);
      this.launchAngle = new FixedPoint(0);
      this.activeFrames = /* @__PURE__ */ new Set();
      this.frameOffsets = /* @__PURE__ */ new Map();
      this.BubbleId = hbc.BubbleId;
      this.Damage.SetFromNumber(hbc.Damage);
      this.Priority = hbc.Priority;
      this.Radius.SetFromNumber(hbc.Radius);
      this.launchAngle.SetFromNumber(hbc.LaunchAngle);
      for (const [k, v] of hbc.frameOffsets) {
        this.frameOffsets.set(k, ToFV(v.x, v.y));
        this.activeFrames.add(k);
      }
    }
    IsActive(attackFrameNumber) {
      return this.activeFrames.has(attackFrameNumber);
    }
    GetLocalPosiitionOffsetForFrame(frameNumber2) {
      return this.frameOffsets.get(frameNumber2);
    }
    GetGlobalPosition(vecPool, playerX, playerY, facinRight, attackFrameNumber) {
      const offset = this.frameOffsets.get(attackFrameNumber);
      if (offset === void 0) {
        return void 0;
      }
      const xRaw = playerX.Raw;
      const yRaw = playerY.Raw;
      const globalXRaw = facinRight ? xRaw + offset.X.Raw : xRaw - offset.X.Raw;
      const globalYRaw = yRaw + offset.Y.Raw;
      return vecPool.Rent().SetXYRaw(globalXRaw, globalYRaw);
    }
  };
  var Attack2 = class {
    constructor(conf) {
      this.BaseKnockBack = new FixedPoint(0);
      this.KnockBackScaling = new FixedPoint(0);
      this.CanOnlyFallOffLedgeIfFacingAwayFromIt = false;
      this.onEnterCommands = [];
      this.onUpdateCommands = /* @__PURE__ */ new Map();
      this.onExitCommands = [];
      this.AttackId = conf.AttackId;
      this.Name = conf.Name;
      this.TotalFrameLength = conf.TotalFrameLength;
      this.InteruptableFrame = conf.InteruptableFrame;
      this.GravityActive = conf.GravityActive;
      this.CanOnlyFallOffLedgeIfFacingAwayFromIt = conf.CanOnlyFallOffLedgeIfFacingAwayFromIt;
      this.BaseKnockBack.SetFromNumber(conf.BaseKnockBack);
      this.KnockBackScaling.SetFromNumber(conf.KnockBackScaling);
      if (conf.ImpulseClamp != void 0) {
        this.ImpulseClamp = new FixedPoint().SetFromNumber(conf.ImpulseClamp);
      }
      const hbs = conf.HitBubbles.map((hbc) => new HitBubble(hbc));
      this.HitBubbles = hbs.sort((a, b) => a.Priority - b.Priority);
      if (conf.Impulses !== void 0) {
        this.Impulses = /* @__PURE__ */ new Map();
        for (const [k, v] of conf.Impulses) {
          this.Impulses.set(k, ToFV(v.x, v.y));
        }
      }
      if (conf.onEnterCommands !== void 0) {
        this.onEnterCommands = conf.onEnterCommands;
      }
      if (conf.onUpdateCommands !== void 0) {
        this.onUpdateCommands = conf.onUpdateCommands;
      }
      if (conf.onExitCommands !== void 0) {
        this.onExitCommands = conf.onExitCommands;
      }
    }
    GetImpulseForFrame(frameNumber2) {
      if (this.Impulses === void 0) {
        return void 0;
      }
      return this.Impulses.get(frameNumber2);
    }
    GetActiveBubblesForFrame(frameNumber2, activeHBs) {
      const hitBubbleslength = this.HitBubbles.length;
      if (hitBubbleslength === 0) {
        return activeHBs;
      }
      for (let i = 0; i < hitBubbleslength; i++) {
        const hb = this.HitBubbles[i];
        if (hb.IsActive(frameNumber2)) {
          activeHBs.AddBubble(hb);
        }
      }
      return activeHBs;
    }
  };
  var AttackComponment = class {
    constructor(attacksConfigs) {
      this.currentAttack = void 0;
      this.PlayerIdsHit = /* @__PURE__ */ new Set();
      const attacks = /* @__PURE__ */ new Map();
      attacksConfigs.forEach((ac) => {
        const atk = new Attack2(ac);
        attacks.set(ac.AttackId, atk);
      });
      this.attacks = attacks;
    }
    GetAttack() {
      return this.currentAttack;
    }
    SetCurrentAttack(gameEventId) {
      const attackId = AttackGameEventMappings.get(gameEventId);
      if (attackId === void 0) {
        return;
      }
      const attack = this.attacks.get(attackId);
      if (attack === void 0) {
        return;
      }
      this.currentAttack = attack;
    }
    ZeroCurrentAttack() {
      if (this.currentAttack === void 0) {
        return;
      }
      this.ResetPlayerIdsHit();
      this.currentAttack = void 0;
    }
    SnapShot() {
      const snapShot = {
        attack: void 0,
        playersHit: void 0
      };
      if (this.currentAttack !== void 0) {
        snapShot.attack = this.currentAttack;
      }
      if (this.PlayerIdsHit.size > 0) {
        snapShot.playersHit = Array.from(this.PlayerIdsHit);
      }
      return snapShot;
    }
    SetFromSnapShot(snapShot) {
      this.currentAttack = snapShot.attack;
      this.PlayerIdsHit.clear();
      if (snapShot.playersHit !== void 0) {
        for (let i = 0; i < snapShot.playersHit.length; i++) {
          this.PlayerIdsHit.add(snapShot.playersHit[i]);
        }
      } else {
        this.PlayerIdsHit.clear();
      }
    }
    HitPlayer(playerID) {
      this.PlayerIdsHit.add(playerID);
    }
    HasHitPlayer(playerID) {
      return this.PlayerIdsHit.has(playerID);
    }
    ResetPlayerIdsHit() {
      this.PlayerIdsHit.clear();
    }
    get _attacks() {
      return this.attacks;
    }
  };

  // game/engine/entity/components/ecb.ts
  var POINT_FIVE = NumberToRaw(0.5);
  function CreateDiamondFromHistory(ecbSnapshot, pool) {
    const diamondDTO = pool.Rent();
    const posX = NumberToRaw(ecbSnapshot.posX);
    const posY = NumberToRaw(ecbSnapshot.posY);
    const ecbShape = ecbSnapshot.ecbShape;
    const height = ecbShape.height.Raw;
    const width = ecbShape.width.Raw;
    const yOffset = ecbShape.yOffset.Raw;
    const halfWidth = MultiplyRaw(width, POINT_FIVE);
    const halfHeight = MultiplyRaw(height, POINT_FIVE);
    diamondDTO.Bottom.X.SetFromRaw(posX);
    diamondDTO.Bottom.Y.SetFromRaw(posY + yOffset);
    diamondDTO.Left.X.SetFromRaw(posX - halfWidth);
    diamondDTO.Left.Y.SetFromRaw(posY + yOffset - halfHeight);
    diamondDTO.Top.X.SetFromRaw(posX);
    diamondDTO.Top.Y.SetFromRaw(posY + yOffset - height);
    diamondDTO.Right.X.SetFromRaw(posX + halfWidth);
    diamondDTO.Right.Y.SetFromRaw(posY + yOffset - halfHeight);
    return diamondDTO;
  }
  var ECBComponent = class {
    constructor(shapes, height = 100, width = 100, yOffset = 0) {
      this.SensorDepth = new FixedPoint(1);
      this.x = new FixedPoint(0);
      this.y = new FixedPoint(0);
      this.curVerts = new Array(4);
      this.OriginalShape = {
        height: new FixedPoint(height),
        width: new FixedPoint(width),
        yOffset: new FixedPoint(yOffset)
      };
      this.ecbStateShapes = /* @__PURE__ */ new Map();
      for (const [Key, val] of shapes) {
        this.ecbStateShapes.set(Key, {
          height: new FixedPoint(val.height),
          width: new FixedPoint(val.width),
          yOffset: new FixedPoint(val.yOffset)
        });
      }
      this.currentShape = this.OriginalShape;
      FillArrayWithFlatVec(this.curVerts);
      this.update();
    }
    GetActiveVerts() {
      return this.curVerts;
    }
    MoveToPosition(x, y) {
      this.x.SetFromFp(x);
      this.y.SetFromFp(y);
      this.update();
    }
    MoveToPositionRaw(xRaw, yRaw) {
      this.x.SetFromRaw(xRaw);
      this.y.SetFromRaw(yRaw);
      this.update();
    }
    SetECBShape(stateId) {
      this.currentShape = this.ecbStateShapes.get(stateId) || this.OriginalShape;
      this.update();
    }
    update() {
      const half = POINT_FIVE;
      const px = this.x.Raw;
      const py = this.y.Raw;
      const shape = this.currentShape;
      const height = shape.height.Raw;
      const width = shape.width.Raw;
      const yOffset = shape.yOffset.Raw;
      const bottomX = px;
      const bottomY = py + yOffset;
      const topX = px;
      const topY = bottomY - height;
      const halfWidth = MultiplyRaw(width, half);
      const halfHeight = MultiplyRaw(height, half);
      const leftX = bottomX - halfWidth;
      const leftY = bottomY - halfHeight;
      const rightX = bottomX + halfWidth;
      const rightY = leftY;
      this.curVerts[0].X.SetFromRaw(bottomX);
      this.curVerts[0].Y.SetFromRaw(bottomY);
      this.curVerts[1].X.SetFromRaw(leftX);
      this.curVerts[1].Y.SetFromRaw(leftY);
      this.curVerts[2].X.SetFromRaw(topX);
      this.curVerts[2].Y.SetFromRaw(topY);
      this.curVerts[3].X.SetFromRaw(rightX);
      this.curVerts[3].Y.SetFromRaw(rightY);
    }
    get Bottom() {
      return this.curVerts[0];
    }
    get Left() {
      return this.curVerts[1];
    }
    get Top() {
      return this.curVerts[2];
    }
    get Right() {
      return this.curVerts[3];
    }
    get Height() {
      return this.currentShape.height;
    }
    get Width() {
      return this.currentShape.width;
    }
    get YOffset() {
      return this.currentShape.yOffset;
    }
    get _db_ecbShapes() {
      return this.ecbStateShapes;
    }
    ResetECBShape() {
      this.currentShape = this.OriginalShape;
      this.update();
    }
    SnapShot() {
      return {
        posX: this.x.AsNumber,
        posY: this.y.AsNumber,
        ecbShape: this.currentShape
      };
    }
    SetFromSnapShot(snapShot) {
      this.x.SetFromNumber(snapShot.posX);
      this.y.SetFromNumber(snapShot.posY);
      this.currentShape = snapShot.ecbShape;
      this.update();
    }
  };

  // game/engine/entity/components/flags.ts
  var PlayerFlagsComponent = class {
    constructor() {
      this.facingRight = false;
      this.fastFalling = false;
      this.hitPauseFrames = 0;
      this.intangabilityFrames = 0;
      this.disablePlatformDetection = 0;
      this.velocityDecayActive = true;
    }
    FaceRight() {
      this.facingRight = true;
    }
    FaceLeft() {
      this.facingRight = false;
    }
    ChangeDirections() {
      this.facingRight = !this.facingRight;
    }
    FastFallOn() {
      this.fastFalling = true;
    }
    FastFallOff() {
      this.fastFalling = false;
    }
    VelocityDecayOff() {
      this.velocityDecayActive = false;
    }
    VelocityDecayOn() {
      this.velocityDecayActive = true;
    }
    SetHitPauseFrames(frames) {
      this.hitPauseFrames = frames;
    }
    DecrementHitPause() {
      this.hitPauseFrames--;
    }
    DecrementIntangabilityFrames() {
      this.intangabilityFrames--;
    }
    SetIntangabilityFrames(frames) {
      this.intangabilityFrames = frames;
    }
    DecrementDisablePlatDetection() {
      this.disablePlatformDetection--;
    }
    SetDisablePlatFrames(frameCount) {
      this.disablePlatformDetection = frameCount;
    }
    ZeroIntangabilityFrames() {
      this.intangabilityFrames = 0;
    }
    ZeroHitPauseFrames() {
      this.hitPauseFrames = 0;
    }
    ZeroDisablePlatDetection() {
      this.disablePlatformDetection = 0;
    }
    get IsFastFalling() {
      return this.fastFalling;
    }
    get IsFacingRight() {
      return this.facingRight;
    }
    get IsFacingLeft() {
      return !this.facingRight;
    }
    get IsVelocityDecayActive() {
      return this.velocityDecayActive;
    }
    get IsInHitPause() {
      return this.hitPauseFrames > 0;
    }
    get IsIntangible() {
      return this.intangabilityFrames > 0;
    }
    get IsPlatDetectDisabled() {
      return this.disablePlatformDetection > 0;
    }
    GetIntangabilityFrames() {
      return this.intangabilityFrames;
    }
    HasNoVelocityDecay() {
      return !this.velocityDecayActive;
    }
    SnapShot() {
      return {
        FacingRight: this.facingRight,
        FastFalling: this.fastFalling,
        HitPauseFrames: this.hitPauseFrames,
        IntangabilityFrames: this.intangabilityFrames,
        DisablePlatDetection: this.disablePlatformDetection,
        VeloctyDecay: this.velocityDecayActive
      };
    }
    SetFromSnapShot(snapShot) {
      this.fastFalling = snapShot.FastFalling;
      this.facingRight = snapShot.FacingRight;
      this.hitPauseFrames = snapShot.HitPauseFrames;
      this.intangabilityFrames = snapShot.IntangabilityFrames;
      this.disablePlatformDetection = snapShot.DisablePlatDetection;
      this.velocityDecayActive = snapShot.VeloctyDecay;
    }
  };

  // game/engine/entity/components/fsmInfo.ts
  var FSMInfoComponent = class {
    constructor(frameLengths) {
      this.currentState = Idle;
      this.currentStateFrame = 0;
      this.frameLengths = frameLengths;
    }
    get CurrentStateFrame() {
      return this.currentStateFrame;
    }
    get CurrentState() {
      return this.currentState;
    }
    get CurrentStatetId() {
      return this.currentState.StateId;
    }
    set _db_currentStateFrame(frame) {
      this.currentStateFrame = frame;
    }
    SetCurrentState(s) {
      this.currentState = s;
    }
    IncrementStateFrame() {
      this.currentStateFrame++;
    }
    SetStateFrameToZero() {
      this.currentStateFrame = 0;
    }
    GetFrameLengthForState(stateId) {
      return this.frameLengths.get(stateId);
    }
    GetCurrentStateFrameLength() {
      return this.frameLengths.get(this.CurrentState.StateId);
    }
    SnapShot() {
      return {
        State: this.currentState,
        StateFrame: this.currentStateFrame
      };
    }
    SetFromSnapShot(snapShot) {
      this.currentState = snapShot.State;
      this.currentStateFrame = snapShot.StateFrame;
    }
  };

  // game/engine/entity/components/hitStop.ts
  var HitStopComponent = class {
    constructor() {
      this.hitStopFrames = 0;
    }
    SetHitStop(frames) {
      this.hitStopFrames = frames;
    }
    Decrement() {
      this.hitStopFrames--;
    }
    SetZero() {
      this.hitStopFrames = 0;
    }
    get HitStopFrames() {
      return this.hitStopFrames;
    }
    SnapShot() {
      return this.hitStopFrames;
    }
    SetFromSnapShot(snapShot) {
      this.hitStopFrames = snapShot;
    }
  };

  // game/engine/entity/components/hitStun.ts
  var HitStunComponent = class {
    constructor() {
      this.framesOfHitStun = 0;
      this.xVelocity = new FixedPoint(0);
      this.yVelocity = new FixedPoint(0);
    }
    set FramesOfHitStun(hitStunFrames) {
      this.framesOfHitStun = hitStunFrames;
    }
    get FramesOfHitStun() {
      return this.framesOfHitStun;
    }
    get VX() {
      return this.xVelocity;
    }
    get VY() {
      return this.yVelocity;
    }
    SetHitStun(hitStunFrames, vx, vy) {
      this.framesOfHitStun = hitStunFrames;
      this.xVelocity.SetFromFp(vx);
      this.yVelocity.SetFromFp(vy);
    }
    DecrementHitStun() {
      this.framesOfHitStun--;
    }
    Zero() {
      this.framesOfHitStun = 0;
      this.xVelocity.Zero();
      this.yVelocity.Zero();
    }
    SnapShot() {
      return {
        hitStunFrames: this.framesOfHitStun,
        vx: this.xVelocity.AsNumber,
        vy: this.yVelocity.AsNumber
      };
    }
    SetFromSnapShot(snapShot) {
      this.framesOfHitStun = snapShot.hitStunFrames;
      this.xVelocity.SetFromNumber(snapShot.vx);
      this.yVelocity.SetFromNumber(snapShot.vy);
    }
  };

  // game/engine/entity/components/hurtCircles.ts
  var HurtCapsule = class {
    constructor(startOffsetX, startOffsetY, endOffsetX, endOffsetY, radius) {
      this.StartOffsetX = new FixedPoint();
      this.StartOffsetY = new FixedPoint();
      this.EndOffsetX = new FixedPoint();
      this.EndOffsetY = new FixedPoint();
      this.Radius = new FixedPoint();
      this.StartOffsetX.SetFromNumber(startOffsetX);
      this.StartOffsetY.SetFromNumber(startOffsetY);
      this.EndOffsetX.SetFromNumber(endOffsetX);
      this.EndOffsetY.SetFromNumber(endOffsetY);
      this.Radius.SetFromNumber(radius);
    }
    GetStartPosition(x, y, vecPool) {
      const xsRaw = this.StartOffsetX.Raw + x.Raw;
      const ysRaw = this.StartOffsetY.Raw + y.Raw;
      return vecPool.Rent().SetXYRaw(xsRaw, ysRaw);
    }
    GetEndPosition(x, y, vecPool) {
      const xeRaw = this.EndOffsetX.Raw + x.Raw;
      const yeRaw = this.EndOffsetY.Raw + y.Raw;
      return vecPool.Rent().SetXYRaw(xeRaw, yeRaw);
    }
  };
  var HurtCapsulesComponent = class {
    constructor(hurtCapsules) {
      this.HurtCapsules = [];
      hurtCapsules.forEach((hc) => {
        this.HurtCapsules.push(
          new HurtCapsule(hc.x1, hc.y1, hc.x2, hc.y2, hc.radius)
        );
      });
    }
  };

  // game/engine/entity/components/jump.ts
  var JumpComponent = class {
    constructor(jumpVelocity, numberOfJumps = 2) {
      this.numberOfJumps = 2;
      this.jumpCount = 0;
      this.JumpVelocity = new FixedPoint(0);
      this.JumpVelocity.SetFromNumber(jumpVelocity);
      this.numberOfJumps = numberOfJumps;
    }
    HasJumps() {
      return this.jumpCount < this.numberOfJumps;
    }
    OnFirstJump() {
      return this.jumpCount === 1;
    }
    JumpCountIsZero() {
      return this.jumpCount === 0;
    }
    IncrementJumps() {
      this.jumpCount++;
    }
    ResetJumps() {
      this.jumpCount = 0;
    }
    SnapShot() {
      return this.jumpCount;
    }
    Set(jumps) {
      this.jumpCount = jumps;
    }
    SetFromSnapShot(snapShot) {
      this.jumpCount = snapShot;
    }
    get JumpCount() {
      return this.jumpCount;
    }
  };

  // game/engine/entity/components/ledgeDetector.ts
  var LedgeDetectorComponent = class {
    constructor(x, y, width, height, yOffset = -130) {
      this.maxGrabs = 15;
      this.numberOfLedgeGrabs = 0;
      this.yOffset = new FixedPoint(0);
      this.x = new FixedPoint(0);
      this.y = new FixedPoint(0);
      this.width = new FixedPoint(0);
      this.height = new FixedPoint(0);
      this.rightSide = new Array(4);
      this.leftSide = new Array(4);
      this.height.SetFromNumber(height);
      this.width.SetFromNumber(width);
      this.yOffset.SetFromNumber(yOffset);
      FillArrayWithFlatVec(this.rightSide);
      FillArrayWithFlatVec(this.leftSide);
      this.MoveToRaw(NumberToRaw(x), NumberToRaw(y));
    }
    MoveTo(x, y) {
      this.x.SetFromFp(x);
      this.y.SetAdd(y, this.yOffset);
      this.update();
    }
    MoveToRaw(xRaw, yRaw) {
      this.x.SetFromRaw(xRaw);
      this.y.SetFromRaw(this.yOffset.Raw + yRaw);
      this.update();
    }
    get LeftSide() {
      return this.leftSide;
    }
    get RightSide() {
      return this.rightSide;
    }
    get Width() {
      return this.width;
    }
    get Height() {
      return this.height;
    }
    update() {
      const rightBottomLeft = this.rightSide[0];
      const rightTopLeft = this.rightSide[1];
      const rightTopRight = this.rightSide[2];
      const rightBottomRight = this.rightSide[3];
      const leftBottomLeft = this.leftSide[0];
      const leftTopLeft = this.leftSide[1];
      const leftTopRight = this.leftSide[2];
      const leftBottomRight = this.leftSide[3];
      const widthRaw = this.width.Raw;
      const heightRaw = this.height.Raw;
      const xRaw = this.x.Raw;
      const yRaw = this.y.Raw;
      const widthRightRaw = xRaw + widthRaw;
      const widthLeftRaw = xRaw - widthRaw;
      const bottomHeightRaw = yRaw + heightRaw;
      rightBottomLeft.X.SetFromRaw(xRaw);
      rightBottomLeft.Y.SetFromRaw(bottomHeightRaw);
      rightTopLeft.X.SetFromRaw(xRaw);
      rightTopLeft.Y.SetFromRaw(yRaw);
      rightTopRight.X.SetFromRaw(widthRightRaw);
      rightTopRight.Y.SetFromRaw(yRaw);
      rightBottomRight.X.SetFromRaw(widthRightRaw);
      rightBottomRight.Y.SetFromRaw(bottomHeightRaw);
      leftBottomLeft.X.SetFromRaw(widthLeftRaw);
      leftBottomLeft.Y.SetFromRaw(bottomHeightRaw);
      leftTopLeft.X.SetFromRaw(widthLeftRaw);
      leftTopLeft.Y.SetFromRaw(yRaw);
      leftTopRight.X.SetFromRaw(xRaw);
      leftTopRight.Y.SetFromRaw(yRaw);
      leftBottomRight.X.SetFromRaw(xRaw);
      leftBottomRight.Y.SetFromRaw(bottomHeightRaw);
    }
    SnapShot() {
      return {
        middleX: this.x.AsNumber,
        middleY: this.y.AsNumber,
        numberOfLedgeGrabs: this.numberOfLedgeGrabs
      };
    }
    get CanGrabLedge() {
      return this.numberOfLedgeGrabs < this.maxGrabs;
    }
    IncrementLedgeGrabs() {
      this.numberOfLedgeGrabs++;
    }
    ZeroLedgeGrabCount() {
      this.numberOfLedgeGrabs = 0;
    }
    SetFromSnapShot(snapShot) {
      const middleXRaw = NumberToRaw(snapShot.middleX);
      const middleYRaw = NumberToRaw(snapShot.middleY);
      this.MoveToRaw(middleXRaw, middleYRaw);
      this.numberOfLedgeGrabs = snapShot.numberOfLedgeGrabs;
    }
  };

  // game/engine/entity/components/damage.ts
  var PlayerDamageComponent = class {
    constructor() {
      this.damagePoints = new FixedPoint(0);
    }
    AddDamage(number) {
      this.damagePoints.Add(number);
    }
    SubtractDamage(number) {
      this.damagePoints.Subtract(number);
    }
    ResetDamagePoints() {
      this.damagePoints.Zero();
    }
    get Damage() {
      return this.damagePoints;
    }
    SnapShot() {
      return {
        damagePoints: this.damagePoints.AsNumber
      };
    }
    SetFromSnapShot(snapShot) {
      this.damagePoints.SetFromNumber(snapShot.damagePoints);
    }
    _db_set_damage(number) {
      this.damagePoints.SetFromNumber(number);
    }
  };

  // game/engine/entity/components/position.ts
  var PositionComponent = class {
    constructor() {
      this.p = ToFV(0, 0);
    }
    get X() {
      return this.p.X;
    }
    get Y() {
      return this.p.Y;
    }
    set X(val) {
      this.p.X.SetFromFp(val);
    }
    set Y(val) {
      this.p.Y.SetFromFp(val);
    }
    SetFromFv(fv) {
      this.p.X.SetFromFp(fv.X);
      this.p.Y.SetFromFp(fv.Y);
    }
    SnapShot() {
      return {
        X: this.p.X.AsNumber,
        Y: this.p.Y.AsNumber
      };
    }
    SetFromSnapShot(snapShot) {
      this.p.X.SetFromNumber(snapShot.X);
      this.p.Y.SetFromNumber(snapShot.Y);
    }
  };

  // game/engine/entity/components/sensor.ts
  var Sensor = class {
    constructor() {
      this.xOffset = new FixedPoint();
      this.yOffset = new FixedPoint();
      this.radius = new FixedPoint();
      this.active = false;
    }
    GetGlobalPosition(vecPool, globalX, globalY, facingRight) {
      const xOffsetRaw = this.XOffset.Raw;
      const yOffsetRaw = this.YOffset.Raw;
      const globalXRaw = globalX.Raw;
      const globalYRaw = globalY.Raw;
      const xRaw = facingRight ? globalXRaw + xOffsetRaw : globalXRaw - xOffsetRaw;
      const yRaw = globalYRaw + yOffsetRaw;
      return vecPool.Rent().SetXYRaw(xRaw, yRaw);
    }
    get Radius() {
      return this.radius;
    }
    get XOffset() {
      return this.xOffset;
    }
    get YOffset() {
      return this.yOffset;
    }
    get IsActive() {
      return this.active;
    }
    Activate() {
      this.active = true;
    }
    Deactivate() {
      this.xOffset.Zero();
      this.yOffset.Zero();
      this.radius.Zero();
      this.active = false;
    }
  };
  var SensorComponent = class {
    constructor() {
      this.currentSensorIdx = 0;
      this.sensors = new Array(25);
      for (let i = 0; i < this.sensors.length; i++) {
        this.sensors[i] = new Sensor();
      }
    }
    ActivateSensor(xOffset, yOffset, radius) {
      if (this.currentSensorIdx >= this.sensors.length) {
        throw new Error("No more sensors available to activate.");
      }
      this.ActivateSensorRaw(yOffset.Raw, xOffset.Raw, radius.Raw);
      return this;
    }
    ActivateSensorRaw(xOffsetRaw, yOffsetRaw, radiusRaw) {
      const sensor = this.sensors[this.currentSensorIdx];
      sensor.XOffset.SetFromRaw(xOffsetRaw);
      sensor.YOffset.SetFromRaw(yOffsetRaw);
      sensor.Radius.SetFromRaw(radiusRaw);
      sensor.Activate();
      this.currentSensorIdx++;
    }
    DeactivateSensors() {
      const length = this.sensors.length;
      for (let i = 0; i < length; i++) {
        const sensor = this.sensors[i];
        if (sensor.IsActive) {
          sensor.Deactivate();
        }
      }
      this.currentSensorIdx = 0;
      this.ReactCommand = void 0;
    }
    get Sensors() {
      return this.sensors;
    }
    get NumberActive() {
      return this.currentSensorIdx;
    }
    SnapShot() {
      const snapShot = {
        sensors: void 0,
        reactor: void 0
      };
      const length = this.sensors.length;
      if (length > 0) {
        snapShot.sensors = [];
      }
      for (let i = 0; i < length; i++) {
        const sensor = this.sensors[i];
        if (sensor.IsActive) {
          snapShot.sensors.push({
            yOffset: sensor.YOffset.AsNumber,
            xOffset: sensor.XOffset.AsNumber,
            radius: sensor.Radius.AsNumber
          });
        }
      }
      if (this.ReactCommand !== void 0) {
        snapShot.reactor = this.ReactCommand;
      }
      return snapShot;
    }
    SetFromSnapShot(snapShot) {
      this.DeactivateSensors();
      const snapShotSensorLength = snapShot.sensors?.length ?? 0;
      for (let i = 0; i < snapShotSensorLength; i++) {
        const snapShotSensor = snapShot.sensors[i];
        this.ActivateSensorRaw(
          NumberToRaw(snapShotSensor.yOffset),
          NumberToRaw(snapShotSensor.xOffset),
          NumberToRaw(snapShotSensor.radius)
        );
      }
      if (snapShot.reactor !== void 0) {
        this.ReactCommand = snapShot.reactor;
      } else {
        this.ReactCommand = void 0;
      }
      this.currentSensorIdx = snapShot.sensors?.length ?? 0;
    }
  };

  // game/engine/entity/components/speeds.ts
  var SpeedsComponent = class {
    // Might need a general Aerial speed limit for each character
    constructor(grndSpeedVelDecay, aerialVelocityDecay, aerialSpeedInpulseLimit, aerialVelocityMultiplier, airDodgeSpeed, dodgeRollSpeed, maxWalkSpeed, maxRunSpeed, walkSpeedMultiplier, runSpeedMultiplier, fastFallSpeed, fallSpeed, dashMultiplier, maxDashSpeed, gravity) {
      this.GroundedVelocityDecayRaw = grndSpeedVelDecay.Raw;
      this.AerialVelocityDecayRaw = aerialVelocityDecay.Raw;
      this.AerialSpeedInpulseLimitRaw = aerialSpeedInpulseLimit.Raw;
      this.ArielVelocityMultiplierRaw = aerialVelocityMultiplier.Raw;
      this.AirDogeSpeedRaw = airDodgeSpeed.Raw;
      this.DodeRollSpeedRaw = dodgeRollSpeed.Raw;
      this.MaxWalkSpeedRaw = maxWalkSpeed.Raw;
      this.MaxRunSpeedRaw = maxRunSpeed.Raw;
      this.WalkSpeedMulitplierRaw = walkSpeedMultiplier.Raw;
      this.RunSpeedMultiplierRaw = runSpeedMultiplier.Raw;
      this.FastFallSpeedRaw = fastFallSpeed.Raw;
      this.FallSpeedRaw = fallSpeed.Raw;
      this.DashMultiplierRaw = dashMultiplier.Raw;
      this.MaxDashSpeedRaw = maxDashSpeed.Raw;
      this.GravityRaw = gravity.Raw;
    }
  };
  var SpeedsComponentConfigBuilder = class {
    constructor() {
      this.groundedVelocityDecay = new FixedPoint();
      this.aerialVelocityDecay = new FixedPoint();
      this.aerialSpeedInpulseLimit = new FixedPoint();
      this.aerialSpeedMultiplier = new FixedPoint();
      this.airDodgeSpeed = new FixedPoint();
      this.dodgeRollSpeed = new FixedPoint();
      this.maxWalkSpeed = new FixedPoint();
      this.maxRunSpeed = new FixedPoint();
      this.dashMutiplier = new FixedPoint();
      this.maxDashSpeed = new FixedPoint();
      this.walkSpeedMulitplier = new FixedPoint();
      this.runSpeedMultiplier = new FixedPoint();
      this.fastFallSpeed = new FixedPoint();
      this.fallSpeed = new FixedPoint();
      this.gravity = new FixedPoint();
    }
    SetAerialSpeeds(aerialVelocityDecay, aerialSpeedImpulseLimit, aerialSpeedMultiplier) {
      this.aerialVelocityDecay.SetFromNumber(aerialVelocityDecay);
      this.aerialSpeedInpulseLimit.SetFromNumber(aerialSpeedImpulseLimit);
      this.aerialSpeedMultiplier.SetFromNumber(aerialSpeedMultiplier);
    }
    SetDodgeSpeeds(airDodgeSpeed, dodgeRollSpeed) {
      this.airDodgeSpeed.SetFromNumber(airDodgeSpeed);
      this.dodgeRollSpeed.SetFromNumber(dodgeRollSpeed);
    }
    SetFallSpeeds(fastFallSpeed, fallSpeed, gravity = 1) {
      this.fallSpeed.SetFromNumber(fallSpeed);
      this.fastFallSpeed.SetFromNumber(fastFallSpeed);
      this.gravity.SetFromNumber(gravity);
    }
    SetWalkSpeeds(maxWalkSpeed, walkSpeedMultiplier) {
      this.maxWalkSpeed.SetFromNumber(maxWalkSpeed);
      this.walkSpeedMulitplier.SetFromNumber(walkSpeedMultiplier);
    }
    SetRunSpeeds(maxRunSpeed, runSpeedMultiplier) {
      this.runSpeedMultiplier.SetFromNumber(runSpeedMultiplier);
      this.maxRunSpeed.SetFromNumber(maxRunSpeed);
    }
    SetDashSpeeds(dashMultiplier, maxDashSpeed) {
      this.dashMutiplier.SetFromNumber(dashMultiplier);
      this.maxDashSpeed.SetFromNumber(maxDashSpeed);
    }
    SetGroundedVelocityDecay(groundedVelocityDecay) {
      this.groundedVelocityDecay.SetFromNumber(groundedVelocityDecay);
    }
    Build() {
      return new SpeedsComponent(
        this.groundedVelocityDecay,
        this.aerialVelocityDecay,
        this.aerialSpeedInpulseLimit,
        this.aerialSpeedMultiplier,
        this.airDodgeSpeed,
        this.dodgeRollSpeed,
        this.maxWalkSpeed,
        this.maxRunSpeed,
        this.walkSpeedMulitplier,
        this.runSpeedMultiplier,
        this.fastFallSpeed,
        this.fallSpeed,
        this.dashMutiplier,
        this.maxDashSpeed,
        this.gravity
      );
    }
  };

  // game/engine/entity/components/velocity.ts
  var VelocityComponent = class {
    constructor() {
      this.x = new FixedPoint();
      this.y = new FixedPoint();
    }
    AddClampedXImpulse(clamp, impulse) {
      this.AddClampedXImpulseRaw(clamp.Raw, impulse.Raw);
    }
    AddClampedXImpulseRaw(clampRaw, impulseRaw) {
      const clampValueRaw = Math.abs(clampRaw);
      const currentVelocityRaw = this.x.Raw;
      if (Math.abs(currentVelocityRaw) >= clampValueRaw) {
        return;
      }
      this.x.SetFromRaw(currentVelocityRaw + impulseRaw);
    }
    AddClampedYImpulse(clamp, impulse) {
      this.AddClampedYImpulseRaw(clamp.Raw, impulse.Raw);
    }
    AddClampedYImpulseRaw(clampRaw, impulse) {
      const newVelocityRaw = this.y.Raw + impulse;
      const clampValueRaw = Math.abs(clampRaw);
      if (newVelocityRaw > 0) {
        this.y.SetFromRaw(Math.min(newVelocityRaw, clampValueRaw));
      } else {
        this.y.SetFromRaw(newVelocityRaw);
      }
    }
    get X() {
      return this.x;
    }
    get Y() {
      return this.y;
    }
    set X(val) {
      this.x.SetFromFp(val);
    }
    set Y(val) {
      this.y.SetFromFp(val);
    }
    SnapShot() {
      return { X: this.x.AsNumber, Y: this.y.AsNumber };
    }
    SetFromSnapShot(snapShot) {
      this.x.SetFromNumber(snapShot.X);
      this.y.SetFromNumber(snapShot.Y);
    }
  };

  // game/engine/entity/components/weight.ts
  var WeightComponent = class {
    constructor(weight) {
      this.Value = new FixedPoint();
      this.Value.SetFromNumber(weight);
    }
  };

  // game/engine/entity/components/grab.ts
  var GrabBubble = class {
    constructor(gbc) {
      this.activeFrames = /* @__PURE__ */ new Set();
      this.frameOffsets = /* @__PURE__ */ new Map();
      this.BubbleId = gbc.BubbleId;
      this.Radius = new FixedPoint(gbc.Radius);
      for (const [k, v] of gbc.frameOffsets) {
        this.frameOffsets.set(k, ToFV(v.x, v.y));
        this.activeFrames.add(k);
      }
    }
    GetLocalPositionOffsetForFrame(frameNumber2) {
      return this.frameOffsets.get(frameNumber2);
    }
    IsActive(grabFrameNumber) {
      return this.activeFrames.has(grabFrameNumber);
    }
    GetGlobalPosition(vecPool, playerX, playerY, facinRight, grabFrameNumber) {
      const offset = this.frameOffsets.get(grabFrameNumber);
      if (offset === void 0) {
        return void 0;
      }
      const xRaw = playerX.Raw;
      const yRaw = playerY.Raw;
      const globalXRaw = facinRight ? xRaw + offset.X.Raw : xRaw - offset.X.Raw;
      const globalYRaw = yRaw + offset.Y.Raw;
      return vecPool.Rent().SetXYRaw(globalXRaw, globalYRaw);
    }
    GetGlobalPositionRaw(vecPool, playerXRaw, playerYRaw, facinRight, grabFrameNumber) {
      const offset = this.frameOffsets.get(grabFrameNumber);
      if (offset === void 0) {
        return void 0;
      }
      const globalXRaw = facinRight ? playerXRaw + offset.X.Raw : playerXRaw - offset.X.Raw;
      const globalYRaw = playerYRaw + offset.Y.Raw;
      return vecPool.Rent().SetXYRaw(globalXRaw, globalYRaw);
    }
  };
  var Grab2 = class {
    constructor(conf) {
      this.Name = conf.Name;
      this.GrabId = conf.GrabId;
      this.TotalFrameLength = conf.TotalFrameLength;
      const gbs = conf.GrabBubbles.map((gbc) => new GrabBubble(gbc));
      this.GrabBubbles = gbs.sort((a, b) => a.BubbleId - b.BubbleId);
      if (conf.Impulses !== void 0) {
        this.ImpulseClamp = new FixedPoint(conf.ImpulseClamp);
        this.Impulses = /* @__PURE__ */ new Map();
        for (const [k, v] of conf.Impulses) {
          this.Impulses.set(k, ToFV(v.x, v.y));
        }
      }
    }
    GetImpulseForFrame(fameNumber) {
      if (this.Impulses === void 0) {
        return void 0;
      }
      return this.Impulses.get(fameNumber);
    }
    GetActiveBubblesForFrame(frame, activeGbs) {
      const gbLength = this.GrabBubbles.length;
      if (gbLength === 0) {
        return activeGbs;
      }
      for (let i = 0; i < gbLength; i++) {
        const gb = this.GrabBubbles[i];
        if (gb.IsActive(frame)) {
          activeGbs.AddBubble(gb);
        }
      }
      return activeGbs;
    }
  };
  var GrabComponent = class {
    constructor(grabConfigs) {
      this.grabs = /* @__PURE__ */ new Map();
      this.currentGrab = void 0;
      for (const [k, v] of grabConfigs) {
        this.grabs.set(k, new Grab2(v));
      }
    }
    GetGrab() {
      return this.currentGrab;
    }
    SetGrab(gameEventId) {
      const grabId = GrabGameEventMappings.get(gameEventId);
      if (grabId === void 0) {
        return;
      }
      const grab = this.grabs.get(grabId);
      if (grab === void 0) {
        return;
      }
      this.currentGrab = grab;
    }
    ZeroCurrentGrab() {
      this.currentGrab = void 0;
    }
    SnapShot() {
      return this.currentGrab;
    }
    SetFromSnapShot(snapShot) {
      this.currentGrab = snapShot;
    }
  };

  // game/engine/entity/components/grabMeter.ts
  var GrabMeterComponent = class {
    constructor() {
      this.Meter = new FixedPoint(0);
      this.BaseDecayRate = NumberToRaw(1);
      // 1 frame per frame
      this.playerId = void 0;
    }
    get HoldingPlayerId() {
      return this.playerId;
    }
    SetHoldingPlayerId(id) {
      this.playerId = id;
    }
    ZeroHoldingPlayerId() {
      this.playerId = void 0;
    }
    SnapShot() {
      return {
        meter: this.Meter.AsNumber,
        holdingPlayerId: this.playerId
      };
    }
    SetFromSnapShot(snapShot) {
      this.Meter.SetFromNumber(snapShot.meter);
      this.playerId = snapShot.holdingPlayerId;
    }
  };

  // game/engine/entity/playerOrchestrator.ts
  var Player2 = class {
    constructor(Id, cc) {
      this.ID = 0;
      const sB = new SpeedsComponentConfigBuilder();
      sB.SetWalkSpeeds(cc.MaxWalkSpeed, cc.WalkSpeedMulitplier);
      sB.SetRunSpeeds(cc.MaxRunSpeed, cc.RunSpeedMultiplier);
      sB.SetFallSpeeds(cc.FastFallSpeed, cc.FallSpeed, cc.Gravity);
      sB.SetAerialSpeeds(
        cc.AerialVelocityDecay,
        cc.AerialSpeedInpulseLimit,
        cc.AerialSpeedMultiplier
      );
      sB.SetDashSpeeds(cc.DashMutiplier, cc.MaxDashSpeed);
      sB.SetDodgeSpeeds(cc.AirDodgeSpeed, cc.DodgeRollSpeed);
      sB.SetGroundedVelocityDecay(cc.GroundedVelocityDecay);
      this.ID = Id;
      this.Position = new PositionComponent();
      this.Velocity = new VelocityComponent();
      this.Weight = new WeightComponent(cc.Weight);
      this.Speeds = sB.Build();
      this.Flags = new PlayerFlagsComponent();
      this.Damage = new PlayerDamageComponent();
      this.HitStun = new HitStunComponent();
      this.HitStop = new HitStopComponent();
      this.ECB = new ECBComponent(
        cc.ECBShapes,
        cc.ECBHeight,
        cc.ECBWidth,
        cc.ECBOffset
      );
      this.HurtCircles = new HurtCapsulesComponent(cc.HurtCapsules);
      this.Jump = new JumpComponent(cc.JumpVelocity, cc.NumberOfJumps);
      this.FSMInfo = new FSMInfoComponent(cc.FrameLengths);
      this.LedgeDetector = new LedgeDetectorComponent(
        this.Position.X.AsNumber,
        this.Position.Y.AsNumber,
        cc.LedgeBoxWidth,
        cc.LedgeBoxHeight,
        cc.LedgeBoxYOffset
      );
      this.Sensors = new SensorComponent();
      this.Attacks = new AttackComponment(cc.Attacks);
      this.Grabs = new GrabComponent(cc.Grabs);
      this.GrabMeter = new GrabMeterComponent();
      this.Shield = new ShieldComponent(cc.ShieldRadius, cc.ShieldYOffset);
    }
  };
  function CanOnlyFallOffLedgeWhenFacingAwayFromIt(p) {
    const a = p.Attacks.GetAttack();
    if (a === void 0) {
      return false;
    }
    return a.CanOnlyFallOffLedgeIfFacingAwayFromIt;
  }
  function SetPlayerInitialPositionRaw(p, xRaw, yRaw) {
    p.Position.X.SetFromRaw(xRaw);
    p.Position.Y.SetFromRaw(yRaw);
    p.ECB.MoveToPositionRaw(xRaw, yRaw);
    p.LedgeDetector.MoveToRaw(xRaw, yRaw);
  }
  function AddToPlayerYPositionRaw(p, yRaw) {
    const position = p.Position;
    position.Y.AddRaw(yRaw);
    p.ECB.MoveToPosition(position.X, position.Y);
    p.LedgeDetector.MoveTo(position.X, position.Y);
  }
  function AddToPlayerXPostionRaw(p, xRaw) {
    const position = p.Position;
    position.X.AddRaw(xRaw);
    p.ECB.MoveToPosition(position.X, position.Y);
    p.LedgeDetector.MoveTo(position.X, position.Y);
  }
  function SetPlayerPosition(p, x, y) {
    const position = p.Position;
    position.X.SetFromFp(x);
    position.Y.SetFromFp(y);
    p.ECB.MoveToPosition(x, y);
    p.LedgeDetector.MoveTo(x, y);
  }
  function SetPlayerPositionRaw(p, xRaw, yRaw) {
    const position = p.Position;
    position.X.SetFromRaw(xRaw);
    position.Y.SetFromRaw(yRaw);
    p.ECB.MoveToPositionRaw(xRaw, yRaw);
    p.LedgeDetector.MoveToRaw(xRaw, yRaw);
  }
  function AddToPlayerPositionFp(p, x, y) {
    AddToPlayerPositionRaw(p, x.Raw, y.Raw);
  }
  function AddToPlayerPositionVec(p, v) {
    AddToPlayerPositionRaw(p, v.X.Raw, v.Y.Raw);
  }
  function AddToPlayerPositionRaw(p, xRaw, yRaw) {
    const pos = p.Position;
    pos.X.AddRaw(xRaw);
    pos.Y.AddRaw(yRaw);
    p.ECB.MoveToPosition(pos.X, pos.Y);
    p.LedgeDetector.MoveTo(pos.X, pos.Y);
  }
  function PlayerOnStage(s, ecbBottom, ecbSensorDepth) {
    const grnd = s.StageVerticies.GetGround();
    const grndLoopLength = grnd.length;
    for (let i = 0; i < grndLoopLength; i++) {
      const gP = grnd[i];
      if (LineSegmentIntersectionRaw(
        gP.X1.Raw,
        gP.Y1.Raw,
        gP.X2.Raw,
        gP.Y2.Raw,
        ecbBottom.X.Raw,
        ecbBottom.Y.Raw,
        ecbBottom.X.Raw,
        ecbBottom.Y.Raw - ecbSensorDepth.Raw
      )) {
        return true;
      }
    }
    return false;
  }
  function PlayerOnPlats(s, ecbBottom, ecbSensorDepth) {
    const plats = s.Platforms;
    if (plats === void 0) {
      return false;
    }
    const platLength = plats.length;
    for (let i = 0; i < platLength; i++) {
      const plat = plats[i];
      if (LineSegmentIntersectionRaw(
        ecbBottom.X.Raw,
        ecbBottom.Y.Raw,
        ecbBottom.X.Raw,
        ecbBottom.Y.Raw - ecbSensorDepth.Raw,
        plat.X1.Raw,
        plat.Y1.Raw,
        plat.X2.Raw,
        plat.Y2.Raw
      )) {
        return true;
      }
    }
    return false;
  }
  function PlayerOnPlatsReturnsYCoord(s, ecbBottom, ecbSensorDepth) {
    const plats = s.Platforms;
    if (plats === void 0) {
      return void 0;
    }
    const platLength = plats.length;
    for (let i = 0; i < platLength; i++) {
      const plat = plats[i];
      if (LineSegmentIntersectionRaw(
        ecbBottom.X.Raw,
        ecbBottom.Y.Raw,
        ecbBottom.X.Raw,
        ecbBottom.Y.Raw - ecbSensorDepth.Raw,
        plat.X1.Raw,
        plat.Y1.Raw,
        plat.X2.Raw,
        plat.Y2.Raw
      )) {
        return plat.Y1;
      }
    }
    return void 0;
  }
  function PlayerOnPlatsReturnsPlatform(s, ecbBottom, ecbSensorDepth) {
    const plats = s.Platforms;
    if (plats === void 0) {
      return void 0;
    }
    const platLength = plats.length;
    for (let i = 0; i < platLength; i++) {
      const plat = plats[i];
      if (LineSegmentIntersectionRaw(
        ecbBottom.X.Raw,
        ecbBottom.Y.Raw,
        ecbBottom.X.Raw,
        ecbBottom.Y.Raw - ecbSensorDepth.Raw,
        plat.X1.Raw,
        plat.Y1.Raw,
        plat.X2.Raw,
        plat.Y2.Raw
      )) {
        return plat;
      }
    }
    return void 0;
  }
  function PlayerOnStageOrPlats(s, p) {
    const ecbBottom = p.ECB.Bottom;
    const ecbSensorDepth = p.ECB.SensorDepth;
    if (!p.Flags.IsPlatDetectDisabled && PlayerOnPlats(s, ecbBottom, ecbSensorDepth)) {
      return true;
    }
    return PlayerOnStage(s, ecbBottom, ecbSensorDepth);
  }

  // game/engine/stage/stageMain.ts
  function defaultStage() {
    const sv = new StageVerticies();
    const groundPecies = sv.GetGround();
    const grndStart = groundPecies[0];
    const grndEnd = groundPecies[groundPecies.length - 1];
    const topLeftX = grndStart.X1;
    const topLeftY = grndStart.Y1;
    const topRightX = grndEnd.X2;
    const topRighty = grndEnd.Y2;
    const leftLedgePoint = new FlatVec(topLeftX, topLeftY);
    const rightLedgePoint = new FlatVec(topRightX, topRighty);
    const sl = new Ledges(leftLedgePoint, rightLedgePoint);
    const db = new DeathBoundry(-100, 1180, -100, 2020);
    const plats = new Array();
    plats.push(
      Line.FromNumbers(950, 300, 1150, 300),
      Line.FromNumbers(700, 475, 900, 475),
      Line.FromNumbers(1200, 475, 1400, 475)
    );
    return new Stage(sv, sl, db, plats);
  }
  var Stage = class {
    constructor(sv, sl, db, pl) {
      this.StageVerticies = sv;
      this.Ledges = sl;
      this.DeathBoundry = db;
      this.Platforms = pl;
    }
  };
  var StageVerticies = class {
    constructor() {
      this.Verts = new Array();
      const groundPeices = [Line.FromNumbers(500, 650, 1600, 650)];
      const leftFacingWalls = [Line.FromNumbers(500, 650, 500, 700)];
      const rightFacingWalls = [
        Line.FromNumbers(1600, 650, 1600, 700)
      ];
      const ceilingPeices = [Line.FromNumbers(500, 700, 1600, 700)];
      this.Ground = groundPeices;
      this.leftWall = leftFacingWalls;
      this.RightWall = rightFacingWalls;
      this.Ceiling = ceilingPeices;
      const pushFunc = (l) => {
        const start2 = new FlatVec(l.X1, l.Y1);
        const end = new FlatVec(l.X2, l.Y2);
        if (VertArrayContainsFlatVec(this.Verts, start2) === false) {
          this.Verts.push(start2);
        }
        if (VertArrayContainsFlatVec(this.Verts, end) === false) {
          this.Verts.push(end);
        }
      };
      this.Ground.forEach(pushFunc);
      this.RightWall.forEach(pushFunc);
      this.Ceiling.forEach(pushFunc);
      this.leftWall.forEach(pushFunc);
    }
    GetVerts() {
      return this.Verts;
    }
    GetGround() {
      return this.Ground;
    }
    GetLeftWall() {
      return this.leftWall;
    }
    GetRightWall() {
      return this.RightWall;
    }
    GetCeiling() {
      return this.Ceiling;
    }
  };
  var Ledges = class {
    constructor(topLeft, topRight, widthRaw = NumberToRaw(50), heightRaw = NumberToRaw(20)) {
      const leftLedge = [];
      const rightLedge = [];
      leftLedge.push(topLeft);
      leftLedge.push(FlatVec.FromRaw(topLeft.X.Raw + widthRaw, topLeft.Y.Raw));
      leftLedge.push(
        FlatVec.FromRaw(topLeft.X.Raw + widthRaw, topLeft.Y.Raw + heightRaw)
      );
      leftLedge.push(FlatVec.FromRaw(topLeft.X.Raw, topLeft.Y.Raw + heightRaw));
      rightLedge.push(topRight);
      rightLedge.push(
        FlatVec.FromRaw(topRight.X.Raw, topRight.Y.Raw + heightRaw)
      );
      rightLedge.push(
        FlatVec.FromRaw(topRight.X.Raw - widthRaw, topRight.Y.Raw + heightRaw)
      );
      rightLedge.push(FlatVec.FromRaw(topRight.X.Raw - widthRaw, topRight.Y.Raw));
      this.leftLedge = leftLedge;
      this.rightLedge = rightLedge;
    }
    GetLeftLedge() {
      return this.leftLedge;
    }
    GetRightLedge() {
      return this.rightLedge;
    }
  };
  var DeathBoundry = class {
    constructor(t, b, l, r) {
      this.topBoundry = new FixedPoint(t);
      this.bottomBoundry = new FixedPoint(b);
      this.leftBoundry = new FixedPoint(l);
      this.rightBoundry = new FixedPoint(r);
    }
  };

  // game/engine/systems/attack.ts
  var POINT_ZERO_ONE_THREE = NumberToRaw(0.013);
  var POINT_FOUR = NumberToRaw(0.4);
  var POINT_SEVEN_FIVE = NumberToRaw(0.75);
  var ONE_POINT_FOUR = NumberToRaw(1.4);
  var TWO4 = NumberToRaw(2);
  var THREE = NumberToRaw(3);
  var TEN = NumberToRaw(10);
  var TWENTY = NumberToRaw(20);
  var ONE_HUNDRED = NumberToRaw(100);
  var HALF_CIRCLE = NumberToRaw(180);
  var TWO_HUNDRED = NumberToRaw(200);
  var FULL_CIRCLE = NumberToRaw(360);
  var LUT_SIZE2 = NumberToRaw(LUT_SIZE);
  function PlayerAttacks(world) {
    const playerData = world.PlayerData;
    const pools = world.Pools;
    const historyData = world.HistoryData;
    const currentFrame = world.LocalFrame;
    const playerCount = playerData.PlayerCount;
    if (playerCount === 1) {
      return;
    }
    for (let outerPIdx = 0; outerPIdx < playerCount - 1; outerPIdx++) {
      const p1 = playerData.Player(outerPIdx);
      const p1InputStore = playerData.InputStore(p1.ID);
      for (let innerPIdx = outerPIdx + 1; innerPIdx < playerCount; innerPIdx++) {
        const p2 = playerData.Player(innerPIdx);
        const p2InputStore = playerData.InputStore(p2.ID);
        const p1HitsP2Result = PAvsPB(
          currentFrame,
          pools.ActiveHitBubbleDtoPool,
          pools.AtkResPool,
          pools.VecPool,
          pools.ColResPool,
          pools.ClstsPntsResPool,
          historyData.PlayerComponentHistories,
          p1InputStore,
          p1,
          p2
        );
        const p2HitsP1Result = PAvsPB(
          currentFrame,
          pools.ActiveHitBubbleDtoPool,
          pools.AtkResPool,
          pools.VecPool,
          pools.ColResPool,
          pools.ClstsPntsResPool,
          historyData.PlayerComponentHistories,
          p2InputStore,
          p2,
          p1
        );
        if (p1HitsP2Result.Hit && p2HitsP1Result.Hit) {
          const clang = Math.abs(p1HitsP2Result.Damage.Raw - p2HitsP1Result.Damage.Raw) < THREE;
        }
        if (p1HitsP2Result.Hit) {
          resolveHitResult(p1, p2, playerData, p1HitsP2Result, pools.VecPool);
        }
        if (p1HitsP2Result.ShieldHit) {
          resolveShieldHitResult(p1, p2, p1HitsP2Result);
        }
        if (p2HitsP1Result.Hit) {
          resolveHitResult(p2, p1, playerData, p2HitsP1Result, pools.VecPool);
        }
        if (p2HitsP1Result.ShieldHit) {
          resolveShieldHitResult(p2, p1, p2HitsP1Result);
        }
      }
    }
  }
  function resolveHitResult(pA, pB, playerData, pAHitsPbResult, vecPool) {
    const atkDamage = pAHitsPbResult.Damage;
    pB.Damage.AddDamage(atkDamage);
    const playerDamage = pB.Damage.Damage;
    const weight = pB.Weight.Value;
    const scailing = pAHitsPbResult.KnockBackScaling;
    const baseKnockBack = pAHitsPbResult.BaseKnockBack;
    const kbRaw = CalculateKnockback(
      playerDamage,
      atkDamage,
      weight,
      scailing,
      baseKnockBack
    );
    const hitStopRaw = CalculateHitStop(atkDamage);
    const hitStunFrames = CalculateHitStun(kbRaw);
    const launchVec = CalculateLaunchVector(
      vecPool,
      pAHitsPbResult.LaunchAngle,
      pA.Flags.IsFacingRight,
      kbRaw
    );
    pA.Flags.SetHitPauseFrames(
      Math.floor(RawToNumber(MultiplyRaw(hitStopRaw, POINT_SEVEN_FIVE)))
    );
    if (pA.Position.X > pB.Position.X) {
      pB.Flags.FaceRight();
    } else {
      pB.Flags.FaceLeft();
    }
    pB.HitStop.SetHitStop(Math.floor(RawToNumber(hitStopRaw)));
    pB.HitStun.SetHitStun(hitStunFrames, launchVec.X, launchVec.Y);
    const pBSm = playerData.StateMachine(pB.ID);
    pBSm.UpdateFromWorld(GAME_EVENT_IDS.HIT_STOP_GE);
  }
  function resolveShieldHitResult(pA, pB, pAHitsPbResult) {
    const atkDamage = pAHitsPbResult.Damage;
    const hitStopRaw = CalculateHitStop(atkDamage);
    pA.Flags.SetHitPauseFrames(
      Math.floor(RawToNumber(MultiplyRaw(hitStopRaw, POINT_SEVEN_FIVE)))
    );
    pB.Flags.SetHitPauseFrames(
      Math.floor(RawToNumber(MultiplyRaw(hitStopRaw, POINT_SEVEN_FIVE)))
    );
    pB.Shield.Damage(atkDamage);
  }
  function PAvsPB(currentFrame, activeHbPool, atkResPool, vecPool, colResPool, clstsPntsResPool, componentHistories, pAInputStore, pA, pB) {
    const pAstateFrame = pA.FSMInfo.CurrentStateFrame;
    const pAAttack = pA.Attacks.GetAttack();
    if (pAAttack === void 0 || pB.Flags.IsIntangible || pA.Attacks.HasHitPlayer(pB.ID)) {
      return atkResPool.Rent();
    }
    const pAHitBubbles = pAAttack.GetActiveBubblesForFrame(
      pAstateFrame,
      activeHbPool.Rent()
    );
    if (pAHitBubbles.Length === 0) {
      return atkResPool.Rent();
    }
    const hitLength = pAHitBubbles.Length;
    const pAPCompHist = componentHistories[pA.ID];
    const previousWorldFrame = currentFrame > 0 ? currentFrame - 1 : 0;
    const prevPosRes = pAPCompHist.PositionHistory[previousWorldFrame];
    let prevXRaw = 0;
    let prevYRaw = 0;
    if (prevPosRes !== void 0) {
      prevXRaw = NumberToRaw(prevPosRes.X);
      prevYRaw = NumberToRaw(prevPosRes.Y);
    } else {
      prevXRaw = pA.Position.X.Raw;
      prevYRaw = pA.Position.Y.Raw;
    }
    const xRaw = prevXRaw;
    const yRaw = prevYRaw;
    const pAPrevPositionDto = vecPool.Rent().SetXYRaw(xRaw, yRaw);
    const pACurPositionDto = vecPool.Rent().SetXY(pA.Position.X, pA.Position.Y);
    const currentStateFrame = pAstateFrame;
    const previousStateFrame = currentStateFrame > 0 ? currentStateFrame - 1 : 0;
    const pAFacingRight = pA.Flags.IsFacingRight;
    const pAIa = pAInputStore.GetInputForFrame(currentFrame);
    const paTriggerValue = pAIa.RTValRaw > pAIa.LTValRaw ? pAIa.RTValRaw : pAIa.LTValRaw;
    if (pB.Shield.Active) {
      const pBShield = pB.Shield;
      const radiusRaw = pBShield.CalculateCurrentRadiusRaw(paTriggerValue);
      const shieldYOffset = pBShield.YOffsetConstant;
      const tiltXRaw = pBShield.ShieldTiltX.Raw;
      const tiltYRaw = pBShield.ShieldTiltY.Raw + shieldYOffset.Raw;
      const shieldPos = vecPool.Rent().SetXYRaw(pB.Position.X.Raw + tiltXRaw, pB.Position.Y.Raw + tiltYRaw);
      for (let hitIndex = 0; hitIndex < hitLength; hitIndex++) {
        const pAHitBubble = pAHitBubbles.AtIndex(hitIndex);
        const pAhitBubbleCurrentPos = pAHitBubble?.GetGlobalPosition(
          vecPool,
          pACurPositionDto.X,
          pACurPositionDto.Y,
          pAFacingRight,
          currentStateFrame
        );
        if (pAhitBubbleCurrentPos === void 0) {
          continue;
        }
        const pAHitBubblePreviousPos = pAHitBubble?.GetGlobalPosition(
          vecPool,
          pAPrevPositionDto.X,
          pAPrevPositionDto.Y,
          pAFacingRight,
          previousStateFrame
        ) ?? vecPool.Rent().SetXY(pAhitBubbleCurrentPos.X, pAhitBubbleCurrentPos.Y);
        const closestPoints = ClosestPointsBetweenSegments(
          shieldPos,
          shieldPos,
          pAHitBubblePreviousPos,
          pAhitBubbleCurrentPos,
          vecPool,
          clstsPntsResPool
        );
        const collision = IntersectsCirclesRaw(
          colResPool,
          closestPoints.C1X.Raw,
          closestPoints.C1Y.Raw,
          closestPoints.C2X.Raw,
          closestPoints.C2Y.Raw,
          radiusRaw,
          pAHitBubble.Radius.Raw
        );
        if (collision.Collision) {
          pA.Attacks.HitPlayer(pB.ID);
          const attackResult = atkResPool.Rent();
          attackResult.SetShieldHitTrue(
            pB.ID,
            pAHitBubble.Damage,
            pAHitBubble.Priority,
            collision.NormX,
            collision.NormY,
            collision.Depth,
            pAAttack.BaseKnockBack,
            pAAttack.KnockBackScaling,
            pAHitBubble.launchAngle
          );
          return attackResult;
        }
      }
    }
    const pBHurtBubbles = pB.HurtCircles.HurtCapsules;
    const pBPosition = pB.Position;
    const hurtLength = pBHurtBubbles.length;
    const hitBubbles = pAHitBubbles;
    for (let hitIndex = 0; hitIndex < hitLength; hitIndex++) {
      const pAHitBubble = hitBubbles.AtIndex(hitIndex);
      const pAhitBubbleCurrentPos = pAHitBubble?.GetGlobalPosition(
        vecPool,
        pACurPositionDto.X,
        pACurPositionDto.Y,
        pAFacingRight,
        currentStateFrame
      );
      if (pAhitBubbleCurrentPos === void 0) {
        continue;
      }
      const pAHitBubblePreviousPos = pAHitBubble?.GetGlobalPosition(
        vecPool,
        pAPrevPositionDto.X,
        pAPrevPositionDto.Y,
        pAFacingRight,
        previousStateFrame
      ) ?? vecPool.Rent().SetXY(pAhitBubbleCurrentPos.X, pAhitBubbleCurrentPos.Y);
      for (let hurtIndex = 0; hurtIndex < hurtLength; hurtIndex++) {
        const pBHurtBubble = pBHurtBubbles[hurtIndex];
        const pBStartHurtDto = pBHurtBubble.GetStartPosition(
          pBPosition.X,
          pBPosition.Y,
          vecPool
        );
        const pBEndHurtDto = pBHurtBubble.GetEndPosition(
          pBPosition.X,
          pBPosition.Y,
          vecPool
        );
        const pointsToTest = ClosestPointsBetweenSegments(
          pAHitBubblePreviousPos,
          pAhitBubbleCurrentPos,
          pBStartHurtDto,
          pBEndHurtDto,
          vecPool,
          clstsPntsResPool
        );
        const pARadius = pAHitBubble.Radius;
        const pBRadius = pBHurtBubble.Radius;
        const testPoint1 = vecPool.Rent().SetXY(pointsToTest.C1X, pointsToTest.C1Y);
        const testPoint2 = vecPool.Rent().SetXY(pointsToTest.C2X, pointsToTest.C2Y);
        const collision = IntersectsCircles(
          colResPool,
          testPoint1,
          testPoint2,
          pARadius,
          pBRadius
        );
        if (collision.Collision) {
          pA.Attacks.HitPlayer(pB.ID);
          const attackResult = atkResPool.Rent();
          attackResult.SetHitTrue(
            pB.ID,
            pAHitBubble.Damage,
            pAHitBubble.Priority,
            collision.NormX,
            collision.NormY,
            collision.Depth,
            pAAttack.BaseKnockBack,
            pAAttack.KnockBackScaling,
            pAHitBubble.launchAngle
          );
          return attackResult;
        }
      }
    }
    return atkResPool.Rent();
  }
  function CalculateHitStop(damage) {
    return DivideRaw(damage.Raw, THREE) + THREE;
  }
  function CalculateHitStun(knockBackRaw) {
    return Math.ceil(RawToNumber(MultiplyRaw(knockBackRaw, POINT_FOUR)));
  }
  function CalculateLaunchVector(vecPool, launchAngle, isFacingRight, knockBackRaw) {
    let angleRaw = launchAngle.Raw;
    if (!isFacingRight) {
      angleRaw = HALF_CIRCLE - angleRaw;
    }
    angleRaw = angleRaw % FULL_CIRCLE;
    if (angleRaw < 0) {
      angleRaw += FULL_CIRCLE;
    }
    const lutIndexRaw = DivideRaw(MultiplyRaw(angleRaw, LUT_SIZE2), FULL_CIRCLE);
    const lutIndex = Math.floor(RawToNumber(lutIndexRaw));
    const cosValue = COS_LUT[lutIndex];
    const sinValue = SIN_LUT[lutIndex];
    const x = MultiplyRaw(cosValue, knockBackRaw);
    const y = -DivideRaw(MultiplyRaw(sinValue, knockBackRaw), TWO4);
    return vecPool.Rent().SetXYRaw(x, y);
  }
  function CalculateKnockback(p, d, w, s, b) {
    return CalculateKnockbackRaw(p.Raw, d.Raw, w.Raw, s.Raw, b.Raw);
  }
  function CalculateKnockbackRaw(pRaw, dRaw, wRaw, sRaw, brAW) {
    const term1 = DivideRaw(pRaw, TEN);
    const p_x_d = MultiplyRaw(pRaw, dRaw);
    const term2 = DivideRaw(p_x_d, TWENTY);
    const term3 = term1 + term2;
    const w_plus_100 = wRaw + ONE_HUNDRED;
    const term4 = DivideRaw(TWO_HUNDRED, w_plus_100);
    const temp_kb = MultiplyRaw(MultiplyRaw(term3, term4), ONE_POINT_FOUR) + brAW;
    return MultiplyRaw(MultiplyRaw(temp_kb, sRaw), POINT_ZERO_ONE_THREE);
  }

  // game/engine/systems/gravity.ts
  function Gravity(world) {
    const playerData = world.PlayerData;
    const stageData = world.StageData;
    const playerCount = playerData.PlayerCount;
    for (let playerIndex = 0; playerIndex < playerCount; playerIndex++) {
      const p = playerData.Player(playerIndex);
      const stage = stageData.Stage;
      if (playerHasGravity(p, stage) === false) {
        continue;
      }
      const speeds = p.Speeds;
      const grav = speeds.GravityRaw;
      const isFF = p.Flags.IsFastFalling;
      const fallSpeed = isFF ? speeds.FastFallSpeedRaw : speeds.FallSpeedRaw;
      const gravMutliplier = NumberToRaw(isFF ? 2 : 1);
      p.Velocity.AddClampedYImpulseRaw(
        fallSpeed,
        MultiplyRaw(grav, gravMutliplier)
      );
    }
  }
  function playerHasGravity(p, stage) {
    switch (p.FSMInfo.CurrentStatetId) {
      case STATE_IDS.AIR_DODGE_S:
      case STATE_IDS.LEDGE_GRAB_S:
      case STATE_IDS.HIT_STOP_S:
        return false;
      default:
        break;
    }
    if (p.Flags.IsInHitPause) {
      return false;
    }
    const attack = p.Attacks.GetAttack();
    if (attack === void 0) {
      return !PlayerOnStageOrPlats(stage, p);
    }
    if (attack.GravityActive === false) {
      return false;
    }
    return !PlayerOnStageOrPlats(stage, p);
  }

  // game/engine/systems/history.ts
  function RecordHistory(w) {
    const playerData = w.PlayerData;
    const historyData = w.HistoryData;
    const frameNumber2 = w.LocalFrame;
    const playerCount = playerData.PlayerCount;
    for (let playerIndex = 0; playerIndex < playerCount; playerIndex++) {
      const p = playerData.Player(playerIndex);
      const history = historyData.PlayerComponentHistories[playerIndex];
      record(p, history, frameNumber2);
    }
    w.SetPoolHistory();
  }
  function record(p, h, fn) {
    h.ShieldHistory[fn] = p.Shield.SnapShot();
    h.PositionHistory[fn] = p.Position.SnapShot();
    h.FsmInfoHistory[fn] = p.FSMInfo.SnapShot();
    h.DamageHistory[fn] = p.Damage.SnapShot();
    h.VelocityHistory[fn] = p.Velocity.SnapShot();
    h.FlagsHistory[fn] = p.Flags.SnapShot();
    h.PlayerHitStopHistory[fn] = p.HitStop.SnapShot();
    h.PlayerHitStunHistory[fn] = p.HitStun.SnapShot();
    h.LedgeDetectorHistory[fn] = p.LedgeDetector.SnapShot();
    h.SensorsHistory[fn] = p.Sensors.SnapShot();
    h.EcbHistory[fn] = p.ECB.SnapShot();
    h.JumpHistroy[fn] = p.Jump.SnapShot();
    h.AttackHistory[fn] = p.Attacks.SnapShot();
    h.GrabHistory[fn] = p.Grabs.SnapShot();
    h.GrabMeterHistory[fn] = p.GrabMeter.SnapShot();
  }
  function InitPlayerHistory(p, w) {
    const pId = p.ID;
    const curFrame = w.LocalFrame;
    const hist = w.HistoryData.PlayerComponentHistories[pId];
    for (let i = 0; i <= curFrame; i++) {
      record(p, hist, i);
    }
  }

  // game/engine/systems/ledgeGrabDetection.ts
  var TWO5 = NumberToRaw(2);
  var combinedVerts = new Array();
  function LedgeGrabDetection(world) {
    const playerData = world.PlayerData;
    const stageData = world.StageData;
    const pools = world.Pools;
    const stage = stageData.Stage;
    const ledges = stage.Ledges;
    const leftLedge = ledges.GetLeftLedge();
    const rightLedge = ledges.GetRightLedge();
    const playerCount = playerData.PlayerCount;
    const playerHist = world.HistoryData.PlayerComponentHistories;
    for (let playerIndex = 0; playerIndex < playerCount; playerIndex++) {
      combinedVerts.length = 0;
      const p = playerData.Player(playerIndex);
      if (p.Flags.IsInHitPause) {
        continue;
      }
      const ledgeDetector = p.LedgeDetector;
      if (ledgeDetector.CanGrabLedge === false) {
        continue;
      }
      const sm = playerData.StateMachine(playerIndex);
      const flags = p.Flags;
      const ecb = p.ECB;
      if (p.Velocity.Y.Raw < 0 || p.FSMInfo.CurrentStatetId === STATE_IDS.JUMP_S) {
        continue;
      }
      if (PlayerOnStageOrPlats(stage, p)) {
        continue;
      }
      const isFacingRight = flags.IsFacingRight;
      const curFront = isFacingRight === true ? ledgeDetector.RightSide : ledgeDetector.LeftSide;
      const lastLd = playerHist[playerIndex].LedgeDetectorHistory[world.PreviousFrame];
      let lastFront;
      const lastMiddleXRaw = NumberToRaw(lastLd.middleX);
      const lastMiddleYRaw = NumberToRaw(lastLd.middleY);
      const widthRaw = ledgeDetector.Width.Raw;
      const heightRaw = ledgeDetector.Height.Raw;
      const lastWidthRightRaw = lastMiddleXRaw + widthRaw;
      const lastWidthLeftRaw = lastMiddleXRaw - widthRaw;
      const lastBottomHeightRaw = lastMiddleYRaw + heightRaw;
      for (let i = 0; i < curFront.length; i++) {
        combinedVerts.push(curFront[i]);
      }
      if (isFacingRight) {
        const bottomLeftX = lastMiddleXRaw;
        const bottomLeftY = lastBottomHeightRaw;
        const topLeftX = bottomLeftX;
        const topLeftY = lastMiddleYRaw;
        const topRightX = lastWidthRightRaw;
        const topRightY = lastMiddleYRaw;
        const bottomRightX = lastWidthLeftRaw;
        const bottomRightY = lastBottomHeightRaw;
        combinedVerts.push(
          pools.VecPool.Rent().SetXYRaw(bottomLeftX, bottomLeftY)
        );
        combinedVerts.push(pools.VecPool.Rent().SetXYRaw(topLeftX, topLeftY));
        combinedVerts.push(pools.VecPool.Rent().SetXYRaw(topRightX, topRightY));
        combinedVerts.push(
          pools.VecPool.Rent().SetXYRaw(bottomRightX, bottomRightY)
        );
        lastFront = CreateConvexHull(combinedVerts);
      } else {
        const bottomLeftX = lastMiddleXRaw - widthRaw;
        const bottomLeftY = lastBottomHeightRaw;
        const topLeftX = bottomLeftX;
        const topLeftY = lastMiddleYRaw;
        const topRightX = lastMiddleXRaw;
        const topRightY = lastMiddleYRaw;
        const bottomRightX = topRightX;
        const bottomRightY = bottomLeftY;
        combinedVerts.push(
          pools.VecPool.Rent().SetXYRaw(bottomLeftX, bottomLeftY)
        );
        combinedVerts.push(pools.VecPool.Rent().SetXYRaw(topLeftX, topLeftY));
        combinedVerts.push(pools.VecPool.Rent().SetXYRaw(topRightX, topRightY));
        combinedVerts.push(
          pools.VecPool.Rent().SetXYRaw(bottomRightX, bottomRightY)
        );
      }
      const hull = CreateConvexHull(combinedVerts);
      if (isFacingRight) {
        const intersectsLeftLedge = IntersectsPolygons(
          leftLedge,
          hull,
          pools.VecPool,
          pools.ColResPool,
          pools.ProjResPool
        );
        if (intersectsLeftLedge.Collision) {
          sm.UpdateFromWorld(GAME_EVENT_IDS.LEDGE_GRAB_GE);
          SetPlayerPositionRaw(
            p,
            leftLedge[0].X.Raw - DivideRaw(ecb.Width.Raw, TWO5),
            p.Position.Y.Raw
          );
        }
        continue;
      }
      const intersectsRightLedge = IntersectsPolygons(
        rightLedge,
        hull,
        pools.VecPool,
        pools.ColResPool,
        pools.ProjResPool
      );
      if (intersectsRightLedge.Collision) {
        sm.UpdateFromWorld(GAME_EVENT_IDS.LEDGE_GRAB_GE);
        SetPlayerPositionRaw(
          p,
          rightLedge[0].X.Raw + DivideRaw(ecb.Width.Raw, TWO5),
          p.Position.Y.Raw
        );
      }
    }
  }

  // game/engine/systems/outOfBounds.ts
  function OutOfBoundsCheck(world) {
    const playerData = world.PlayerData;
    const stageData = world.StageData;
    const playerCount = playerData.PlayerCount;
    const stage = stageData.Stage;
    for (let playerIndex = 0; playerIndex < playerCount; playerIndex++) {
      const p = playerData.Player(playerIndex);
      const sm = playerData.StateMachine(playerIndex);
      const pPos = p.Position;
      const pY = pPos.Y;
      const pX = pPos.X;
      const deathBoundry = stage.DeathBoundry;
      if (pY.Raw < deathBoundry.topBoundry.Raw) {
        KillPlayer(p, sm);
        return;
      }
      if (pY.Raw > deathBoundry.bottomBoundry.Raw) {
        KillPlayer(p, sm);
        return;
      }
      if (pX.Raw < deathBoundry.leftBoundry.Raw) {
        KillPlayer(p, sm);
        return;
      }
      if (pX.Raw > deathBoundry.rightBoundry.Raw) {
        KillPlayer(p, sm);
        return;
      }
    }
  }
  function KillPlayer(p, sm) {
    SetPlayerInitialPositionRaw(p, NumberToRaw(610), NumberToRaw(300));
    p.Jump.ResetJumps();
    p.Jump.IncrementJumps();
    p.Velocity.X.Zero();
    p.Velocity.Y.Zero();
    p.Damage.ResetDamagePoints();
    p.Flags.FastFallOff();
    p.Flags.ZeroIntangabilityFrames();
    p.Flags.ZeroHitPauseFrames();
    p.Shield.Reset();
    sm.ForceState(STATE_IDS.N_FALL_S);
  }

  // game/engine/systems/shared.ts
  var CORRECTION_DEPTH_RAW = NumberToRaw(0.1);
  var HARD_LAND_VELOCITY_RAW = NumberToRaw(5);
  function ShouldSoftlandRaw(yVelocityRaw) {
    return yVelocityRaw < HARD_LAND_VELOCITY_RAW;
  }

  // game/engine/systems/platformCollision.ts
  var NEG_ZERO_POINT_EIGHT = NumberToRaw(-0.8);
  var NEG_ZERO_POINT_FIVE = NumberToRaw(-0.5);
  var POINT_FOUR2 = NumberToRaw(0.4);
  function PlatformDetection(world) {
    const playerData = world.PlayerData;
    const stageData = world.StageData;
    const histories = world.HistoryData;
    const currentFrame = world.LocalFrame;
    const prevFrame = world.PreviousFrame;
    const plats = stageData.Stage.Platforms;
    if (plats === void 0) {
      return;
    }
    const playerCount = playerData.PlayerCount;
    const platCount = plats.length;
    for (let playerIndex = 0; playerIndex < playerCount; playerIndex++) {
      const p = playerData.Player(playerIndex);
      const flags = p.Flags;
      if (flags.IsPlatDetectDisabled) {
        continue;
      }
      const velocity = p.Velocity;
      if (velocity.Y.Raw < 0) {
        continue;
      }
      if (p.FSMInfo.CurrentStatetId === STATE_IDS.JUMP_S) {
        continue;
      }
      const dPool = world.Pools.DiamondPool;
      const compHist = histories.PlayerComponentHistories[playerIndex];
      const ecb = p.ECB;
      const prevEcbSnapShot = compHist.EcbHistory[prevFrame];
      const preEcb = CreateDiamondFromHistory(prevEcbSnapShot, dPool);
      const playerPlat = PlayerOnPlatsReturnsPlatform(
        stageData.Stage,
        preEcb.Bottom,
        ecb.SensorDepth
      );
      const wasOnPlat = playerPlat !== void 0;
      const isOnPlat = PlayerOnPlats(
        stageData.Stage,
        ecb.Bottom,
        ecb.SensorDepth
      );
      if (wasOnPlat && !isOnPlat) {
        if (CanOnlyFallOffLedgeWhenFacingAwayFromIt(p)) {
          const isFacingRight = p.Flags.IsFacingRight;
          const isMovingRight = p.Velocity.X.Raw > 0;
          const canFall = isFacingRight === isMovingRight;
          const rightOfTheRight = p.Position.X.Raw > playerPlat.X2.Raw;
          if (!canFall) {
            if (rightOfTheRight) {
              SetPlayerPosition(p, playerPlat.X2, playerPlat.Y2);
              p.Position.X.SubtractRaw(POINT_FOUR2);
              playerData.StateMachine(playerIndex).UpdateFromWorld(GAME_EVENT_IDS.LAND_GE);
              continue;
            }
            SetPlayerPosition(p, playerPlat.X1, playerPlat.Y1);
            p.Position.X.AddRaw(POINT_FOUR2);
            playerData.StateMachine(playerIndex).UpdateFromWorld(GAME_EVENT_IDS.LAND_GE);
            continue;
          }
        } else {
          const canWalkOff = CanStateWalkOffLedge(p.FSMInfo.CurrentStatetId);
          if (canWalkOff) {
            continue;
          }
          const rightOfTheRight = p.Position.X.Raw > playerPlat.X2.Raw;
          if (rightOfTheRight) {
            SetPlayerPosition(p, playerPlat.X2, playerPlat.Y2);
            p.Position.X.SubtractRaw(POINT_FOUR2);
            playerData.StateMachine(playerIndex).UpdateFromWorld(GAME_EVENT_IDS.LAND_GE);
            continue;
          }
          SetPlayerPosition(p, playerPlat.X1, playerPlat.Y1);
          p.Position.X.AddRaw(POINT_FOUR2);
          playerData.StateMachine(playerIndex).UpdateFromWorld(GAME_EVENT_IDS.LAND_GE);
          continue;
        }
      }
      const landingYCoord = PlayerOnPlatsReturnsYCoord(
        stageData.Stage,
        ecb.Bottom,
        ecb.SensorDepth
      );
      const inputStore = playerData.InputStore(playerIndex);
      const ia = inputStore.GetInputForFrame(currentFrame);
      const prevIa = inputStore.GetInputForFrame(currentFrame - 1);
      if (landingYCoord != void 0) {
        const sm = playerData.StateMachine(playerIndex);
        const checkValueRaw = -(prevIa.LYAxis.Raw - ia.LYAxis.Raw);
        const inLanding = p.FSMInfo.CurrentStatetId === STATE_IDS.LAND_S || p.FSMInfo.CurrentStatetId === STATE_IDS.SOFT_LAND_S;
        const isSpotDodge = p.FSMInfo.CurrentStatetId === STATE_IDS.SPOT_DODGE_S;
        if (checkValueRaw <= NEG_ZERO_POINT_FIVE && !inLanding && !isSpotDodge) {
          sm.UpdateFromWorld(GAME_EVENT_IDS.FALL_GE);
          flags.FastFallOff();
          flags.SetDisablePlatFrames(11);
          continue;
        }
        handlePlatformLanding(p, sm, landingYCoord, ecb.Bottom.X);
        continue;
      }
      const fsmInfo = p.FSMInfo;
      if (ia.LYAxis.Raw < NEG_ZERO_POINT_EIGHT && fsmInfo.CurrentStatetId !== STATE_IDS.AIR_DODGE_S) {
        continue;
      }
      const previousBottom = preEcb.Bottom;
      const currentBottom = ecb.Bottom;
      for (let platIndex = 0; platIndex < platCount; platIndex++) {
        const plat = plats[platIndex];
        const intersected = LineSegmentIntersectionFp(
          previousBottom.X,
          previousBottom.Y,
          currentBottom.X,
          currentBottom.Y,
          plat.X1,
          plat.Y1,
          plat.X2,
          plat.Y2
        );
        if (intersected === false) {
          continue;
        }
        const playerIsTooFarRight = currentBottom.X.Raw > plat.X2.Raw;
        const playerIsTooFarLeft = currentBottom.X.Raw < plat.X1.Raw;
        if (playerIsTooFarRight) {
          handlePlatformLanding(
            p,
            playerData.StateMachine(playerIndex),
            plat.Y1,
            plat.X2
          );
          break;
        }
        if (playerIsTooFarLeft) {
          handlePlatformLanding(
            p,
            playerData.StateMachine(playerIndex),
            plat.Y1,
            plat.X1
          );
          break;
        }
        handlePlatformLanding(
          p,
          playerData.StateMachine(playerIndex),
          plat.Y2,
          currentBottom.X
        );
      }
    }
  }
  function handlePlatformLanding(p, sm, yCoord, xCoord) {
    const landId = ShouldSoftlandRaw(p.Velocity.Y.Raw) ? GAME_EVENT_IDS.SOFT_LAND_GE : GAME_EVENT_IDS.LAND_GE;
    sm.UpdateFromWorld(landId);
    const newYOffset = p.ECB.YOffset;
    SetPlayerPositionRaw(
      p,
      xCoord.Raw,
      yCoord.Raw + CORRECTION_DEPTH_RAW - newYOffset.Raw
    );
  }

  // game/engine/systems/playerCollision.ts
  var MOVE_X = NumberToRaw(1.5);
  var TWO6 = NumberToRaw(2);
  function PlayerCollisionDetection(world) {
    const playerData = world.PlayerData;
    const pools = world.Pools;
    const playerCount = playerData.PlayerCount;
    for (let pIOuter = 0; pIOuter < playerCount; pIOuter++) {
      const checkPlayer = playerData.Player(pIOuter);
      const checkPlayerStateId = checkPlayer.FSMInfo.CurrentState.StateId;
      if (checkPlayerStateId === STATE_IDS.LEDGE_GRAB_S || checkPlayer.Flags.IsInHitPause) {
        continue;
      }
      const checkPlayerEcb = checkPlayer.ECB.GetActiveVerts();
      for (let pIInner = pIOuter + 1; pIInner < playerCount; pIInner++) {
        const otherPlayer = playerData.Player(pIInner);
        const otherPlayerStateId = otherPlayer.FSMInfo.CurrentState.StateId;
        if (otherPlayerStateId === STATE_IDS.LEDGE_GRAB_S || otherPlayer.Flags.IsInHitPause) {
          continue;
        }
        const otherPlayerEcb = otherPlayer.ECB.GetActiveVerts();
        const collision = IntersectsPolygons(
          checkPlayerEcb,
          otherPlayerEcb,
          pools.VecPool,
          pools.ColResPool,
          pools.ProjResPool
        );
        if (collision.Collision) {
          const checkPlayerPos = checkPlayer.Position;
          const otherPlayerPos = otherPlayer.Position;
          const checkPlayerXRaw = checkPlayerPos.X.Raw;
          const checkPlayerYRaw = checkPlayerPos.Y.Raw;
          const otherPlayerXRaw = otherPlayerPos.X.Raw;
          const otherPlayerYRaw = otherPlayerPos.Y.Raw;
          if (checkPlayerXRaw >= otherPlayerXRaw) {
            SetPlayerPositionRaw(
              checkPlayer,
              checkPlayerXRaw + DivideRaw(MOVE_X, TWO6),
              checkPlayerYRaw
            );
            SetPlayerPositionRaw(
              otherPlayer,
              otherPlayerXRaw - DivideRaw(MOVE_X, TWO6),
              otherPlayerYRaw
            );
            continue;
          }
          SetPlayerPositionRaw(
            checkPlayer,
            checkPlayerXRaw - DivideRaw(MOVE_X, TWO6),
            checkPlayerYRaw
          );
          SetPlayerPositionRaw(
            otherPlayer,
            otherPlayerXRaw + DivideRaw(MOVE_X, TWO6),
            otherPlayerYRaw
          );
        }
      }
    }
  }

  // game/engine/systems/playerInput.ts
  function PlayerInput(world) {
    const playerData = world.PlayerData;
    const playerCount = playerData.PlayerCount;
    for (let playerIndex = 0; playerIndex < playerCount; playerIndex++) {
      const p = playerData.Player(playerIndex);
      if (p.Flags.IsInHitPause) {
        continue;
      }
      const input = world.PlayerData.InputStore(playerIndex).GetInputForFrame(
        world.LocalFrame
      );
      playerData.StateMachine(playerIndex).UpdateFromInput(input, world);
    }
  }

  // game/engine/systems/sensors.ts
  function PlayerSensors(world) {
    const playerData = world.PlayerData;
    const playerCount = playerData.PlayerCount;
    const pools = world.Pools;
    for (let outerIdx = 0; outerIdx < playerCount - 1; outerIdx++) {
      const pA = playerData.Player(outerIdx);
      for (let innerIdx = outerIdx + 1; innerIdx < playerCount; innerIdx++) {
        const pB = playerData.Player(innerIdx);
        const pAVspB = sesnsorDetect(
          pA,
          pB,
          pools.VecPool,
          pools.ColResPool,
          pools.ClstsPntsResPool
        );
        const pBVspA = sesnsorDetect(
          pB,
          pA,
          pools.VecPool,
          pools.ColResPool,
          pools.ClstsPntsResPool
        );
        if (pAVspB) {
          const rc = pA.Sensors.ReactCommand;
          if (rc !== void 0) {
            HandleCommand(world, pA, rc);
          }
        }
        if (pBVspA) {
          const rc = pB.Sensors.ReactCommand;
          if (rc !== void 0) {
            HandleCommand(world, pB, rc);
          }
        }
      }
    }
  }
  function sesnsorDetect(pA, pB, vecPool, colResPool, closestPointsPool) {
    const pASensors = pA.Sensors;
    const pAPos = pA.Position;
    const pBPos = pB.Position;
    const pBHurtCaps = pB.HurtCircles.HurtCapsules;
    const pAFacingRight = pA.Flags.IsFacingRight;
    const pBCapsLenght = pBHurtCaps.length;
    const sesnsorLength = pASensors.NumberActive;
    for (let hurtCapIndex = 0; hurtCapIndex < pBCapsLenght; hurtCapIndex++) {
      const pBHurtCap = pBHurtCaps[hurtCapIndex];
      const hurtCapStart = pBHurtCap.GetStartPosition(pBPos.X, pBPos.Y, vecPool);
      const hurtCapEnd = pBHurtCap.GetEndPosition(pBPos.X, pBPos.Y, vecPool);
      for (let sensorIndex = 0; sensorIndex < sesnsorLength; sensorIndex++) {
        const sensor = pASensors.Sensors[sensorIndex];
        if (sensor.IsActive === false) {
          continue;
        }
        const sensorPostion = sensor.GetGlobalPosition(
          vecPool,
          pAPos.X,
          pAPos.Y,
          pAFacingRight
        );
        const closestPoints = ClosestPointsBetweenSegments(
          sensorPostion,
          sensorPostion,
          hurtCapStart,
          hurtCapEnd,
          vecPool,
          closestPointsPool
        );
        const testPoint1 = vecPool.Rent().SetXY(closestPoints.C1X, closestPoints.C1Y);
        const testPoint2 = vecPool.Rent().SetXY(closestPoints.C2X, closestPoints.C2Y);
        const collisionResult = IntersectsCircles(
          colResPool,
          testPoint1,
          testPoint2,
          sensor.Radius,
          pBHurtCap.Radius
        );
        if (collisionResult.Collision) {
          return true;
        }
      }
    }
    return false;
  }

  // game/engine/systems/shieldRegen.ts
  function ShieldRegen(w) {
    const pd = w.PlayerData;
    const playerCount = pd.PlayerCount;
    for (let i = 0; i < playerCount; i++) {
      const p = pd.Player(i);
      const shield = p.Shield;
      if (!shield.Active) {
        shield.Grow();
        continue;
      }
      if (shield.IsBroken) {
        const sm = pd.StateMachine(i);
        sm.UpdateFromWorld(GAME_EVENT_IDS.SHIELD_BREAK_GE);
      }
    }
  }

  // game/engine/systems/stageCollision.ts
  var CORNER_JITTER_CORRECTION_RAW = NumberToRaw(2);
  function StageCollisionDetection(world) {
    const playerData = world.PlayerData;
    const componentHistories = world.HistoryData.PlayerComponentHistories;
    const stageData = world.StageData;
    const pools = world.Pools;
    const playerCount = playerData.PlayerCount;
    const stage = stageData.Stage;
    const stageGround = stage.StageVerticies.GetGround();
    const leftMostPiece = stageGround[0];
    const rightMostPiece = stageGround[stageGround.length - 1];
    const leftStagePoint = pools.VecPool.Rent().SetXY(
      leftMostPiece.X1,
      leftMostPiece.Y1
    );
    const rightStagePoint = pools.VecPool.Rent().SetXY(
      rightMostPiece.X2,
      rightMostPiece.Y2
    );
    for (let playerIndex = 0; playerIndex < playerCount; playerIndex++) {
      const p = playerData.Player(playerIndex);
      const ecb = p.ECB;
      const prevEcbSnapShot = componentHistories[playerIndex].EcbHistory[world.PreviousFrame];
      const preEcb = CreateDiamondFromHistory(prevEcbSnapShot, pools.DiamondPool);
      const playerOnPlats = PlayerOnPlats(stage, ecb.Bottom, ecb.SensorDepth);
      if (playerOnPlats) {
        continue;
      }
      const sm = playerData.StateMachine(playerIndex);
      const playerVerts = getECBHull(preEcb, ecb);
      const fsmInfo = p.FSMInfo;
      const preResolutionStateId = fsmInfo.CurrentStatetId;
      const preResolutionYOffsetRaw = ecb.YOffset.Raw;
      const stageVerts = stage.StageVerticies.GetVerts();
      const collisionResult = IntersectsPolygons(
        playerVerts,
        stageVerts,
        pools.VecPool,
        pools.ColResPool,
        pools.ProjResPool
      );
      if (collisionResult.Collision) {
        const normalXRaw = collisionResult.NormX.Raw;
        const normalYRaw = collisionResult.NormY.Raw;
        const move = pools.VecPool.Rent().SetXYRaw(normalXRaw, normalYRaw).Negate().Multiply(collisionResult.Depth);
        if (normalXRaw === 0 && normalYRaw > 0) {
          move.AddToYRaw(CORRECTION_DEPTH_RAW);
        } else if (normalXRaw > 0 && normalYRaw === 0) {
          move.AddToXRaw(CORRECTION_DEPTH_RAW);
        } else if (normalXRaw < 0 && normalYRaw === 0) {
          move.AddToXRaw(-CORRECTION_DEPTH_RAW);
        } else if (normalXRaw === 0 && normalYRaw < 0) {
          move.AddToYRaw(-CORRECTION_DEPTH_RAW);
        } else if (Math.abs(normalXRaw) > 0 && normalYRaw > 0) {
          move.AddToXRaw(move.X.Raw <= 0 ? move.Y.Raw : -move.Y.Raw);
        }
        AddToPlayerPositionVec(p, move);
      }
      const onStage = PlayerOnStage(stage, p.ECB.Bottom, p.ECB.SensorDepth);
      const standingOnLeftLedge = Math.abs(p.Position.X.Raw - leftStagePoint.X.Raw) <= CORNER_JITTER_CORRECTION_RAW;
      const standingOnRightLedge = Math.abs(p.Position.X.Raw - rightStagePoint.X.Raw) <= CORNER_JITTER_CORRECTION_RAW;
      if (standingOnLeftLedge && onStage) {
        SetPlayerInitialPositionRaw(
          p,
          leftStagePoint.X.Raw + CORNER_JITTER_CORRECTION_RAW,
          p.Position.Y.Raw
        );
      } else if (standingOnRightLedge && onStage) {
        SetPlayerInitialPositionRaw(
          p,
          rightStagePoint.X.Raw - CORNER_JITTER_CORRECTION_RAW,
          p.Position.Y.Raw
        );
      }
      const grnd = PlayerOnStage(stage, p.ECB.Bottom, p.ECB.SensorDepth);
      const prvGrnd = PlayerOnStage(stage, preEcb.Bottom, p.ECB.SensorDepth);
      if (prvGrnd && !grnd) {
        let shouldSnapBack = false;
        if (CanOnlyFallOffLedgeWhenFacingAwayFromIt(p)) {
          const fellOffLeftLedge = p.Position.X < leftStagePoint.X;
          const fellOffRightLedge = p.Position.X > rightStagePoint.X;
          const isFacingRight = p.Flags.IsFacingRight;
          if (fellOffLeftLedge && isFacingRight || fellOffRightLedge && !isFacingRight) {
            shouldSnapBack = true;
          }
        } else if (CanStateWalkOffLedge(p.FSMInfo.CurrentStatetId) === false) {
          shouldSnapBack = true;
        }
        if (shouldSnapBack) {
          const position = p.Position;
          if (Math.abs(position.X.Raw - leftStagePoint.X.Raw) < Math.abs(position.X.Raw - rightStagePoint.X.Raw)) {
            SetPlayerPositionRaw(
              p,
              leftStagePoint.X.Raw + CORNER_JITTER_CORRECTION_RAW,
              leftStagePoint.Y.Raw
            );
          } else {
            SetPlayerPositionRaw(
              p,
              rightStagePoint.X.Raw - CORNER_JITTER_CORRECTION_RAW,
              rightStagePoint.Y.Raw
            );
          }
          sm.UpdateFromWorld(GAME_EVENT_IDS.LAND_GE);
          continue;
        }
      }
      if (grnd === false && p.FSMInfo.CurrentStatetId != STATE_IDS.LEDGE_GRAB_S) {
        sm.UpdateFromWorld(GAME_EVENT_IDS.FALL_GE);
        continue;
      }
      if (grnd === true && collisionResult.Collision) {
        const ecbBottomYRaw = ecb.Bottom.Y.Raw;
        sm.UpdateFromWorld(
          ShouldSoftlandRaw(p.Velocity.Y.Raw) ? GAME_EVENT_IDS.SOFT_LAND_GE : GAME_EVENT_IDS.LAND_GE
        );
      }
      if (preResolutionStateId !== STATE_IDS.LAND_S && preResolutionStateId !== STATE_IDS.SOFT_LAND_S && (fsmInfo.CurrentStatetId === STATE_IDS.LAND_S || fsmInfo.CurrentStatetId === STATE_IDS.SOFT_LAND_S)) {
        AddToPlayerYPositionRaw(p, preResolutionYOffsetRaw);
      }
    }
  }
  var combinedEcbVerts = new Array();
  function getECBHull(prevEcb, curEcb) {
    combinedEcbVerts.length = 0;
    for (let i = 0; i < 4; i++) {
      combinedEcbVerts.push(prevEcb.shape[i]);
    }
    for (let i = 0; i < 4; i++) {
      combinedEcbVerts.push(curEcb.GetActiveVerts()[i]);
    }
    const hull = CreateConvexHull(combinedEcbVerts);
    return hull;
  }

  // game/engine/systems/timedFlags.ts
  function TimedFlags(world) {
    const playerData = world.PlayerData;
    const playerCount = playerData.PlayerCount;
    for (let playerIndex = 0; playerIndex < playerCount; playerIndex++) {
      const p = playerData.Player(playerIndex);
      const flags = p.Flags;
      if (flags.IsInHitPause) {
        flags.DecrementHitPause();
      }
      if (flags.IsIntangible) {
        flags.DecrementIntangabilityFrames();
      }
      if (flags.IsPlatDetectDisabled) {
        flags.DecrementDisablePlatDetection();
      }
    }
  }

  // game/engine/systems/velocity.ts
  function ApplyVelocity(w) {
    const playerData = w.PlayerData;
    const playerCount = playerData.PlayerCount;
    for (let playerIndex = 0; playerIndex < playerCount; playerIndex++) {
      const p = playerData.Player(playerIndex);
      if (p.Flags.IsInHitPause) {
        continue;
      }
      const playerVelocity = p.Velocity;
      AddToPlayerPositionFp(p, playerVelocity.X, playerVelocity.Y);
    }
  }

  // game/engine/systems/velocityDecay.ts
  var POINT_TWO = NumberToRaw(0.2);
  function ApplyVelocityDecay(world) {
    const playerData = world.PlayerData;
    const stageData = world.StageData;
    const playerCount = playerData.PlayerCount;
    const stage = stageData.Stage;
    for (let playerIndex = 0; playerIndex < playerCount; playerIndex++) {
      const p = playerData.Player(playerIndex);
      const flags = p.Flags;
      if (flags.IsInHitPause || !flags.IsVelocityDecayActive) {
        continue;
      }
      const grounded = PlayerOnStageOrPlats(stage, p);
      const playerVelocity = p.Velocity;
      const pvxRaw = playerVelocity.X.Raw;
      const pvyRaw = playerVelocity.Y.Raw;
      const speeds = p.Speeds;
      const absPvxRaw = Math.abs(pvxRaw);
      if (grounded) {
        const groundedVelocityDecayRaw = speeds.GroundedVelocityDecayRaw;
        if (pvxRaw > 0) {
          playerVelocity.X.SubtractRaw(groundedVelocityDecayRaw);
        } else if (pvxRaw < 0) {
          playerVelocity.X.AddRaw(groundedVelocityDecayRaw);
        }
        if (absPvxRaw < groundedVelocityDecayRaw) {
          playerVelocity.X.Zero();
        }
        if (pvyRaw > 0) {
          playerVelocity.Y.Zero();
        }
        continue;
      }
      const aerialVelocityDecayRaw = speeds.AerialVelocityDecayRaw;
      const fallSpeedRaw = p.Flags.IsFastFalling ? speeds.FastFallSpeedRaw : speeds.FallSpeedRaw;
      if (pvxRaw > 0) {
        playerVelocity.X.SubtractRaw(aerialVelocityDecayRaw);
      } else if (pvxRaw < 0) {
        playerVelocity.X.AddRaw(aerialVelocityDecayRaw);
      }
      if (pvyRaw > fallSpeedRaw) {
        playerVelocity.Y.SubtractRaw(aerialVelocityDecayRaw);
      }
      if (pvyRaw < 0) {
        playerVelocity.Y.AddRaw(aerialVelocityDecayRaw);
      }
      if (absPvxRaw < POINT_TWO) {
        playerVelocity.X.Zero();
      }
    }
  }

  // game/engine/finite-state-machine/PlayerStateMachine.ts
  var StateMachine = class {
    constructor(p, world) {
      this.player = p;
      this.world = world;
      this.player.FSMInfo.SetCurrentState(Idle);
      this.stateMappings = ActionMappings;
      this.states = FSMStates;
    }
    SetInitialState(stateId) {
      this.changeState(this.states.get(stateId), this.player.FSMInfo);
    }
    UpdateFromWorld(gameEventId) {
      const state = this.getTranslation(gameEventId);
      if (state === void 0) {
        return;
      }
      const fsmInfo = this.player.FSMInfo;
      this.changeState(state, fsmInfo);
      fsmInfo.CurrentState.OnUpdate?.(this.player, this.world);
      fsmInfo.IncrementStateFrame();
    }
    ForceState(sateId) {
      const state = this.states.get(sateId);
      if (state === void 0) {
        return;
      }
      const fsmInfo = this.player.FSMInfo;
      this.changeState(state, fsmInfo);
    }
    UpdateFromInput(inputAction, world) {
      const fsmInfo = this.player.FSMInfo;
      if (this.runConditional(world, fsmInfo)) {
        return;
      }
      if (this.runNext(inputAction, fsmInfo)) {
        return;
      }
      if (this.runDefault(world, fsmInfo)) {
        return;
      }
      this.updateState(fsmInfo);
    }
    runConditional(world, fsmInfo) {
      const conditions = this.stateMappings.get(fsmInfo.CurrentStatetId).GetConditions();
      if (conditions === void 0) {
        return false;
      }
      const conditionalsLength = conditions.length;
      for (let i = 0; i < conditionalsLength; i++) {
        const stateId = RunCondition(conditions[i], world, this.player.ID);
        if (stateId !== void 0) {
          const state = this.states.get(stateId);
          if (state === void 0) {
            console.error("StateId not found in state machine: ", stateId);
            return false;
          }
          this.changeState(state, fsmInfo);
          this.updateState(fsmInfo);
          return true;
        }
      }
      return false;
    }
    runNext(inputAction, fsmInfo) {
      const state = this.getTranslation(inputAction.Action);
      if (state !== void 0) {
        this.changeState(state, fsmInfo);
        this.updateState(fsmInfo);
        return true;
      }
      return false;
    }
    runDefault(w, fsmInfo) {
      if (this.isDefaultFrame(fsmInfo) === false) {
        return false;
      }
      const defaultTransition = this.getDefaultState(
        this.player.FSMInfo.CurrentStatetId,
        w
      );
      if (defaultTransition === void 0) {
        return false;
      }
      this.changeState(defaultTransition, fsmInfo);
      this.updateState(fsmInfo);
      return true;
    }
    getTranslation(gameEventId) {
      const stateMappings = this.stateMappings.get(
        this.player.FSMInfo.CurrentStatetId
      );
      const nextStateId = stateMappings?.GetMapping(gameEventId);
      if (nextStateId !== void 0) {
        const state = this.states.get(nextStateId);
        return state;
      }
      return void 0;
    }
    getDefaultState(stateId, w) {
      const stateMapping = this.stateMappings.get(stateId);
      if (stateMapping === void 0) {
        return void 0;
      }
      const defaultStateConditions = stateMapping.GetDefaults();
      if (defaultStateConditions === void 0) {
        return void 0;
      }
      const defaultConditionsLength = defaultStateConditions.length;
      for (let i = 0; i < defaultConditionsLength; i++) {
        const condition2 = defaultStateConditions[i];
        const stateId2 = RunCondition(condition2, w, this.player.ID);
        if (stateId2 !== void 0) {
          return this.states.get(stateId2);
        }
      }
      return void 0;
    }
    changeState(state, fsmInfo) {
      fsmInfo.CurrentState.OnExit(this.player, this.world);
      fsmInfo.SetCurrentState(state);
      if (this.stateMappings.get(state.StateId) === void 0) {
        console.error("No state mapping found for state id: ", state.StateId);
        console.log(JSON.stringify(STATE_IDS));
      }
      fsmInfo.SetStateFrameToZero();
      fsmInfo.CurrentState.OnEnter(this.player, this.world);
    }
    updateState(fsmInfo) {
      fsmInfo.CurrentState.OnUpdate(this.player, this.world);
      fsmInfo.IncrementStateFrame();
    }
    isDefaultFrame(fsmInfo) {
      const fl = fsmInfo.GetCurrentStateFrameLength();
      if (fl === void 0) {
        return false;
      }
      if (fl === fsmInfo.CurrentStateFrame) {
        return true;
      }
      return false;
    }
  };

  // game/engine/engine-state-management/Managers.ts
  var InputStoreLocal = class {
    constructor() {
      this.P1localInputStore = new Array(1e3);
    }
    StoreInputForFrame(frame, input) {
      this.P1localInputStore[frame] = input;
    }
    GetInputForFrame(frame) {
      frame = frame >= 0 ? frame : 0;
      return this.P1localInputStore[frame];
    }
  };

  // game/engine/entity/componentHistory.ts
  var BaseConfigValues = class {
    constructor() {
      this.LedgeDetectorHeight = 0;
      this.LedgeDetectorWidth = 0;
      this.HurtCapsules = [];
      this.ShieldOffset = 0;
    }
  };
  var ComponentHistory = class {
    constructor() {
      // readonly _deb_hist: DebugSnapShot[] | undefined;
      this.BaseConfigValues = new BaseConfigValues();
      this.ShieldHistory = [];
      this.PositionHistory = [];
      this.FsmInfoHistory = [];
      this.DamageHistory = [];
      this.PlayerHitStunHistory = [];
      this.PlayerHitStopHistory = [];
      this.VelocityHistory = [];
      this.FlagsHistory = [];
      this.EcbHistory = [];
      this.JumpHistroy = [];
      this.LedgeDetectorHistory = [];
      this.SensorsHistory = [];
      this.AttackHistory = [];
      this.GrabHistory = [];
      this.GrabMeterHistory = [];
    }
    SetPlayerToFrame(p, frameNumber2) {
      p.Shield.SetFromSnapShot(this.ShieldHistory[frameNumber2]);
      p.Position.SetFromSnapShot(this.PositionHistory[frameNumber2]);
      p.FSMInfo.SetFromSnapShot(this.FsmInfoHistory[frameNumber2]);
      p.Velocity.SetFromSnapShot(this.VelocityHistory[frameNumber2]);
      p.Damage.SetFromSnapShot(this.DamageHistory[frameNumber2]);
      p.HitStop.SetFromSnapShot(this.PlayerHitStopHistory[frameNumber2]);
      p.HitStun.SetFromSnapShot(this.PlayerHitStunHistory[frameNumber2]);
      p.Flags.SetFromSnapShot(this.FlagsHistory[frameNumber2]);
      p.ECB.SetFromSnapShot(this.EcbHistory[frameNumber2]);
      p.LedgeDetector.SetFromSnapShot(this.LedgeDetectorHistory[frameNumber2]);
      p.Sensors.SetFromSnapShot(this.SensorsHistory[frameNumber2]);
      p.Jump.SetFromSnapShot(this.JumpHistroy[frameNumber2]);
      p.Attacks.SetFromSnapShot(this.AttackHistory[frameNumber2]);
      p.Grabs.SetFromSnapShot(this.GrabHistory[frameNumber2]);
      p.GrabMeter.SetFromSnapShot(this.GrabMeterHistory[frameNumber2]);
    }
  };

  // game/engine/pools/PooledVector.ts
  var PooledVector = class {
    constructor() {
      this.x = new FixedPoint(0);
      this.y = new FixedPoint(0);
    }
    AddVec(vec) {
      this.x.Add(vec.X);
      this.y.Add(vec.Y);
      return this;
    }
    AddXY(x, y) {
      this.x.Add(x);
      this.y.Add(y);
      return this;
    }
    SubtractVec(vec) {
      this.x.Subtract(vec.X);
      this.y.Subtract(vec.Y);
      return this;
    }
    SubtractVecRaw(xRaw, yRaw) {
      this.x.SetFromRaw(this.x.Raw - xRaw);
      this.y.SetFromRaw(this.y.Raw - yRaw);
      return this;
    }
    SubtractXY(x, y) {
      this.x.Subtract(x);
      this.y.Subtract(y);
      return this;
    }
    Multiply(s) {
      this.x.Multiply(s);
      this.y.Multiply(s);
      return this;
    }
    Negate() {
      this.x.Negate();
      this.y.Negate();
      return this;
    }
    Divide(s) {
      this.x.Divide(s);
      this.y.Divide(s);
      return this;
    }
    LengthRaw() {
      const xRaw = this.x.Raw;
      const yRaw = this.y.Raw;
      const sum = MultiplyRaw(xRaw, xRaw) + MultiplyRaw(yRaw, yRaw);
      return SqrtRaw(sum);
    }
    DistanceRaw(other) {
      const dx = this.x.Raw - other.x.Raw;
      const dy = this.y.Raw - other.y.Raw;
      const dx2 = MultiplyRaw(dx, dx);
      const dy2 = MultiplyRaw(dy, dy);
      return SqrtRaw(dx2 + dy2);
    }
    Normalize() {
      const length = this.LengthRaw();
      if (length > 0) {
        this.x.SetFromRaw(DivideRaw(this.x.Raw, length));
        this.y.SetFromRaw(DivideRaw(this.y.Raw, length));
      }
      return this;
    }
    SetFromFlatVec(vec) {
      this.x.SetFromFp(vec.X);
      this.y.SetFromFp(vec.Y);
      return this;
    }
    AddToX(x) {
      this.x.Add(x);
    }
    AddToXRaw(xRaw) {
      this.x.SetFromRaw(this.x.Raw + xRaw);
    }
    AddToY(y) {
      this.y.Add(y);
    }
    AddToYRaw(yRaw) {
      this.y.SetFromRaw(this.y.Raw + yRaw);
    }
    get X() {
      return this.x;
    }
    get Y() {
      return this.y;
    }
    SetX(x) {
      this.x.SetFromFp(x);
      return this;
    }
    SetxRaw(xRaw) {
      this.x.SetFromRaw(xRaw);
      return this;
    }
    SetY(y) {
      this.y.SetFromFp(y);
      return this;
    }
    SetYRaw(yRaw) {
      this.y.SetFromRaw(yRaw);
      return this;
    }
    SetXY(x, y) {
      this.x.SetFromFp(x);
      this.y.SetFromFp(y);
      return this;
    }
    SetXYRaw(x, y) {
      this.x.SetFromRaw(x);
      this.y.SetFromRaw(y);
      return this;
    }
    SetFromPooledVec(vec) {
      this.x.SetFromFp(vec.X);
      this.y.SetFromFp(vec.y);
      return this;
    }
    Zero() {
      this.x.Zero();
      this.y.Zero();
    }
  };

  // game/engine/pools/Pool.ts
  var Pool = class {
    constructor(poolSize, constructorFunc) {
      this.poolIndex = 0;
      this.pool = new Array(poolSize);
      this.constructorFunc = constructorFunc;
      for (let i = 0; i < poolSize; i++) {
        this.pool[i] = constructorFunc();
      }
    }
    Rent() {
      const pi = this.poolIndex;
      const p = this.pool;
      const pLength = p.length;
      if (pi < pLength) {
        const item = p[pi];
        item.Zero();
        this.poolIndex++;
        return item;
      }
      return this.constructorFunc();
    }
    Zero() {
      this.poolIndex = 0;
    }
    get ActiveCount() {
      return this.poolIndex;
    }
  };

  // game/engine/pools/CollisionResult.ts
  var CollisionResult = class {
    constructor() {
      this.collision = false;
      this.normX = new FixedPoint();
      this.normY = new FixedPoint();
      this.depth = new FixedPoint();
    }
    SetCollisionTrue(x, y, depth) {
      this.collision = true;
      this.normX.SetFromFp(x);
      this.normY.SetFromFp(y);
      this.depth.SetFromFp(depth);
    }
    SetCollisionTrueRaw(xRaw, yRaw, depthRaw) {
      this.collision = true;
      this.normX.SetFromRaw(xRaw);
      this.normY.SetFromRaw(yRaw);
      this.depth.SetFromRaw(depthRaw);
    }
    SetCollisionFalse() {
      this.collision = false;
      this.normX.Zero();
      this.normY.Zero();
      this.depth.Zero();
    }
    get Collision() {
      return this.collision;
    }
    get Depth() {
      return this.depth;
    }
    get NormX() {
      return this.normX;
    }
    get NormY() {
      return this.normY;
    }
    Zero() {
      this.SetCollisionFalse();
    }
  };

  // game/engine/pools/ProjectResult.ts
  var ProjectionResult = class {
    constructor() {
      this.min = new FixedPoint();
      this.max = new FixedPoint();
    }
    get Max() {
      return this.max;
    }
    get Min() {
      return this.min;
    }
    SetMinMax(min, max) {
      this.min.SetFromFp(min);
      this.max.SetFromFp(max);
    }
    SetMinMaxRaw(min, max) {
      this.min.SetFromRaw(min);
      this.max.SetFromRaw(max);
    }
    Zero() {
      this.min.Zero();
      this.max.Zero();
    }
  };

  // game/engine/pools/AttackResult.ts
  var AttackResult = class {
    constructor() {
      this.hit = false;
      this.shieldHit = false;
      this.damage = new FixedPoint();
      this.baseKnockBack = new FixedPoint();
      this.knockBackScaling = new FixedPoint();
      this.launchAngle = new FixedPoint();
      this.priority = Number.MAX_SAFE_INTEGER;
      this.normX = new FixedPoint();
      this.normY = new FixedPoint();
      this.depth = new FixedPoint();
      this.playerIndexOfPlayerHit = -1;
    }
    Zero() {
      this.hit = false;
      this.shieldHit = false;
      this.damage.Zero();
      this.baseKnockBack.Zero();
      this.knockBackScaling.Zero();
      this.launchAngle.Zero();
      this.priority = Number.MAX_SAFE_INTEGER;
      this.normX.Zero();
      this.normY.Zero();
      this.depth.Zero();
      this.playerIndexOfPlayerHit = -1;
    }
    SetHitTrue(playerIndex, damage, priority, normX, normY, depth, baseKnockBack, knockBackScaling, launchAngle) {
      this.hit = true;
      this.playerIndexOfPlayerHit = playerIndex;
      this.damage.SetFromFp(damage);
      this.priority = priority;
      this.normX.SetFromFp(normX);
      this.normY.SetFromFp(normY);
      this.depth.SetFromFp(depth);
      this.baseKnockBack.SetFromFp(baseKnockBack);
      this.knockBackScaling.SetFromFp(knockBackScaling);
      this.launchAngle.SetFromFp(launchAngle);
    }
    SetShieldHitTrue(playerIndex, damage, priority, normX, normY, depth, baseKnockBack, knockBackScaling, launchAngle) {
      this.shieldHit = true;
      this.playerIndexOfPlayerHit = playerIndex;
      this.damage.SetFromFp(damage);
      this.priority = priority;
      this.normX.SetFromFp(normX);
      this.normY.SetFromFp(normY);
      this.depth.SetFromFp(depth);
      this.baseKnockBack.SetFromFp(baseKnockBack);
      this.knockBackScaling.SetFromFp(knockBackScaling);
      this.launchAngle.SetFromFp(launchAngle);
    }
    get Hit() {
      return this.hit;
    }
    get ShieldHit() {
      return this.shieldHit;
    }
    get Damage() {
      return this.damage;
    }
    get Priority() {
      return this.priority;
    }
    get NormX() {
      return this.normX;
    }
    get NormY() {
      return this.normY;
    }
    get Depth() {
      return this.depth;
    }
    get BaseKnockBack() {
      return this.baseKnockBack;
    }
    get LaunchAngle() {
      return this.launchAngle;
    }
    get KnockBackScaling() {
      return this.knockBackScaling;
    }
    get PlayerIndex() {
      return this.playerIndexOfPlayerHit;
    }
  };

  // game/engine/pools/ClosestPointsResult.ts
  var ClosestPointsResult = class {
    constructor() {
      this.c1X = new FixedPoint();
      this.c1Y = new FixedPoint();
      this.c2X = new FixedPoint();
      this.c2Y = new FixedPoint();
    }
    Set(c1X, c1Y, c2X, c2Y) {
      this.c1X.SetFromFp(c1X);
      this.c1Y.SetFromFp(c1Y);
      this.c2X.SetFromFp(c2X);
      this.c2Y.SetFromFp(c2Y);
    }
    SetRaw(c1XRaw, c1YRaw, c2XRaw, c2YRaw) {
      this.c1X.SetFromRaw(c1XRaw);
      this.c1Y.SetFromRaw(c1YRaw);
      this.c2X.SetFromRaw(c2XRaw);
      this.c2Y.SetFromRaw(c2YRaw);
    }
    get C1X() {
      return this.c1X;
    }
    get C1Y() {
      return this.c1Y;
    }
    get C2X() {
      return this.c2X;
    }
    get C2Y() {
      return this.c2Y;
    }
    Zero() {
      this.c1X.Zero();
      this.c1Y.Zero();
      this.c2X.Zero();
      this.c2Y.Zero();
    }
  };

  // game/engine/pools/ECBDiamonDTO.ts
  var DiamondDTO = class {
    constructor() {
      this.shape = new Array(4);
      FillArrayWithFlatVec(this.shape);
    }
    get Bottom() {
      return this.shape[0];
    }
    get Left() {
      return this.shape[1];
    }
    get Top() {
      return this.shape[2];
    }
    get Right() {
      return this.shape[3];
    }
    Zero() {
      for (let i = 0; i < this.shape.length; i++) {
        this.shape[i].X.Zero();
        this.shape[i].Y.Zero();
      }
    }
  };

  // game/engine/config/configConverter.ts
  function objectToMap(obj, prefix = "", map = /* @__PURE__ */ new Map()) {
    for (const key in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, key)) {
        const value = obj[key];
        const newKey = prefix ? `${prefix}.${key}` : key;
        if (typeof value === "object" && value !== null && !Array.isArray(value)) {
          objectToMap(value, newKey, map);
        } else if (typeof value === "number" || typeof value === "string") {
          map.set(newKey, value);
        }
      }
    }
    return map;
  }

  // game/engine/config/main-config.ts
  var config = {
    MaxPlayers: 4,
    MaxAtkBubblesPerPlayer: 25,
    MaxHurtBubblesPerPlayer: 25,
    MaxGrabBubblesPerPlayer: 25,
    MaxSensorsPerPlayer: 10,
    PoolSizes: {
      PooledVectorCount: 1e3,
      CollisionResultCount: 500,
      ProjectionResultCount: 300,
      AttackResultCount: 100,
      ClosestPointsResultCount: 500,
      ActiveHitBubblesDTOCount: 200,
      DiamondDTOCount: 50
    },
    Physics: {
      MaxVelocity: 200
    },
    NetWork: {
      MaxRollBackFrames: 100
    }
  };
  var envConfig = objectToMap(config);

  // game/engine/world/world.ts
  var PlayerState = class {
    constructor() {
      this.players = [];
      this.stateMachines = [];
      this.inputStore = [];
    }
    StateMachine(playerId) {
      return this.stateMachines[playerId];
    }
    InputStore(playerId) {
      return this.inputStore[playerId];
    }
    Player(playerId) {
      return this.players[playerId];
    }
    AddPlayer(p) {
      this.players.push(p);
    }
    AddStateMachine(sm) {
      this.stateMachines.push(sm);
    }
    AddInputStore(is, currentFrame) {
      for (let i = 0; i <= currentFrame; i++) {
        is.StoreInputForFrame(i, NewInputAction());
      }
      this.inputStore.push(is);
    }
    get PlayerCount() {
      return this.players.length;
    }
  };
  var StageWorldState = class {
  };
  var PoolContainer = class {
    constructor(mc) {
      this.ActiveHitBubbleDtoPool = new Pool(
        mc.get("PoolSizes.ActiveHitBubblesDTOCount"),
        () => new ActiveHitBubblesDTO()
      );
      this.VecPool = new Pool(
        mc.get("PoolSizes.PooledVectorCount"),
        () => new PooledVector()
      );
      this.ColResPool = new Pool(
        mc.get("PoolSizes.CollisionResultCount"),
        () => new CollisionResult()
      );
      this.ProjResPool = new Pool(
        mc.get("PoolSizes.ProjectionResultCount"),
        () => new ProjectionResult()
      );
      this.AtkResPool = new Pool(
        mc.get("PoolSizes.AttackResultCount"),
        () => new AttackResult()
      );
      this.ClstsPntsResPool = new Pool(
        mc.get("PoolSizes.ClosestPointsResultCount"),
        () => new ClosestPointsResult()
      );
      this.DiamondPool = new Pool(
        mc.get("PoolSizes.DiamondDTOCount"),
        () => new DiamondDTO()
      );
    }
    Zero() {
      this.ActiveHitBubbleDtoPool.Zero();
      this.VecPool.Zero();
      this.ColResPool.Zero();
      this.ProjResPool.Zero();
      this.AtkResPool.Zero();
      this.ClstsPntsResPool.Zero();
      this.DiamondPool.Zero();
    }
  };
  var History = class {
    constructor() {
      this.PlayerComponentHistories = [];
      this.RentedVecHistory = [];
      this.RentedColResHsitory = [];
      this.RentedProjResHistory = [];
      this.RentedAtkResHistory = [];
      this.RentedAtiveHitBubHistory = [];
      this.RentedClosestPoints = [];
      this.RedntedECBDtos = [];
    }
  };
  var World = class {
    constructor(mc = void 0) {
      this.localFrame = 0;
      this.StageData = new StageWorldState();
      this.PlayerData = new PlayerState();
      this.HistoryData = new History();
      this.FrameTimes = [];
      this.FrameTimeStamps = [];
      if (mc === void 0) {
        mc = envConfig;
      }
      this.Pools = new PoolContainer(mc);
    }
    get PreviousFrame() {
      return this.localFrame < 1 ? 0 : this.localFrame - 1;
    }
    get LocalFrame() {
      return this.localFrame;
    }
    set LocalFrame(f) {
      this.localFrame = f;
      if (Number.isInteger(f) === false) {
        console.error(
          "World local frame was set to a number value other than an integer."
        );
      }
    }
    SetPlayer(p) {
      this.PlayerData.AddPlayer(p);
      this.PlayerData.AddStateMachine(new StateMachine(p, this));
      this.PlayerData.AddInputStore(
        new InputStoreLocal(),
        this.localFrame
      );
      const compHist = new ComponentHistory();
      compHist.BaseConfigValues.LedgeDetectorWidth = p.LedgeDetector.Width.AsNumber;
      compHist.BaseConfigValues.LedgeDetectorHeight = p.LedgeDetector.Height.AsNumber;
      compHist.BaseConfigValues.ShieldOffset = p.Shield.YOffsetConstant.AsNumber;
      p.HurtCircles.HurtCapsules.forEach(
        (hc) => compHist.BaseConfigValues.HurtCapsules.push(hc)
      );
      this.HistoryData.PlayerComponentHistories.push(compHist);
      InitPlayerHistory(p, this);
    }
    SetStage(s) {
      this.StageData.Stage = s;
    }
    GetComponentHistory(index) {
      return this.HistoryData.PlayerComponentHistories[index];
    }
    GetFrameTimeForFrame(frame) {
      return this.FrameTimes[frame];
    }
    SetFrameTimeForFrame(frame, frameTime) {
      this.FrameTimes[frame] = frameTime;
    }
    SetFrameTimeStampForFrame(frame, timeStamp) {
      this.FrameTimeStamps[frame] = timeStamp;
    }
    GetFrameTimeStampForFrame(frame) {
      return this.FrameTimeStamps[frame];
    }
    GetRentedVecsForFrame(frame) {
      return this.HistoryData.RentedVecHistory[frame];
    }
    GetRentedColResForFrame(frame) {
      return this.HistoryData.RentedColResHsitory[frame];
    }
    GetRentedProjResForFrame(frame) {
      return this.HistoryData.RentedProjResHistory[frame];
    }
    GetRentedAtkResForFrame(frame) {
      return this.HistoryData.RentedAtkResHistory[frame];
    }
    GetRentedActiveHitBubblesForFrame(frame) {
      return this.HistoryData.RentedAtiveHitBubHistory[frame];
    }
    GetRentedClosestPointsForFrame(frame) {
      return this.HistoryData.RentedClosestPoints[frame];
    }
    GetRentedECBDtosForFrame(frame) {
      return this.HistoryData.RedntedECBDtos[frame];
    }
    SetPoolHistory() {
      const frame = this.LocalFrame;
      const histDat = this.HistoryData;
      const pools = this.Pools;
      histDat.RentedVecHistory[frame] = pools.VecPool.ActiveCount;
      histDat.RentedColResHsitory[frame] = pools.ColResPool.ActiveCount;
      histDat.RentedProjResHistory[frame] = pools.ProjResPool.ActiveCount;
      histDat.RentedAtkResHistory[frame] = pools.AtkResPool.ActiveCount;
      histDat.RentedAtiveHitBubHistory[frame] = pools.ActiveHitBubbleDtoPool.ActiveCount;
      histDat.RentedClosestPoints[frame] = pools.ClstsPntsResPool.ActiveCount;
      histDat.RedntedECBDtos[frame] = pools.DiamondPool.ActiveCount;
    }
  };

  // game/engine/systems/grab.ts
  function PlayerGrabs(w) {
    const pd = w.PlayerData;
    const pools = w.Pools;
    const componenetHistories = w.HistoryData.PlayerComponentHistories;
    const playerCount = pd.PlayerCount;
    for (let outerPlayerIndex = 0; outerPlayerIndex < playerCount; outerPlayerIndex++) {
      const p1 = pd.Player(outerPlayerIndex);
      const p1Sm = pd.StateMachine(p1.ID);
      for (let innerPlayerIndex = outerPlayerIndex + 1; innerPlayerIndex < playerCount; innerPlayerIndex++) {
        const p2 = pd.Player(innerPlayerIndex);
        const p2Sm = pd.StateMachine(p2.ID);
        const p1VsP2 = PAvsPB2(
          p1,
          p2,
          componenetHistories,
          pools.VecPool,
          pools.ClstsPntsResPool,
          w.LocalFrame
        );
        const p2VsP1 = PAvsPB2(
          p2,
          p1,
          componenetHistories,
          pools.VecPool,
          pools.ClstsPntsResPool,
          w.LocalFrame
        );
        if (p1VsP2 && !p2VsP1) {
          resolveGrab(p1, p2, p1Sm, p2Sm);
          continue;
        }
        if (!p1VsP2 && p2VsP1) {
          resolveGrab(p2, p1, p2Sm, p1Sm);
          continue;
        }
        if (p1VsP2 && p2VsP1) {
          resolveDoubleGrab(p1, p2, p1Sm, p2Sm);
          continue;
        }
      }
    }
  }
  var HOLD_DISTANCE = NumberToRaw(50);
  function resolveDoubleGrab(grabberA, grabberB, grabberASm, grabberBSm) {
    if (grabberA.Damage.Damage > grabberB.Damage.Damage) {
      resolveGrab(grabberA, grabberB, grabberASm, grabberBSm);
      return;
    }
    if (grabberB.Damage.Damage > grabberA.Damage.Damage) {
      resolveGrab(grabberB, grabberA, grabberBSm, grabberASm);
      return;
    }
    if (grabberA.Weight.Value >= grabberB.Weight.Value) {
      resolveGrab(grabberA, grabberB, grabberASm, grabberBSm);
      return;
    }
    resolveGrab(grabberB, grabberA, grabberBSm, grabberASm);
  }
  function resolveGrab(grabber, grabee, grabberSm, grabeeSm) {
    grabberSm.UpdateFromWorld(GAME_EVENT_IDS.GRAB_HOLD_GE);
    grabeeSm.UpdateFromWorld(GAME_EVENT_IDS.GRAB_HELD_GE);
    const grabberPos = grabber.Position;
    const grabberDirection = grabber.Flags.IsFacingRight;
    const grabbeeDirection = grabee.Flags.IsFacingRight;
    if (grabberDirection === grabbeeDirection) {
      grabee.Flags.ChangeDirections();
    }
    const grabeeNewPosY = grabberPos.Y.Raw;
    const grabeeNewPosX = grabberDirection ? grabberPos.X.Raw + HOLD_DISTANCE : grabberPos.X.Raw - HOLD_DISTANCE;
    SetPlayerPositionRaw(grabee, grabeeNewPosX, grabeeNewPosY);
    grabee.GrabMeter.SetHoldingPlayerId(grabber.ID);
  }
  var agbDto = new ActiveGrabBubblesDTO();
  function PAvsPB2(pA, pB, componentHistories, vecPool, clstsPntsResPool, currentFrame) {
    const pAStateFrame = pA.FSMInfo.CurrentStateFrame;
    const pAGrab = pA.Grabs.GetGrab();
    if (pAGrab === void 0) {
      return false;
    }
    if (pB.Flags.IsIntangible) {
      return false;
    }
    agbDto.Zero();
    const grabBubbles = pAGrab.GetActiveBubblesForFrame(pAStateFrame, agbDto);
    const grabBubblesLength = grabBubbles.Length;
    if (grabBubblesLength === 0) {
      return false;
    }
    const hurtBubbles = pB.HurtCircles.HurtCapsules;
    const hurtBubblesLength = hurtBubbles.length;
    const pAPosition = pA.Position;
    const pBPosition = pB.Position;
    const pAFacingRight = pA.Flags.IsFacingRight;
    const pAHistory = componentHistories[pA.ID];
    const previousWorldFrame = currentFrame === 0 ? 0 : currentFrame - 1;
    const prevPostion = pAHistory.PositionHistory[previousWorldFrame];
    const prevUndefined = prevPostion === void 0;
    const prevXRaw = prevUndefined ? pA.Position.X.Raw : NumberToRaw(prevPostion.X);
    const prevYRaw = prevUndefined ? pA.Position.Y.Raw : NumberToRaw(prevPostion.Y);
    for (let hurtIndex = 0; hurtIndex < hurtBubblesLength; hurtIndex++) {
      const hurtBubble = hurtBubbles[hurtIndex];
      const hurtBubStart = hurtBubble.GetStartPosition(
        pBPosition.X,
        pBPosition.Y,
        vecPool
      );
      const hurtBubEnd = hurtBubble.GetEndPosition(
        pBPosition.X,
        pBPosition.Y,
        vecPool
      );
      for (let grabIndex = 0; grabIndex < grabBubblesLength; grabIndex++) {
        const grabBubble = grabBubbles.AtIndex(grabIndex);
        const grabBubCurPos = grabBubble.GetGlobalPosition(
          vecPool,
          pAPosition.X,
          pAPosition.Y,
          pAFacingRight,
          pAStateFrame
        );
        if (grabBubCurPos === void 0) {
          continue;
        }
        const grabPrevPos = grabBubble.GetGlobalPositionRaw(
          vecPool,
          prevXRaw,
          prevYRaw,
          pAFacingRight,
          pAStateFrame > 0 ? pAStateFrame - 1 : 0
        ) ?? vecPool.Rent().SetXY(grabBubCurPos.X, grabBubCurPos.Y);
        const closestPoint = ClosestPointsBetweenSegments(
          grabPrevPos,
          grabBubCurPos,
          hurtBubStart,
          hurtBubEnd,
          vecPool,
          clstsPntsResPool
        );
        const grabRadius = grabBubble.Radius;
        const hurtRadius = hurtBubble.Radius;
        const collision = IntersectsCirclesRawBool(
          closestPoint.C1X.Raw,
          closestPoint.C1Y.Raw,
          closestPoint.C2X.Raw,
          closestPoint.C2Y.Raw,
          grabRadius.Raw,
          hurtRadius.Raw
        );
        if (collision) {
          return true;
        }
      }
    }
    return false;
  }

  // game/engine/systems/grabMeter.ts
  var POINT_TWO_FIVE = NumberToRaw(0.25);
  var POINT_FOUR3 = NumberToRaw(0.4);
  var ONE_POINT_FIVE = NumberToRaw(1.5);
  var TWO7 = NumberToRaw(2);
  var BASE_METER = NumberToRaw(60);
  function GrabMeter2(w) {
    const pd = w.PlayerData;
    const playerCount = pd.PlayerCount;
    for (let playerIndex = 0; playerIndex < playerCount; playerIndex++) {
      const p = pd.Player(playerIndex);
      if (p.FSMInfo.CurrentStatetId !== STATE_IDS.GRAB_HELD_S) {
        continue;
      }
      const grabMeterComp = p.GrabMeter;
      const baseDecay = grabMeterComp.BaseDecayRate;
      const damage = p.Damage.Damage;
      const currentMeter = grabMeterComp.Meter;
      const maxMeter = BASE_METER + MultiplyRaw(damage.Raw, TWO7);
      const iS = pd.InputStore(playerIndex);
      const previousInput = iS.GetInputForFrame(w.PreviousFrame);
      const currentInput2 = iS.GetInputForFrame(w.LocalFrame);
      const actionBonusDecay = previousInput.Action !== currentInput2.Action ? ONE_POINT_FIVE : 0;
      let stickbonusDecay = 0;
      if (Math.abs(previousInput.LXAxis.Raw - currentInput2.LXAxis.Raw) > POINT_FOUR3) {
        stickbonusDecay += POINT_TWO_FIVE;
      }
      if (Math.abs(previousInput.LYAxis.Raw - currentInput2.LYAxis.Raw) > POINT_FOUR3) {
        stickbonusDecay += POINT_TWO_FIVE;
      }
      if (Math.abs(previousInput.RXAxis.Raw - currentInput2.RXAxis.Raw) > POINT_FOUR3) {
        stickbonusDecay += POINT_TWO_FIVE;
      }
      if (Math.abs(previousInput.RYAxis.Raw - currentInput2.RYAxis.Raw) > POINT_FOUR3) {
        stickbonusDecay += POINT_TWO_FIVE;
      }
      const decay = baseDecay + actionBonusDecay + stickbonusDecay;
      currentMeter.AddRaw(decay);
      if (currentMeter.Raw >= maxMeter) {
        const sm = pd.StateMachine(p.ID);
        const grabber = pd.Player(grabMeterComp.HoldingPlayerId);
        const grabberSm = pd.StateMachine(grabber.ID);
        sm.UpdateFromWorld(GAME_EVENT_IDS.GRAB_ESCAPE_GE);
        grabberSm.UpdateFromWorld(GAME_EVENT_IDS.GRAB_RELEASE_GE);
      }
    }
  }

  // game/engine/jazz.ts
  var Jazz = class {
    constructor(customLoop) {
      this.world = new World();
      this.loop = customLoop || DefaultGameLoop;
    }
    get World() {
      return this.world;
    }
    Init(cc, positions = void 0) {
      const s = defaultStage();
      this.world.SetStage(s);
      const numberOfPlayers = cc.length;
      for (let i = 0; i < numberOfPlayers; i++) {
        this.addPlayerEntity(cc[i], positions?.[i]);
      }
    }
    addPlayerEntity(cc, pos) {
      const p = new Player2(this.world.PlayerData.PlayerCount, cc);
      if (pos !== void 0) {
        SetPlayerInitialPositionRaw(p, pos.X.Raw, pos.Y.Raw);
      }
      this.world.SetPlayer(p);
    }
    UpdateInputForCurrentFrame(ia, pIndex) {
      this.world.PlayerData.InputStore(pIndex).StoreInputForFrame(
        this.world.LocalFrame,
        ia
      );
    }
    Tick() {
      const world = this.World;
      world.Pools.Zero();
      let frameTimeStart = performance.now();
      this.loop(this.World);
      let frameTimeDelta = performance.now() - frameTimeStart;
      world.SetFrameTimeForFrame(world.LocalFrame, frameTimeDelta);
      world.SetFrameTimeStampForFrame(world.LocalFrame, frameTimeStart);
      world.LocalFrame++;
    }
  };
  var DefaultGameLoop = (w) => {
    PlayerInput(w);
    Gravity(w);
    ApplyVelocity(w);
    ApplyVelocityDecay(w);
    PlayerCollisionDetection(w);
    PlatformDetection(w);
    StageCollisionDetection(w);
    LedgeGrabDetection(w);
    PlayerSensors(w);
    PlayerAttacks(w);
    ShieldRegen(w);
    GrabMeter2(w);
    PlayerGrabs(w);
    OutOfBoundsCheck(w);
    TimedFlags(w);
    RecordHistory(w);
  };

  // game/engine/debug/playerDebugger.ts
  var ntr = NumberToRaw;
  var PlayerDebugAdapter = class {
    constructor(p, w) {
      this.player = p;
      this.world = w;
      this.stateMachine = w.PlayerData.StateMachine(p.ID);
      this.inputStore = w.PlayerData.InputStore(p.ID);
      this.hist = w.HistoryData.PlayerComponentHistories[p.ID];
      this.pId = p.ID;
    }
    get Player() {
      return this.player;
    }
    ForceState(stateId) {
      this.stateMachine.ForceState(stateId);
    }
    SetInputs(inputs) {
      inputs.forEach((v, k) => {
        this.inputStore.StoreInputForFrame(k, v);
      });
    }
    MoveTo(x, y) {
      SetPlayerPositionRaw(this.player, ntr(x), ntr(y));
    }
    ForceStateFrame(frame) {
      this.player.FSMInfo._db_currentStateFrame = frame;
    }
    LookLeft() {
      this.player.Flags.FaceLeft();
    }
    LookRight() {
      this.player.Flags.FaceRight();
    }
    set VelX(velX) {
      this.player.Velocity.X.SetFromRaw(ntr(velX));
    }
    set VelY(velY) {
      this.player.Velocity.Y.SetFromRaw(ntr(velY));
    }
    GetPlayerDataForFrame(frame) {
      const hist = this.hist;
      const pd = {
        Shield: hist.ShieldHistory[frame],
        Position: hist.PositionHistory[frame],
        FSMInfo: hist.FsmInfoHistory[frame],
        Damage: hist.DamageHistory[frame],
        Velocity: hist.VelocityHistory[frame],
        Flags: hist.FlagsHistory[frame],
        PlayerHitStop: hist.PlayerHitStopHistory[frame],
        PlayerHitStun: hist.PlayerHitStunHistory[frame],
        LedgeDetector: hist.LedgeDetectorHistory[frame],
        Sensors: hist.SensorsHistory[frame],
        Ecb: hist.EcbHistory[frame],
        Jump: hist.JumpHistroy[frame],
        Attack: hist.AttackHistory[frame],
        Grab: hist.GrabHistory[frame],
        GrabMeter: hist.GrabMeterHistory[frame]
      };
      return pd;
    }
    get LiveStateData() {
      const p = this.player;
      const pd = {
        Shield: p.Shield.SnapShot(),
        Position: p.Position.SnapShot(),
        FSMInfo: p.FSMInfo.SnapShot(),
        Damage: p.Damage.SnapShot(),
        Velocity: p.Velocity.SnapShot(),
        Flags: p.Flags.SnapShot(),
        PlayerHitStop: p.HitStop.SnapShot(),
        PlayerHitStun: p.HitStun.SnapShot(),
        LedgeDetector: p.LedgeDetector.SnapShot(),
        Sensors: p.Sensors.SnapShot(),
        Ecb: p.ECB.SnapShot(),
        Jump: p.Jump.SnapShot(),
        Attack: p.Attacks.SnapShot(),
        Grab: p.Grabs.SnapShot(),
        GrabMeter: p.GrabMeter.SnapShot()
      };
      return pd;
    }
  };

  // game/engine/debug/jazzDebugWrapper.ts
  var JazzDebugger = class {
    constructor() {
      this.playerDebuggers = new Array();
      this.paused = false;
      this.previousInput = void 0;
      this.advanceFrame = false;
      this.jazz = new Jazz();
      this.world = this.jazz.World;
    }
    AddPlayerEntity(cc, pos) {
      const p = new Player2(this.World.PlayerData.PlayerCount, cc);
      if (pos !== void 0) {
        SetPlayerInitialPositionRaw(p, pos.X.Raw, pos.Y.Raw);
      }
      this.jazz.World.SetPlayer(p);
      const pd = new PlayerDebugAdapter(p, this.world);
      this.playerDebuggers.push(pd);
      return pd;
    }
    UpdateInputForCurrentFrame(ia, pIndex) {
      if (pIndex === 0) {
        this.togglePause(ia);
      }
      const frame = this.world.LocalFrame;
      if (this.paused) {
        if (pIndex === 0 && this.advanceOneFrame(ia)) {
          this.advanceFrame = true;
        }
        if (this.advanceFrame) {
          if (this.world.PlayerData.InputStore(pIndex).GetInputForFrame(frame) === void 0) {
            this.jazz.UpdateInputForCurrentFrame(ia, pIndex);
          }
        }
        if (pIndex === 0) {
          this.previousInput = ia;
        }
        return;
      }
      if (this.world.PlayerData.InputStore(pIndex).GetInputForFrame(frame) === void 0) {
        this.jazz.UpdateInputForCurrentFrame(ia, pIndex);
      }
      if (pIndex === 0) {
        this.previousInput = ia;
      }
    }
    Init(ccs, positions = void 0) {
      this.jazz.Init(ccs, positions);
      const pl = this.world.PlayerData.PlayerCount;
      for (let i = 0; i < pl; i++) {
        const pd = new PlayerDebugAdapter(
          this.world.PlayerData.Player(i),
          this.world
        );
        this.playerDebuggers.push(pd);
      }
    }
    Tick() {
      if (this.paused && this.advanceFrame) {
        this.advanceFrame = false;
        this.jazz.Tick();
        return;
      }
      if (!this.paused) {
        this.jazz.Tick();
      }
    }
    get World() {
      return this.jazz.World;
    }
    togglePause(ia) {
      const PausedPreviouisInput = this.previousInput?.Start ?? false;
      const PausedCurrentInput = ia.Start ?? false;
      if (PausedPreviouisInput === false && PausedCurrentInput) {
        this.paused = !this.paused;
      }
    }
    advanceOneFrame(ia) {
      const selectPressed = ia.Select ?? false;
      const selectHeld = this.previousInput?.Select ?? false;
      return selectPressed && !selectHeld;
    }
  };

  // game/engine/debug/scenarios/spawnPlayerAndAttack.ts
  function SpawnAndAttackWithNSpecial(jazz) {
    const cc = new DefaultCharacterConfig();
    const g = jazz.World.StageData.Stage.StageVerticies.GetGround()[0];
    const centerX = g.X2.AsNumber - (g.X2.AsNumber - g.X1.AsNumber) / 2;
    const groundHeight = g.Y1.AsNumber + RawToNumber(CORRECTION_DEPTH_RAW);
    const pdb = jazz.AddPlayerEntity(cc, ToFV(centerX, groundHeight));
    pdb.LookLeft();
    pdb.ForceState(STATE_IDS.SPCL_S);
  }

  // game/loops/local-main.ts
  var frameInterval = 1e3 / 60;
  function ENGINE_DEBUG_LISTENERS(jdb) {
    window.addEventListener("keyup", (e) => {
      if (e.key === "1") {
        SpawnAndAttackWithNSpecial(jdb);
      }
    });
  }
  function SHOW_DEBUG_INFO(dbr) {
    window.addEventListener("keyup", (e) => {
      if (e.key === "d") {
        dbr.PlayerDeBugInfo = !dbr.PlayerDeBugInfo;
      }
    });
  }
  function start(playerInfo) {
    const engine = new JazzDebugger();
    const ccs = new Array();
    const playerCount = playerInfo.length;
    const positions = [
      { X: new FixedPoint(610), Y: new FixedPoint(100) }
    ];
    if (playerCount == 2) {
      positions.push({ X: new FixedPoint(690), Y: new FixedPoint(100) });
    }
    ccs.push(new DefaultCharacterConfig());
    if (playerCount == 2) {
      ccs.push(new DefaultCharacterConfig());
    }
    engine.Init(ccs, positions);
    for (let i = 0; i < playerCount; i++) {
      const sm = engine.World.PlayerData.StateMachine(i);
      sm.SetInitialState(STATE_IDS.N_FALL_S);
    }
    ENGINE_DEBUG_LISTENERS(engine);
    LOGIC_LOOP(engine, playerInfo);
    RENDER_LOOP(engine);
  }
  function LOGIC_LOOP(engine, gpInfo) {
    const logicLoopHandle = setInterval(() => {
      logicStep(engine, gpInfo);
    }, frameInterval);
  }
  function RENDER_LOOP(jazzDebugger) {
    const canvas = document.getElementById("game");
    const dbCanvas = document.getElementById("debugInfo");
    const mainWindow = {
      canvas,
      resX: 1920,
      resY: 1080
    };
    const dbWindow = {
      canvas: dbCanvas,
      resX: 600,
      resY: 1200
    };
    const dbRenderer = new DebugRenderer(mainWindow, dbWindow);
    SHOW_DEBUG_INFO(dbRenderer);
    RENDERFPS60Loop((timeStamp) => {
      dbRenderer.render(jazzDebugger, timeStamp);
    });
  }
  function logicStep(engine, gamePadInfo) {
    const w = engine.World;
    const playerCount = w?.PlayerData.PlayerCount;
    for (let i = 0; i < playerCount; i++) {
      const info = gamePadInfo[i];
      if (info === void 0) {
        const dbInput = NewInputAction();
        engine.UpdateInputForCurrentFrame(dbInput, i);
        continue;
      }
      const gpI = info.inputIndex;
      const pi = info.playerIndex;
      const input = GetInput(gpI, w);
      engine.UpdateInputForCurrentFrame(input, pi);
    }
    engine.Tick();
  }

  // game/ui/game-page.ts
  function GetConnectedGamePads() {
    const gamePads = navigator.getGamepads();
    let anyGps = false;
    gamePads.forEach((gp) => {
      if (gp) {
        anyGps = true;
      }
    });
    if (!anyGps) {
      console.log("no controller detected");
      return false;
    }
    const gpOptions = /* @__PURE__ */ new Map();
    let i = 0;
    for (const gp of gamePads) {
      i++;
      if (gp) {
        gpOptions.set(`${gp.id} -${i}`, gp.index);
      }
    }
    return gpOptions;
  }
  function populateControllerList(selectId) {
    const elem = document.getElementById(selectId);
    if (!elem || !(elem instanceof HTMLSelectElement)) {
      console.error(
        `Element with ID '${selectId}' is not a valid <select> element.`
      );
      return;
    }
    elem.innerHTML = "";
    const gamePads = GetConnectedGamePads();
    if (gamePads === false) {
      const option = document.createElement("option");
      option.value = "";
      option.textContent = "No controllers connected";
      option.selected = true;
      elem.appendChild(option);
      return;
    } else {
      const option = document.createElement("option");
      option.value = "";
      option.textContent = "No controllers connected";
      option.selected = true;
      elem.appendChild(option);
    }
    gamePads.forEach((index, id) => {
      const option = document.createElement("option");
      option.value = index.toString();
      option.textContent = id;
      elem.appendChild(option);
    });
  }
  function InitGamePage() {
    console.log("InitGamePage called");
    setUpListeners();
    refreshGamePadList();
  }
  var gameMode = -1;
  function setUpListeners() {
    console.log("setUpListeners called");
    const modeSelect2 = document.getElementById(
      "mode-select"
    );
    if (modeSelect2) {
      console.log("mode-select found");
      modeSelect2.addEventListener("change", (event) => {
        console.log("mode-select change event fired");
        const selectedValue = event.target.value;
        const p1Select2 = document.getElementById(
          "p1-gamepad-select"
        );
        const p2Select2 = document.getElementById(
          "p2-gamepad-select"
        );
        const refreshButton = document.getElementById(
          "refresh-gamepad-select"
        );
        if (p1Select2) {
          p1Select2.disabled = true;
        }
        if (p2Select2) {
          p2Select2.disabled = true;
        }
        if (refreshButton) {
          refreshButton.disabled = true;
        }
        if (selectedValue == "1" || selectedValue == "2") {
          if (p1Select2) {
            p1Select2.disabled = false;
          }
        }
        if (selectedValue == "2") {
          if (p2Select2) {
            p2Select2.disabled = false;
          }
        }
        if (parseInt(selectedValue) > 0) {
          if (refreshButton) {
            refreshButton.disabled = false;
          }
        }
        gameMode = parseInt(selectedValue);
        updateCanStart();
      });
    } else {
      console.error("mode-select not found!");
    }
    const refreshBtn = document.getElementById(
      "refresh-gamepad-select"
    );
    if (refreshBtn) {
      console.log("refresh-gamepad-select found");
      refreshBtn.addEventListener("click", refreshGamePadList);
    } else {
      console.error("refresh-gamepad-select not found!");
    }
    window.addEventListener("gamepadconnected", (event) => {
      console.log("Gamepad connected:", event.gamepad);
      refreshGamePadList();
    });
    const p1Select = document.getElementById(
      "p1-gamepad-select"
    );
    if (p1Select) {
      console.log("p1-gamepad-select found");
      p1Select.addEventListener("change", (event) => {
        updateCanStart();
      });
    } else {
      console.error("p1-gamepad-select not found!");
    }
    const p2Select = document.getElementById(
      "p2-gamepad-select"
    );
    if (p2Select) {
      console.log("p2-gamepad-select found");
      p2Select.addEventListener("change", (event) => {
        updateCanStart();
      });
    } else {
      console.error("p2-gamepad-select not found!");
    }
  }
  function canStart() {
    const p1Select = document.getElementById(
      "p1-gamepad-select"
    );
    const p2Select = document.getElementById(
      "p2-gamepad-select"
    );
    if (!p1Select) {
      return false;
    }
    if (gameMode === 1) {
      return p1Select.value !== "";
    }
    if (gameMode === 2) {
      if (!p2Select) {
        return false;
      }
      return p1Select.value !== "" && p2Select.value !== "";
    }
    return false;
  }
  function updateCanStart() {
    const btn = document.getElementById("start-game");
    if (btn) {
      btn.disabled = !canStart();
    }
  }
  function refreshGamePadList() {
    populateControllerList("p1-gamepad-select");
    populateControllerList("p2-gamepad-select");
    updateCanStart();
  }

  // game/index.ts
  document.addEventListener("DOMContentLoaded", () => {
    InitGamePage();
  });
  var p1GamePadSelect = document.getElementById(
    "p1-gamepad-select"
  );
  var p2GamePadSelect = document.getElementById(
    "p2-gamepad-select"
  );
  var modeSelect = document.getElementById("mode-select");
  var starBtn = document.getElementById("start-game");
  starBtn.addEventListener("click", () => {
    const mode = modeSelect.value;
    const p1GamePad = Number.parseInt(p1GamePadSelect.value);
    if (mode == "1") {
      const controllerInfo = {
        playerIndex: 0,
        inputIndex: p1GamePad
      };
      start([controllerInfo]);
    }
    if (mode == "2") {
      const p2GamePad = Number.parseInt(p2GamePadSelect.value);
      const controllerInfo = [
        { playerIndex: 0, inputIndex: p1GamePad },
        { playerIndex: 1, inputIndex: p2GamePad }
      ];
      start(controllerInfo);
    }
  });
})();
//# sourceMappingURL=index.js.map
